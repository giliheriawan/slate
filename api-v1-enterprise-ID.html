<!doctype html> <html> <head> <meta charset=utf-8> <meta content="IE=edge,chrome=1" http-equiv=X-UA-Compatible> <meta name=author content="PT. IONPAY NETWORKS"> <meta name=description content="NICEPAY API Reference Documentation"> <meta name=keywords content="nicepay, nicepay API, API nicepay, nicepay API documentation, nicepay API docs, API docs nicepay, API documentation nicepay, nicepay docs, docs nicepay"> <meta name=viewport content="width=device-width, initial-scale=1, maximum-scale=1"> <title>NICEPAY API Documentation - V1</title> <link rel=stylesheet href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" integrity="sha384-3AB7yXWz4OeoZcPbieVW64vVXEwADiYyAEhwilzWsLw+9FgqpyjjStpPnpBO8o8S" crossorigin=anonymous> <style>
    .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
  </style> <link href="stylesheets/screen-01f8d5f2.css" rel=stylesheet media=screen /> <link href="stylesheets/print-4876f390.css" rel=stylesheet media=print /> <script src="javascripts/all-6f36d64b.js"></script> </head> <body class=api-v1-enterprise-ID data-languages="[&quot;java&quot;,&quot;csharp&quot;,&quot;php&quot;,&quot;python&quot;]"> <div id=loader-wrapper> <div id=loader></div> </div> <a href="#" id=nav-button> <span> NAV <img src="images/navbar-cad8cdcb.png" alt=Navbar /> </span> </a> <div class=toc-wrapper> <div class=LogoPos> <a href="https://nicepay.co.id/"><img src="images/nicepay-ac8e989d.jpg" class=logo alt=Nicepay /></a> </div> <div class=menuB> <a class="toc-h2 toc-link" href="./index.html">Beranda</a> <a class="toc-h2 toc-link" href='api-v1-enterprise-EN.html'>English</a> <br> <span><a style="color: #00B5AD; font-size: 16px;" class="toc-h1 toc-link">Our APIs</a></span> <span><a class="toc-h2 toc-link" href="./api-v1-professional-ID.html">API V1 Professional</a></span> <span><a class="toc-h2 toc-link" href="./api-v2-ID.html">API V2</a></span> </div> <div class=lang-selector> <a href="#" data-language-name=java>java</a> <a href="#" data-language-name=csharp>csharp</a> <a href="#" data-language-name=php>php</a> <a href="#" data-language-name=python>python</a> </div> <div class=search> <input class=search id=input-search placeholder=Search> </div> <ul class=search-results></ul> <div class=toc-list-h1> <li><h3 style="color: #00B5AD" class="toc-h1 toc-link">Content</h3></li> </div> <div id=toc class=toc-list-h1> <li> <a href="#under-construction" class="toc-h1 toc-link" data-title="Under Construction">Under Construction</a> </li> <li> <a href="#enterprise-credit-card" class="toc-h1 toc-link" data-title=Enterprise>Enterprise</a> <ul class=toc-list-h2> <li> <a href="#credit-card-flow" class="toc-h2 toc-link" data-title="Credit Card Flow">Credit Card Flow</a> </li> <li> <a href="#request-token" class="toc-h2 toc-link" data-title="Request Token">Request Token</a> </li> <li> <a href="#3ds-request" class="toc-h2 toc-link" data-title="3DS Request">3DS Request</a> </li> <li> <a href="#migs-request" class="toc-h2 toc-link" data-title="MIGS Request">MIGS Request</a> </li> <li> <a href="#registrasi-kartu-kredit" class="toc-h2 toc-link" data-title="Registrasi Kartu Kredit">Registrasi Kartu Kredit</a> </li> </ul> </li> <li> <a href="#enterprise-virtual-account" class="toc-h1 toc-link" data-title=Enterprise>Enterprise</a> <ul class=toc-list-h2> <li> <a href="#va-flow" class="toc-h2 toc-link" data-title="VA Flow">VA Flow</a> </li> <li> <a href="#registrasi-va" class="toc-h2 toc-link" data-title="Registrasi VA">Registrasi VA</a> </li> </ul> </li> <li> <a href="#enterprise-convenience-store" class="toc-h1 toc-link" data-title=Enterprise>Enterprise</a> <ul class=toc-list-h2> <li> <a href="#cvs-flow" class="toc-h2 toc-link" data-title="CVS Flow">CVS Flow</a> </li> <li> <a href="#registrasi-cvs" class="toc-h2 toc-link" data-title="Registrasi CVS">Registrasi CVS</a> </li> </ul> </li> <li> <a href="#enterprise-clickpay" class="toc-h1 toc-link" data-title=Enterprise>Enterprise</a> <ul class=toc-list-h2> <li> <a href="#clickpay-flow" class="toc-h2 toc-link" data-title="ClickPay Flow">ClickPay Flow</a> </li> <li> <a href="#registrasi-klikpay" class="toc-h2 toc-link" data-title="Registrasi KlikPay">Registrasi KlikPay</a> </li> </ul> </li> <li> <a href="#enterprise-e-wallet" class="toc-h1 toc-link" data-title=Enterprise>Enterprise</a> <ul class=toc-list-h2> <li> <a href="#registrasi-e-wallet" class="toc-h2 toc-link" data-title="Registrasi E-Wallet">Registrasi E-Wallet</a> </li> </ul> </li> <li> <a href="#cek-status-transaksi" class="toc-h1 toc-link" data-title="Cek status Transaksi">Cek status Transaksi</a> </li> <li> <a href="#membatalkan-transaksi" class="toc-h1 toc-link" data-title="Membatalkan Transaksi">Membatalkan Transaksi</a> </li> <li> <a href="#notification" class="toc-h1 toc-link" data-title=Notification>Notification</a> <ul class=toc-list-h2> <li> <a href="#notification-parameter" class="toc-h2 toc-link" data-title="Notification Parameter">Notification Parameter</a> </li> </ul> </li> <li> <a href="#nicepay-code" class="toc-h1 toc-link" data-title="Nicepay Code">Nicepay Code</a> <ul class=toc-list-h2> <li> <a href="#field-type" class="toc-h2 toc-link" data-title="Field Type">Field Type</a> </li> <li> <a href="#installment-type" class="toc-h2 toc-link" data-title="Installment Type">Installment Type</a> </li> <li> <a href="#payment-method" class="toc-h2 toc-link" data-title="Payment Method">Payment Method</a> </li> <li> <a href="#payment-status-code" class="toc-h2 toc-link" data-title="Payment Status Code">Payment Status Code</a> </li> <li> <a href="#notification-status-code" class="toc-h2 toc-link" data-title="Notification Status Code">Notification Status Code</a> </li> <li> <a href="#notification-match-amount-indicator" class="toc-h2 toc-link" data-title="Notification Match Amount Indicator">Notification Match Amount Indicator</a> </li> <li> <a href="#cancel-type" class="toc-h2 toc-link" data-title="Cancel Type">Cancel Type</a> </li> <li> <a href="#bank-code" class="toc-h2 toc-link" data-title="Bank Code">Bank Code</a> </li> <li> <a href="#mitra-code" class="toc-h2 toc-link" data-title="Mitra Code">Mitra Code</a> </li> <li> <a href="#error-code" class="toc-h2 toc-link" data-title="Error Code">Error Code</a> </li> <li> <a href="#cimb-error-code" class="toc-h2 toc-link" data-title="CIMB Error Code">CIMB Error Code</a> </li> </ul> </li> <li> <a href="#inquiry" class="toc-h1 toc-link" data-title=Inquiry>Inquiry</a> </li> <li> <a href="#f-a-q" class="toc-h1 toc-link" data-title="F.A.Q">F.A.Q</a> </li> <br> </div> <ul class=toc-footer> <li><li><a href='http://nicepay.co.id/'>Sign Up</a></li></li> <li><li><a href="mailto:it@nicepay.co.id?Subject=Hello%20Nicepay!" target=_top>Contact Us</a></li></li> <li><a href="http://template.nicepay.co.id" target=_blank class=en>Payment Instruction Templates</a></li> </ul> </div> <div class=page-wrapper> <div class=dark-box></div> <div class=content> <h1 id=under-construction>Under Construction</h1><pre class="highlight json tab-json"><code><span class="w">












 </span><span class="err">_</span><span class="w">   </span><span class="err">_</span><span class="w"> </span><span class="err">_</span><span class="w">   </span><span class="err">_</span><span class="w"> </span><span class="err">____</span><span class="w">  </span><span class="err">_____</span><span class="w"> </span><span class="err">____</span><span class="w">     </span><span class="err">____</span><span class="w"> </span><span class="err">___</span><span class="w">  </span><span class="err">_</span><span class="w">   </span><span class="err">_</span><span class="w"> </span><span class="err">____</span><span class="w"> </span><span class="err">_____</span><span class="w"> </span><span class="err">____</span><span class="w">  </span><span class="err">_</span><span class="w">   </span><span class="err">_</span><span class="w">  </span><span class="err">____</span><span class="w"> </span><span class="err">_____</span><span class="w"> </span><span class="err">___</span><span class="w"> </span><span class="err">___</span><span class="w">  </span><span class="err">_</span><span class="w">   </span><span class="err">_</span><span class="w"> 
</span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w">  </span><span class="err">_</span><span class="w"> </span><span class="err">\|</span><span class="w"> </span><span class="err">____|</span><span class="w">  </span><span class="err">_</span><span class="w"> </span><span class="err">\</span><span class="w">   </span><span class="err">/</span><span class="w"> </span><span class="err">___/</span><span class="w"> </span><span class="err">_</span><span class="w"> </span><span class="err">\|</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="err">___|_</span><span class="w">   </span><span class="err">_|</span><span class="w">  </span><span class="err">_</span><span class="w"> </span><span class="err">\|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|/</span><span class="w"> </span><span class="err">___|_</span><span class="w">   </span><span class="err">_|_</span><span class="w"> </span><span class="err">_/</span><span class="w"> </span><span class="err">_</span><span class="w"> </span><span class="err">\|</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w">
</span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w">  </span><span class="err">\|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w">  </span><span class="err">_|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|_)</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w">  </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w">  </span><span class="err">\|</span><span class="w"> </span><span class="err">\___</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|_)</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w">     </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w">  </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w">  </span><span class="err">\|</span><span class="w"> </span><span class="err">|</span><span class="w">
</span><span class="err">|</span><span class="w"> </span><span class="err">|_|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|\</span><span class="w">  </span><span class="err">|</span><span class="w"> </span><span class="err">|_|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|___|</span><span class="w">  </span><span class="err">_</span><span class="w"> </span><span class="err">&lt;</span><span class="w">  </span><span class="err">|</span><span class="w"> </span><span class="err">|__|</span><span class="w"> </span><span class="err">|_|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|\</span><span class="w">  </span><span class="err">|___)</span><span class="w"> </span><span class="err">||</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w">  </span><span class="err">_</span><span class="w"> </span><span class="err">&lt;|</span><span class="w"> </span><span class="err">|_|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|___</span><span class="w">  </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w">  </span><span class="err">|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|_|</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">|\</span><span class="w">  </span><span class="err">|</span><span class="w">
 </span><span class="err">\___/|_|</span><span class="w"> </span><span class="err">\_|____/|_____|_|</span><span class="w"> </span><span class="err">\_\</span><span class="w">  </span><span class="err">\____\___/|_|</span><span class="w"> </span><span class="err">\_|____/</span><span class="w"> </span><span class="err">|_|</span><span class="w"> </span><span class="err">|_|</span><span class="w"> </span><span class="err">\_\\___/</span><span class="w"> </span><span class="err">\____|</span><span class="w"> </span><span class="err">|_|</span><span class="w"> </span><span class="err">|___\___/|_|</span><span class="w"> </span><span class="err">\_|</span><span class="w">





















</span></code></pre> <p>. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</p> <h1 id=enterprise-credit-card>Enterprise - Credit Card</h1> <p>Integration Step : <ol type=1> <li>Merchant meminta Token <li>Merchant meminta 3DS Secure / MIGS Secure <li>Customer input OTP <li>Merchant meminta OnePass (Registrasi) <li>NICEPay mengirim notifikasi <li>Merchant menangani notifikasi </ol></p> <h2 id=credit-card-flow>Credit Card Flow</h2> <p>Flow untuk Enterprise - Credit Card <img src="images/ent-cc-flow-2d66f86d.png"></p> <h2 id=request-token>Request Token</h2><pre class="highlight java tab-java"><code><span class="c1">// Payment Mandatory Field</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setCardNo</span><span class="o">(</span><span class="s">"5409123456789123"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setCardExpYymm</span><span class="o">(</span><span class="s">"2012"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setAmt</span> <span class="o">(</span><span class="s">"10000"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setReferenceNo</span> <span class="o">(</span><span class="s">"ABC123"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setMerchantToken</span><span class="o">(</span><span class="n">nicePay</span><span class="o">.</span><span class="na">makeToken</span><span class="o">(</span><span class="n">nicePay</span><span class="o">.</span><span class="na">getAmt</span><span class="o">(),</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">getReferenceNo</span><span class="o">()));</span>

<span class="c1">// Payment Request</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">transactionToken</span><span class="o">();</span>

<span class="c1">// Payment Response</span>
<span class="n">String</span> <span class="n">responseString</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">getResponseString</span><span class="o">());</span> <span class="c1">// JSON in String format</span>
<span class="n">Hashtable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">HTResponse</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">getHtResponse</span><span class="o">();</span> <span class="c1">// JSON in HashTable&lt;String, String&gt; format</span>
<span class="mi">16</span><span class="o">.</span>
<span class="n">String</span> <span class="n">resultCd</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"resultCd"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">resultMsg</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"resultMsg"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">cardToken</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"cardToken"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">paymentType</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"paymentType"</span><span class="o">);</span>
</code></pre> <blockquote> <p>Sample POST</p> </blockquote> <pre class="highlight plaintext"><code>api/onePassToken.do?jsonData={"iMid":"IONPAYTEST","referenceNo":"OrdNo20160525000-52104","amt":"1000","cardNo":"1234567890123456","cardExpYymm":"1612","merchantToken":"141fd2368aa80ea0e600b1b4d7a42c1e731e74a27a03521e8e28150cc00bc05b"}
</code></pre> <blockquote> <p>Contoh JSON response</p> </blockquote> <pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"resultCd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cardToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ed5ce66bf69926c52cfa237c56fb38601f7c08985d385e615971a268b510db75"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"resultMsg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"paymentType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre> <blockquote> <aside class=success>Mohon periksa nilai <strong>paymentType</strong> dari <strong>Respon JSON</strong>, ini untuk menentukan langkah selanjutnya apakan akan menggunakan <strong>3DS Request</strong> atau <strong>MIGS Request</strong> atau langsung <strong>Credit Card Registration</strong>.</aside> <table><thead> <tr> <th>Code</th> <th>Deskripsi.</th> </tr> </thead><tbody> <tr> <td>1</td> <td>3D Secure</td> </tr> <tr> <td>2</td> <td>KeyIn (process to CC Registration)</td> </tr> <tr> <td>3</td> <td>MIGS Request</td> </tr> </tbody></table> </blockquote> <p>Merchant perlu meminta token untuk setiap transaksi <strong>Kartu Kredit</strong> yang mengunakan NICEPay Enterprise.<br> Setiap satu transaksi, membutuhkan satu token.</p> <table><thead> <tr> <th>&nbsp;</th> <th>&nbsp;</th> </tr> </thead><tbody> <tr> <td><strong>API url</strong></td> <td><strong>/nicepay/api/onePassToken.do</strong></td> </tr> <tr> <td>Metode</td> <td>POST</td> </tr> <tr> <td>Description</td> <td>Meminta Token Kartu Kredit</td> </tr> <tr> <td>Merchant Token</td> <td>SHA256 (Merchant ID + Reference Number + Amount + Merchant Key)</td> </tr> </tbody></table> <p><br><strong>Parameter Request Object</strong></p> <table><thead> <tr> <th>Parameter</th> <th>Mandatory</th> <th>Tipe</th> <th>Ukuran</th> <th>Deskripsi</th> <th>Contoh Data</th> </tr> </thead><tbody> <tr> <td>iMid</td> <td>Y</td> <td>AN</td> <td>10</td> <td>Merchant ID</td> <td>IONPAYTEST</td> </tr> <tr> <td>merchantToken</td> <td>Y</td> <td>AN</td> <td>255</td> <td>Merchant Token</td> <td>c69fd0a2e36fb9d97fc8418f6b22699143a1177e570769dac2cf4d2008558946</td> </tr> <tr> <td>cardNo</td> <td>Y</td> <td>N</td> <td>&nbsp;</td> <td>Card number</td> <td>5409123456789123</td> </tr> <tr> <td>cardExpYYmm</td> <td>Y</td> <td>N</td> <td>4</td> <td>Card expiry (YYMM)</td> <td>2012</td> </tr> <tr> <td>cardHolderNm</td> <td>Y (CIMB)</td> <td>AN</td> <td>50</td> <td>Card holder name</td> <td></td> </tr> <tr> <td>amt</td> <td>Y</td> <td>N</td> <td>12</td> <td>Payment amount</td> <td>10000</td> </tr> <tr> <td>referenceNo</td> <td>Y</td> <td>ANS</td> <td>40</td> <td>Merchant Order Number</td> <td>ABC123</td> </tr> <tr> <td>instmntType</td> <td>N</td> <td>N</td> <td>2</td> <td>Installment Type. Refer Code at <a href="#installment-type">Here</a></td> <td>1</td> </tr> <tr> <td>instmntMon</td> <td>N</td> <td>N</td> <td>2</td> <td>Installment month</td> <td>1</td> </tr> </tbody></table> <p><br><strong>Response Json Object</strong></p> <table><thead> <tr> <th>Parameter</th> <th>Tipe</th> <th>Ukuran</th> <th>Deskripsi</th> </tr> </thead><tbody> <tr> <td>resultCd</td> <td>N</td> <td>4</td> <td>result code</td> </tr> <tr> <td>resultMsg</td> <td>AN</td> <td>255</td> <td>result message</td> </tr> <tr> <td>cardToken</td> <td>AN</td> <td>64</td> <td>one time use transaction token</td> </tr> <tr> <td>paymentType</td> <td>N</td> <td>1</td> <td>CC Authorization type</td> </tr> </tbody></table> <h2 id=3ds-request>3DS Request</h2> <blockquote> <p>Contoh URL Parameter 3DS Request</p> </blockquote> <pre class="highlight plaintext"><code>https://www.nicepay.co.id/nicepay/api/secureVeRequest.do?country=360&amp;callbackUrl={callbackUrl}&amp;onePassToken={onePassToken}
</code></pre> <blockquote> <p>Contoh URL Parameter 3DS Response</p> </blockquote> <pre class="highlight plaintext"><code>http://merchant.com/callbackUrl?resultCd={resultCd}&amp;resultMsg={resultMsg}&amp;referenceNo={referenceNo}&amp;merchantToken={merchantToken}
</code></pre> <p>Gunakan API ini saat anda mendapat respon <strong>paymentType=&#39;1&#39;</strong> setelah proses <strong>Request Token</strong> integration Step: <ol type=1> <li>Kirim parameter termasuk URL. <li>Halaman Popup akan redirect ke Halaman 3DS Bank <li>Customer akan input OTP <li>NICEPay akan mengirim respon parameter ke callbackUrl </ol></p> <table><thead> <tr> <th>&nbsp;</th> <th>&nbsp;</th> </tr> </thead><tbody> <tr> <td><strong>API url</strong></td> <td><strong>/nicepay/api/secureVeRequest.do</strong></td> </tr> <tr> <td>Metode</td> <td>Popup Page</td> </tr> <tr> <td>Description</td> <td>proses selanjutnya untuk onePassToken.do ketika mendapat respon paymentType=&#39;1&#39;</td> </tr> </tbody></table> <p><br><strong>Request Parameter URL</strong></p> <table><thead> <tr> <th>Parameter</th> <th>Mandatory</th> <th>Tipe</th> <th>Ukuran</th> <th>Deskripsi</th> <th>Contoh Data</th> </tr> </thead><tbody> <tr> <td>country</td> <td>Y</td> <td>N</td> <td>3</td> <td>Currency code</td> <td>360</td> </tr> <tr> <td>callbackUrl</td> <td>Y</td> <td>AN</td> <td>200</td> <td>Callback Url for result</td> <td>http://merchant.com/callback</td> </tr> <tr> <td>onePassToken</td> <td>Y</td> <td>AN</td> <td>64</td> <td>one time use transaction token</td> <td>c5bd0b91bcc3d21358cd004c60e54579441c23aa8e7553b41ce3402db1113fff</td> </tr> </tbody></table> <p><br><strong>Response Parameter URL</strong></p> <table><thead> <tr> <th>Parameter</th> <th>Tipe</th> <th>Ukuran</th> <th>Deskripsi</th> </tr> </thead><tbody> <tr> <td>resultCd</td> <td>N</td> <td>4</td> <td>Result code</td> </tr> <tr> <td>resultMsg</td> <td>AN</td> <td>255</td> <td>Result message</td> </tr> <tr> <td>referenceNo</td> <td>ANS</td> <td>40</td> <td>Merchant Order Number</td> </tr> <tr> <td>merchantToken</td> <td>AN</td> <td>255</td> <td>Merchant Token</td> </tr> </tbody></table> <h2 id=migs-request>MIGS Request</h2> <blockquote> <p>Contoh URL Parameter 3DS Request</p> </blockquote> <pre class="highlight plaintext"><code>https://www.nicepay.co.id/nicepay/api/migsRequest.do?instmntType=1&amp;instmntMon=1&amp;referenceNo={referenceNo}&amp;cardCvv={cardCvv}&amp;callbackUrl={callbackUrl}&amp;onePassToken={onePassToken}
</code></pre> <blockquote> <p>Contoh URL Parameter 3DS Response</p> </blockquote> <pre class="highlight plaintext"><code>http://merchant.com/callbackUrl?resultCd={resultCd}&amp;resultMsg={resultMsg}
</code></pre> <p>Gunakan API ini saat anda menerima respon <strong>paymentType=&#39;3&#39;</strong> setelah proses untuk <strong>Request Token</strong> integration Step: <ol type=1> <li>Kirim parameter termasuk URL <li>Halaman Popup akan redirect ke Halaman MIGS Bank <li>Customer akan input OTP <li>NICEPay akan mengirim respon parameter ke callbackUrl </ol></p> <table><thead> <tr> <th>&nbsp;</th> <th>&nbsp;</th> </tr> </thead><tbody> <tr> <td><strong>API url</strong></td> <td><strong>/nicepay/api/migsRequest.do</strong></td> </tr> <tr> <td>Metode</td> <td>Popup Page</td> </tr> <tr> <td>Deskripsi</td> <td>Proses selanjutnya untuk onePassToken.do ketika mendapat respon paymentType=&#39;3&#39;</td> </tr> </tbody></table> <p><br><strong>Request Parameter URL</strong></p> <table><thead> <tr> <th>Parameter</th> <th>Mandatory</th> <th>Tipe</th> <th>Ukuran</th> <th>Deskripsi</th> <th>Contoh Data</th> </tr> </thead><tbody> <tr> <td>instmntType</td> <td>N</td> <td>N</td> <td>2</td> <td>Installment Type . Refer Code at <a href="#installment-type">Here</a></td> <td>1</td> </tr> <tr> <td>instmntMon</td> <td>N</td> <td>N</td> <td>2</td> <td>Installment Month</td> <td>12</td> </tr> <tr> <td>referenceNo</td> <td>Y</td> <td>ANS</td> <td>40</td> <td>Merchant Order Number</td> <td>ref12345</td> </tr> <tr> <td>cardCvv</td> <td>N</td> <td>N</td> <td>3</td> <td>Card CVV</td> <td>123</td> </tr> <tr> <td>callbackUrl</td> <td>Y</td> <td>AN</td> <td>200</td> <td>Callback Url for result</td> <td>http://merchant.com</td> </tr> <tr> <td>onePassToken</td> <td>Y</td> <td>AN</td> <td>64</td> <td>one time use transaction token</td> <td>c5bd0b91bcc3d21358cd004c60e54579441c23aa8e7553b41ce3402db1113fff</td> </tr> </tbody></table> <p><br><strong>Response Parameter URL</strong></p> <table><thead> <tr> <th>Parameter</th> <th>Tipe</th> <th>Ukuran</th> <th>Deskripsi</th> </tr> </thead><tbody> <tr> <td>resultCd</td> <td>N</td> <td>4</td> <td>Result code</td> </tr> <tr> <td>resultMsg</td> <td>AN</td> <td>255</td> <td>Result message</td> </tr> </tbody></table> <h2 id=registrasi-kartu-kredit>Registrasi Kartu Kredit</h2><pre class="highlight java tab-java"><code><span class="c1">// Payment Mandatory Field</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setPayMethod</span><span class="o">(</span><span class="s">"01"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"IDR"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setAmt</span><span class="o">(</span><span class="s">"1000"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setInstmntMon</span><span class="o">(</span><span class="s">"1"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setReferenceNo</span><span class="o">(</span><span class="s">"MerchantReferenceNumber001"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setGoodsNm</span><span class="o">(</span><span class="s">"Merchant Goods 1"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingNm</span><span class="o">(</span><span class="s">"Buyer Name"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingEmail</span><span class="o">(</span><span class="s">"buyer@merchant.com"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingPhone</span><span class="o">(</span><span class="s">"02112345678"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingAddr</span><span class="o">(</span><span class="s">"Billing Address"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Jakarta"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"Jakarta"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingPostCd</span><span class="o">(</span><span class="s">"12345"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"Indonesia"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryNm</span><span class="o">(</span><span class="s">"Buyer Name "</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryPhone</span><span class="o">(</span><span class="s">"02112345678"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryAddr</span><span class="o">(</span><span class="s">"Billing Address "</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryCity</span><span class="o">(</span><span class="s">"Jakarta "</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryState</span><span class="o">(</span><span class="s">"Jakarta "</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryPostCd</span><span class="o">(</span><span class="s">"12345"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryCountry</span><span class="o">(</span><span class="s">"Indonesia "</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setCallBackUrl</span><span class="o">(</span><span class="n">merchantDomain</span> <span class="o">+</span> <span class="s">"callback"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDbProcessUrl</span><span class="o">(</span><span class="n">merchantDomain</span> <span class="o">+</span> <span class="s">"dbprocess"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setVat</span><span class="o">(</span><span class="s">"0"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setFee</span><span class="o">(</span><span class="s">"0"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setNotaxAmt</span><span class="o">(</span><span class="s">"0"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDescription</span><span class="o">(</span><span class="s">"Description"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setUserIP</span><span class="o">(</span><span class="s">"127.0.0.1"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setMerchantToken</span><span class="o">(</span><span class="n">nicePay</span><span class="o">.</span><span class="na">makeToken</span><span class="o">(</span><span class="n">nicePay</span><span class="o">.</span><span class="na">getAmt</span><span class="o">(),</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">getReferenceNo</span><span class="o">()));</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setCartData</span><span class="o">(</span><span class="s">"{}"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setInstmntMon</span><span class="o">(</span><span class="s">"1"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setInstmntType</span><span class="o">(</span><span class="s">"1"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setRecurrOpt</span><span class="o">(</span><span class="err">“</span><span class="mi">0</span><span class="err">”</span><span class="o">);</span> <span class="c1">// for Recurring</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setCardCvv</span><span class="o">(</span><span class="s">"123"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setOnePassToken</span><span class="o">(</span><span class="s">"9338d54573688ae18e175240b0257de48d89c6ef1c9c7b5c094dc4beed9e435f"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setCardExpYymm</span><span class="o">(</span><span class="s">"2012"</span><span class="o">)</span>

<span class="c1">// Payment Optional Field</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setReqDt</span><span class="o">(</span><span class="s">"20160301"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setReqTm</span><span class="o">(</span><span class="s">"135959"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setReqDomain</span><span class="o">(</span><span class="s">"merchant.com"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setReqServerIP</span><span class="o">(</span><span class="s">"127.0.0.1"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setReqClientVer</span><span class="o">(</span><span class="s">"1.0"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setUserSessionID</span><span class="o">(</span><span class="s">"userSessionID"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setUserAgent</span><span class="o">(</span><span class="s">"Mozilla"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setUserLanguage</span><span class="o">(</span><span class="s">"en-US"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setMerFixAcctId</span><span class="o">(</span><span class="s">"9999000000000001"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setPaymentExpiryDt</span><span class="o">(</span><span class="s">"20160303"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setPaymentExpiryTm</span><span class="o">(</span><span class="s">"135959"</span><span class="o">);</span>

<span class="c1">// Payment Request</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">payment</span><span class="o">();</span>

<span class="c1">// Payment Response</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response String : "</span> <span class="o">+</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">getResponseString</span><span class="o">());</span> <span class="c1">// JSON in String format</span>

<span class="n">String</span> <span class="n">resultCd</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"resultCd"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">resultMsg</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"resultMsg"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">tXid</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"tXid "</span><span class="o">);</span>
<span class="n">String</span> <span class="n">referenceNo</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"referenceNo"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">authNo</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"authNo"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">payMethod</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"payMethod"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">amount</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"amount"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">transDt</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"transDt "</span><span class="o">);</span>
<span class="n">String</span> <span class="n">transTm</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"transTm "</span><span class="o">);</span>
<span class="n">String</span> <span class="n">description</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"description"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">callbackUrl</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"callbackUrl"</span><span class="o">);</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">protected</span> <span class="k">void</span> <span class="nf">CheckOutCC</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(!</span><span class="kt">string</span><span class="p">.</span><span class="nf">IsNullOrEmpty</span><span class="p">(</span><span class="n">TbillingNm</span><span class="p">.</span><span class="n">Text</span><span class="p">)</span> <span class="p">&amp;&amp;</span> <span class="p">!</span><span class="kt">string</span><span class="p">.</span><span class="nf">IsNullOrEmpty</span><span class="p">(</span><span class="n">onePassToken</span><span class="p">.</span><span class="n">Text</span><span class="p">)</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">currency</span> <span class="p">=</span> <span class="s">"IDR"</span><span class="p">;</span>
        <span class="c1">//Populate Mandatory parameters to send</span>
        <span class="c1">// payment type</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">PayMethod</span> <span class="p">=</span> <span class="s">"01"</span><span class="p">;</span>
        <span class="c1">// Total gross amount</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">amt</span> <span class="p">=</span> <span class="s">"100"</span><span class="p">;</span>
        <span class="c1">// Invoice Number or Referenc Number Generated by merchant</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">referenceNo</span> <span class="p">=</span> <span class="nf">generateReference</span><span class="p">();</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">description</span> <span class="p">=</span> <span class="s">"Payment Invoice No. "</span> <span class="p">+</span> <span class="n">objNicepay</span><span class="p">.</span><span class="n">referenceNo</span><span class="p">;</span>
        <span class="c1">// Transaction description</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingNm</span> <span class="p">=</span> <span class="s">"Donald Duck"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingPhone</span> <span class="p">=</span> <span class="s">"021987456321"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingEmail</span> <span class="p">=</span> <span class="s">"donald@duck.com"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingAddr</span> <span class="p">=</span> <span class="s">"King of money street"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingCity</span> <span class="p">=</span> <span class="s">"King"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingState</span> <span class="p">=</span> <span class="s">"Money"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingPostCd</span> <span class="p">=</span> <span class="s">"123654"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingCountry</span> <span class="p">=</span> <span class="s">"Indonesia"</span><span class="p">;</span>

        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryNm</span> <span class="p">=</span> <span class="s">"Donald Duck"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryPhone</span> <span class="p">=</span> <span class="s">"021987456321"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryEmail</span> <span class="p">=</span> <span class="s">"donald@duck.com"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryAddr</span> <span class="p">=</span> <span class="s">"King of money street"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryCity</span> <span class="p">=</span> <span class="s">"King"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryState</span> <span class="p">=</span> <span class="s">"Money"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryPostCd</span> <span class="p">=</span> <span class="s">"123654"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryCountry</span> <span class="p">=</span> <span class="s">"Indonesia"</span><span class="p">;</span>

        <span class="n">objNicepay</span><span class="p">.</span><span class="n">onePassToken</span> <span class="p">=</span> <span class="n">onePassToken</span><span class="p">.</span><span class="n">Text</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">cardExpYymm</span> <span class="p">=</span> <span class="n">TcardExpYymm</span><span class="p">.</span><span class="n">Text</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">cardCvv</span> <span class="p">=</span> <span class="n">TcardCvv</span><span class="p">.</span><span class="n">Text</span><span class="p">;</span>

        <span class="n">objResult</span> <span class="p">=</span> <span class="n">objNicepayClass</span><span class="p">.</span><span class="nf">ChargeCard</span><span class="p">(</span><span class="n">objNicepay</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(!</span><span class="kt">string</span><span class="p">.</span><span class="nf">IsNullOrEmpty</span><span class="p">(</span><span class="n">objResult</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">resultCd</span><span class="p">)</span> <span class="p">&amp;</span> <span class="n">objResult</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">resultCd</span> <span class="p">==</span> <span class="s">"0000"</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Tresult</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">resultCd</span><span class="p">;</span>
            <span class="n">TtXid</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">tXid</span><span class="p">;</span>
            <span class="n">TcallbackUrl</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">callbackUrl</span><span class="p">;</span>
            <span class="n">Tdescription</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">description</span><span class="p">;</span>
            <span class="n">TreferenceNo</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">referenceNo</span><span class="p">;</span>
            <span class="n">TpayMethod</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">payMethod</span><span class="p">;</span>
            <span class="c1">//YYMMDD</span>
            <span class="n">TtransDT</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">transDt</span><span class="p">;</span>
            <span class="c1">//HH24MISS</span>
            <span class="n">TTranstm</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">transTm</span><span class="p">;</span>
            <span class="n">TresultMsg</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">resultMsg</span><span class="p">;</span>
            <span class="n">wrapper</span><span class="p">.</span><span class="n">Visible</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="n">Myresult</span><span class="p">.</span><span class="n">Visible</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">objResult</span><span class="p">.</span><span class="n">resultCd</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">EresultCd</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">resultCd</span><span class="p">;</span>
            <span class="n">EresultMsg</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">resultMsg</span><span class="p">;</span>
            <span class="n">wrapper</span><span class="p">.</span><span class="n">Visible</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="n">ErrData</span><span class="p">.</span><span class="n">Visible</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="c1">//Timeout, you can redirect back to checkout page Or echo error message.</span>
            <span class="c1">//In this sample, we echo error message</span>
            <span class="n">ERR_</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="s">"Connection Timeout. Please Try again."</span><span class="p">;</span>
            <span class="n">wrapper</span><span class="p">.</span><span class="n">Visible</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="n">ERR</span><span class="p">.</span><span class="n">Visible</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="c1">// Include Config File
</span><span class="k">include_once</span> <span class="s2">"lib/NicepayLib.php"</span><span class="p">;</span>
<span class="nv">$nicepay</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NicepayLib</span><span class="p">();</span>

<span class="k">function</span> <span class="nf">generateReference</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$micro_date</span> <span class="o">=</span> <span class="nb">microtime</span><span class="p">();</span>
    <span class="nv">$date_array</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s2">" "</span><span class="p">,</span><span class="nv">$micro_date</span><span class="p">);</span>
    <span class="nv">$date</span> <span class="o">=</span> <span class="nb">date</span><span class="p">(</span><span class="s2">"YmdHis"</span><span class="p">,</span><span class="nv">$date_array</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="nv">$date_array</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">preg_replace</span><span class="p">(</span><span class="s1">'/[^\p{L}\p{N}\s]/u'</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="nv">$date_array</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="k">return</span> <span class="s2">"Ref"</span><span class="o">.</span><span class="nv">$date</span><span class="o">.</span><span class="nv">$date_array</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="nb">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">999</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">if</span><span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'payMethod'</span><span class="p">])</span>
    <span class="o">&amp;&amp;</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'payMethod'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'01'</span>
    <span class="o">&amp;&amp;</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'billingNm'</span><span class="p">])</span>
    <span class="o">&amp;&amp;</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'billingNm'</span><span class="p">]</span>
    <span class="o">&amp;&amp;</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'onePassToken'</span><span class="p">])</span>
    <span class="o">&amp;&amp;</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'onePassToken'</span><span class="p">]</span>
  <span class="p">)</span>
<span class="p">{</span>
  <span class="nv">$billingNm</span>      <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'billingNm'</span><span class="p">];</span>
  <span class="nv">$onePassToken</span>   <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'onePassToken'</span><span class="p">];</span>
  <span class="nv">$cardExpYymm</span>    <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'cardExpYymm'</span><span class="p">];</span>
  <span class="nv">$cardCvv</span>        <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'cardCvv'</span><span class="p">];</span>
  <span class="nv">$referenceNo</span>    <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'referenceNo'</span><span class="p">];</span>

  <span class="c1">// Populate Mandatory parameters to send
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'payMethod'</span><span class="p">,</span> <span class="s1">'01'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'currency'</span><span class="p">,</span> <span class="s1">'IDR'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'amt'</span><span class="p">,</span> <span class="mi">10000</span><span class="p">);</span> <span class="c1">// Total gross amount
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'referenceNo'</span><span class="p">,</span> <span class="nv">$referenceNo</span><span class="p">);</span> <span class="c1">// Invoice Number or Reference Number Generated by merchant
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'description'</span><span class="p">,</span> <span class="s1">'Payment of Invoice No '</span><span class="o">.</span><span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'referenceNo'</span><span class="p">));</span> <span class="c1">// Transaction description
</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingNm'</span><span class="p">,</span> <span class="s1">'John Doe'</span><span class="p">);</span> <span class="c1">// Customer name
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingPhone'</span><span class="p">,</span> <span class="s1">'02112345678'</span><span class="p">);</span> <span class="c1">// Customer phone number
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingEmail'</span><span class="p">,</span> <span class="s1">'john@example.com'</span><span class="p">);</span> <span class="c1">//
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingAddr'</span><span class="p">,</span> <span class="s1">'Jl. Jend. Sudirman No. 28'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingCity'</span><span class="p">,</span> <span class="s1">'Jakarta Pusat'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingState'</span><span class="p">,</span> <span class="s1">'DKI Jakarta'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingPostCd'</span><span class="p">,</span> <span class="s1">'10210'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingCountry'</span><span class="p">,</span> <span class="s1">'Indonesia'</span><span class="p">);</span>

  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryNm'</span><span class="p">,</span> <span class="s1">'John Doe'</span><span class="p">);</span> <span class="c1">// Delivery name
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryPhone'</span><span class="p">,</span> <span class="s1">'02112345678'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryEmail'</span><span class="p">,</span> <span class="s1">'john@example.com'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryAddr'</span><span class="p">,</span> <span class="s1">'Jl. Jend. Sudirman No. 28'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryCity'</span><span class="p">,</span> <span class="s1">'Jakarta Pusat'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryState'</span><span class="p">,</span> <span class="s1">'DKI Jakarta'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryPostCd'</span><span class="p">,</span> <span class="s1">'10210'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryCountry'</span><span class="p">,</span> <span class="s1">'Indonesia'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'onePassToken'</span><span class="p">,</span> <span class="nv">$onePassToken</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'cardExpYymm'</span><span class="p">,</span> <span class="nv">$cardExpYymm</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'cardCvv'</span><span class="p">,</span> <span class="nv">$cardCvv</span><span class="p">);</span>

  <span class="c1">// Send Data
</span>  <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">chargeCard</span><span class="p">();</span>

  <span class="c1">// Response from NICEPAY
</span>  <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">resultCd</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">resultCd</span> <span class="o">==</span> <span class="s2">"0000"</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"tXid              : </span><span class="nv">$response-&gt;tXid</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"callbackUrl       : </span><span class="nv">$response-&gt;callbackUrl</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"description       : </span><span class="nv">$response-&gt;description</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"payment date      : </span><span class="nv">$response-&gt;transDt</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span> <span class="c1">// YYYYMMDD
</span>    <span class="k">echo</span> <span class="s2">"payment time      : </span><span class="nv">$response-&gt;transTm</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span> <span class="c1">// HH24MISS
</span>    <span class="k">echo</span> <span class="s2">"result code       : </span><span class="nv">$response-&gt;resultCd</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"result message    : </span><span class="nv">$response-&gt;resultMsg</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"reference no      : </span><span class="nv">$response-&gt;referenceNo</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"payment method    : </span><span class="nv">$response-&gt;payMethod</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"recurring token   : </span><span class="nv">$response-&gt;recurringToken</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">elseif</span><span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">resultCd</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// API data not correct or error happened in bank system, you can redirect back to checkout page or echo error message.
</span>    <span class="c1">// In this sample, we echo error message
</span>    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"Oops! Something happened, please notice your system administrator.</span><span class="se">\n\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"result code       : </span><span class="nv">$response-&gt;resultCd</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"result message    : </span><span class="nv">$response-&gt;resultMsg</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// Timeout, you can redirect back to checkout page or echo error message.
</span>    <span class="c1">// In this sample, we echo error message
</span>    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;Connection Timeout. Please Try again.&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">json</span>

<span class="kn">from</span> <span class="nn">nicepay</span> <span class="kn">import</span> <span class="n">NICEPay</span>

<span class="c">#Set MID &amp; Merchant Key</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">iMid</span> <span class="o">=</span> <span class="s">"BMRITEST01"</span> <span class="c">#Set Merchant ID</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">merchantKey</span> <span class="o">=</span> <span class="s">"33F49GnCMS1mFYlGXisbUDzVf2ATWCl9k3R++d5hDd3Frmuos/XLx8XhXpe+LDYAbpGKZYSwtlyyLOtS/8aD7A=="</span> <span class="c">#Set Merchant Key</span>

<span class="c">#Set Mandatory Value</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">payMethod</span> <span class="o">=</span> <span class="s">"01"</span> <span class="c">#Set Payment Method</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">amt</span> <span class="o">=</span> <span class="s">"100"</span> <span class="c">#Total Gross Amount</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">referenceNo</span> <span class="o">=</span> <span class="s">"NiceTest00003"</span> <span class="c">#Invoice Number By Merchant</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">goodsNm</span> <span class="o">=</span> <span class="n">NICEPay</span><span class="o">.</span><span class="n">referenceNo</span> <span class="c">#Goods Name</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingNm</span> <span class="o">=</span> <span class="s">"John Doe"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingPhone</span> <span class="o">=</span> <span class="s">"02112345678"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingEmail</span> <span class="o">=</span> <span class="s">"john@example.co`m"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingAddr</span> <span class="o">=</span> <span class="s">"Jl. Jend. Sudirman No. 28"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingCity</span> <span class="o">=</span> <span class="s">"Jakarta Pusat"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingState</span> <span class="o">=</span> <span class="s">"DKI Jakarta"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingPostCd</span> <span class="o">=</span> <span class="s">"10210"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingCountry</span> <span class="o">=</span> <span class="s">"Indonesia"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">callBackUrl</span> <span class="o">=</span> <span class="s">"http://example.com/callback"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">dbProcessUrl</span> <span class="o">=</span> <span class="s">"https://example.com/notification-handler.php"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s">"Payment Of Ref No."</span> <span class="o">+</span> <span class="n">NICEPay</span><span class="o">.</span><span class="n">referenceNo</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">merchantToken</span> <span class="o">=</span> <span class="n">NICEPay</span><span class="o">.</span><span class="n">getMerchantToken</span><span class="p">()</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">userIP</span> <span class="o">=</span> <span class="n">NICEPay</span><span class="o">.</span><span class="n">getUserIp</span><span class="p">()</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">cartData</span> <span class="o">=</span> <span class="s">"{}"</span> <span class="c">#Json Array Value</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">instmntMon</span> <span class="o">=</span> <span class="s">"1"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">instmntType</span> <span class="o">=</span> <span class="s">"1"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">cardCvv</span> <span class="o">=</span> <span class="s">"321"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">ccOnePassToken</span> <span class="o">=</span> <span class="s">"e76b6b65dbd4a854699ee8628f0cf62916a16216bb133902d75159593fc1ed08"</span>

<span class="c"># // Payment Request</span>
<span class="n">resultData</span> <span class="o">=</span> <span class="n">NICEPay</span><span class="o">.</span><span class="n">apiRequest</span><span class="p">()</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">resultData</span><span class="p">)</span>

<span class="c">#Payment Response String Format</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">result</span><span class="p">[</span><span class="s">'resultCd'</span><span class="p">]</span>
<span class="k">except</span> <span class="nb">NameError</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">"Connection Timeout. Please Try Again!"</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">result</span><span class="p">[</span><span class="s">'resultCd'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'0000'</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"resultCd : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'resultCd'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"resultMsg : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'resultMsg'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"tXid : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'tXid'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"referenceNo : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'referenceNo'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"payMethod : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'payMethod'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"amount : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'amount'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"transDt : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'transDt'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"transTm : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'transTm'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"description : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'description'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"callbackUrl : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'callbackUrl'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"authNo : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'authNo'</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"resultCd : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'resultCd'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"resultMsg : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'resultMsg'</span><span class="p">])</span>
</code></pre> <blockquote> <p>Contoh JSON Response</p> </blockquote> <pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"resultCd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0000"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"authNo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"005911"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"referenceNo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ref20170526111736065300000988"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"transTm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"112041"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"recurringToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tXid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BMRITEST0101201705261120395118"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Payment Of Ref No.Ref20170526111736065300000988"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"cardNo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456******3456"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"resultMsg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"payMethod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"callbackUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.merchant.com/ExampleCallback"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"transDt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20170526"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"issuBankCd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CENA"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"issuBankNm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PT Bank Central Asia, TBK"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"acquBankCd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BMRI"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"acquBankNm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PT Bank Mandiri (Persero)"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre> <table><thead> <tr> <th>&nbsp;</th> <th>&nbsp;</th> </tr> </thead><tbody> <tr> <td><strong>API url</strong></td> <td><strong>/nicepay/api/onePass.do</strong></td> </tr> <tr> <td>Metode</td> <td>POST</td> </tr> <tr> <td>Description</td> <td>Credit Card Transaction</td> </tr> <tr> <td>Merchant Token</td> <td>SHA256 (Merchant ID + Reference Number + Amount + Merchant Key)</td> </tr> </tbody></table> <p><strong>Request POST Parameter</strong></p> <table><thead> <tr> <th>Parameter</th> <th>Mandatory</th> <th>Tipe</th> <th>Ukuran</th> <th>Deskripsi</th> <th>Contoh Data</th> </tr> </thead><tbody> <tr> <td>iMid</td> <td>Y</td> <td>AN</td> <td>10</td> <td>Merchant ID</td> <td>IONPAYTEST</td> </tr> <tr> <td>payMethod</td> <td>Y</td> <td>AN</td> <td>2</td> <td>Pay Method</td> <td>01</td> </tr> <tr> <td>currency</td> <td>Y</td> <td>AN</td> <td>3</td> <td>Currency</td> <td>IDR</td> </tr> <tr> <td>amt</td> <td>Y</td> <td>N</td> <td>12</td> <td>Goods Amount</td> <td>1000</td> </tr> <tr> <td>referenceNo</td> <td>Y</td> <td>ANS</td> <td>40</td> <td>Merchant Order No</td> <td>MerchantReferenceNumber001</td> </tr> <tr> <td>goodsNm</td> <td>Y</td> <td>AN</td> <td>100</td> <td>Goods Name</td> <td>Merchant Goods 1</td> </tr> <tr> <td>billingNm</td> <td>Y</td> <td>A</td> <td>30</td> <td>Billing Name</td> <td>Buyer Name</td> </tr> <tr> <td>billingPhone</td> <td>Y</td> <td>N</td> <td>15</td> <td>Billing Phone Number</td> <td>02112345678</td> </tr> <tr> <td>billingEmail</td> <td>Y</td> <td>AN</td> <td>40</td> <td>Billing Email</td> <td>buyer@merchant.com</td> </tr> <tr> <td>billingCity</td> <td>Y</td> <td>A</td> <td>50</td> <td>Billing City</td> <td>Jakarta</td> </tr> <tr> <td>billingState</td> <td>Y</td> <td>A</td> <td>50</td> <td>Billing State</td> <td>Jakarta</td> </tr> <tr> <td>billingPostCd</td> <td>Y</td> <td>N</td> <td>10</td> <td>Billing Post Number</td> <td>12345</td> </tr> <tr> <td>billingCountry</td> <td>Y</td> <td>A</td> <td>10</td> <td>Billing Country</td> <td>Indonesia</td> </tr> <tr> <td>callBackUrl</td> <td>Y</td> <td>AN</td> <td>255</td> <td>Payment Result Forward Url (On Browser)</td> <td>www.merchant.com/callback</td> </tr> <tr> <td>dbProcessUrl</td> <td>Y</td> <td>AN</td> <td>255</td> <td>Payment Result Receive Url (Server Side)</td> <td>www.merchant.com/dbprocess</td> </tr> <tr> <td>description</td> <td>Y</td> <td>AN</td> <td>100</td> <td>Description</td> <td>Description</td> </tr> <tr> <td>merchantToken</td> <td>Y</td> <td>AN</td> <td>255</td> <td>Merchant Token</td> <td>6cfccfc0046773c1b589d8e98f8b596c284f3c70a4ecf86eba14c18944b74bcd</td> </tr> <tr> <td>userIP</td> <td>Y</td> <td>AN</td> <td>15</td> <td>User IP (Customer)</td> <td>127.0.0.1</td> </tr> <tr> <td>cartData</td> <td>Y</td> <td>AN</td> <td>4000</td> <td>Cart Data (Json Format)</td> <td>{}</td> </tr> <tr> <td>instmntType</td> <td>Y</td> <td>N</td> <td>2</td> <td>Installment Type. Refer Code at <a href="#installment-type">Here</a></td> <td>1</td> </tr> <tr> <td>instmntMon</td> <td>Y</td> <td>N</td> <td>2</td> <td>Installment Month</td> <td>1</td> </tr> <tr> <td>cardCvv</td> <td>Y</td> <td>N</td> <td>3</td> <td>Card CVV</td> <td>123</td> </tr> <tr> <td>onePassToken</td> <td>Y</td> <td>AN</td> <td>&nbsp;</td> <td>One time use transaction token(Created by onePassToken.do)</td> <td>9338d54573688ae18e175240b0257de48d89c6ef1c9c7b5c094dc4beed9e435f</td> </tr> <tr> <td>recurrOpt</td> <td>Y</td> <td>N</td> <td>2</td> <td>Recurring option<br> 0: Automatic Cancel<br>1: Do not cancel<br>2: Do not make token</td> <td>1</td> </tr> <tr> <td>billingAddr</td> <td>N</td> <td>AN</td> <td>AN</td> <td>Billing Address</td> <td>Billing Address</td> </tr> <tr> <td>deliveryNm</td> <td>N</td> <td>A</td> <td>30</td> <td>Delivery Name</td> <td>Buyer Name</td> </tr> <tr> <td>deliveryPhone</td> <td>N</td> <td>N</td> <td>15</td> <td>Delivery Phone</td> <td>02112345678</td> </tr> <tr> <td>deliveryAddr</td> <td>N</td> <td>AN</td> <td>100</td> <td>Delivery Address</td> <td>Billing Address</td> </tr> <tr> <td>deliveryEmail</td> <td>N</td> <td>AN &nbsp;</td> <td>Delivery Email</td> <td>buyer@merchant.com</td> <td></td> </tr> <tr> <td>deliveryCity</td> <td>N</td> <td>A</td> <td>50</td> <td>Delivery City</td> <td>Jakarta</td> </tr> <tr> <td>deliveryState</td> <td>N</td> <td>A</td> <td>50</td> <td>Delivery State</td> <td>Jakarta</td> </tr> <tr> <td>deliveryPostCd</td> <td>N</td> <td>N</td> <td>10</td> <td>Delivery Post Number</td> <td>12345</td> </tr> <tr> <td>deliveryCountry</td> <td>N</td> <td>A</td> <td>10</td> <td>Delivery Country</td> <td>Indonesia</td> </tr> <tr> <td>vat</td> <td>N</td> <td>N</td> <td>12</td> <td>Vat</td> <td>0</td> </tr> <tr> <td>fee</td> <td>N</td> <td>N</td> <td>12</td> <td>Service Tax</td> <td>0</td> </tr> <tr> <td>notaxAmt</td> <td>N</td> <td>N</td> <td>12</td> <td>Tax Free Amount</td> <td>0</td> </tr> <tr> <td>reqDt</td> <td>N</td> <td>N</td> <td>8</td> <td>Request Date(YYYYMMDD)</td> <td>20160301</td> </tr> <tr> <td>reqTm</td> <td>N</td> <td>N</td> <td>6</td> <td>Request Time(HH24MISS)</td> <td>135959</td> </tr> <tr> <td>reqDomain</td> <td>N</td> <td>AN</td> <td>100</td> <td>Request Domain</td> <td>merchant.com</td> </tr> <tr> <td>reqServerIP</td> <td>N</td> <td>AN</td> <td>15</td> <td>Request Server IP</td> <td>127.0.0.1</td> </tr> <tr> <td>reqClientVer</td> <td>N</td> <td>AN</td> <td>50</td> <td>equest Client Version</td> <td>1.0</td> </tr> <tr> <td>userSessionID</td> <td>N</td> <td>AN</td> <td>100</td> <td>User Session ID</td> <td>userSessionID</td> </tr> <tr> <td>userAgent</td> <td>N</td> <td>AN</td> <td>100</td> <td>User Agent Information</td> <td>Mozilla</td> </tr> <tr> <td>userLanguage</td> <td>N</td> <td>AN</td> <td>2</td> <td>User Language</td> <td>en-US</td> </tr> </tbody></table> <p><br><strong>Response JSON Object</strong></p> <table><thead> <tr> <th>Parameter</th> <th>Tipe</th> <th>Ukuran</th> <th>Deskripsi</th> </tr> </thead><tbody> <tr> <td>resultCd</td> <td>N</td> <td>4</td> <td>Result Code</td> </tr> <tr> <td>resultMsg</td> <td>AN</td> <td>255</td> <td>Result Message</td> </tr> <tr> <td>tXid</td> <td>AN</td> <td>30</td> <td>Transaction ID</td> </tr> <tr> <td>referenceNo</td> <td>ANS</td> <td>40</td> <td>Merchant Order No</td> </tr> <tr> <td>payMethod</td> <td>N</td> <td>2</td> <td>Payment Method. Refer Code at <a href="#payment-method">Here</a></td> </tr> <tr> <td>amount</td> <td>N</td> <td>12</td> <td>Transaction Amount</td> </tr> <tr> <td>currency</td> <td>AN</td> <td>3</td> <td>Currency</td> </tr> <tr> <td>goodsNm</td> <td>N</td> <td>100</td> <td>Goods Name</td> </tr> <tr> <td>billingNm</td> <td>N</td> <td>30</td> <td>Buyer Name</td> </tr> <tr> <td>transDt</td> <td>N</td> <td>8</td> <td>Transaction date (YYYYMMDD)</td> </tr> <tr> <td>transTm</td> <td>N</td> <td>6</td> <td>Transaction time (HH24MISS)</td> </tr> <tr> <td>description</td> <td>N</td> <td>100</td> <td>Transaction description</td> </tr> <tr> <td>callbackUrl</td> <td>N</td> <td>100</td> <td>Callback Url</td> </tr> <tr> <td>authNo</td> <td>N</td> <td>10</td> <td>Authorization Number</td> </tr> <tr> <td>issuBankCd</td> <td>N</td> <td>4</td> <td>Issue Bank Code. Refer Code at <a href="#bank-code">Here</a></td> </tr> <tr> <td>issuBankNm</td> <td>A</td> <td>&nbsp;</td> <td>Issue Bank Name.</td> </tr> <tr> <td>acquBankCd</td> <td>N</td> <td>4</td> <td>Acquire Bank Code. Refer Code at <a href="#bank-code">Here</a></td> </tr> <tr> <td>acquBankNm</td> <td>A</td> <td>&nbsp;</td> <td>Acquire Bank Name.</td> </tr> <tr> <td>cardNo</td> <td>N</td> <td>20</td> <td>Card Number (Masked)</td> </tr> <tr> <td>instmntMon</td> <td>N</td> <td>2</td> <td>Installment month</td> </tr> <tr> <td>istmntType</td> <td>N</td> <td>2</td> <td>Installment type. Refer Code at <a href="#installment-type">Here</a></td> </tr> <tr> <td>recurringToken</td> <td>N</td> <td>64</td> <td>Token for Recurring Payment</td> </tr> <tr> <td>preauthToken</td> <td>N</td> <td>64</td> <td>Token for Preauth Payment</td> </tr> <tr> <td>ccTransType</td> <td>N</td> <td>2</td> <td>Credit Card Transaction Type</td> </tr> <tr> <td>vat</td> <td>N</td> <td>12</td> <td>Vat number</td> </tr> <tr> <td>fee</td> <td>N</td> <td>12</td> <td>Service fee</td> </tr> <tr> <td>notaxAmt</td> <td>N</td> <td>12</td> <td>Tax free amount</td> </tr> </tbody></table> <h1 id=enterprise-virtual-account>Enterprise - Virtual Account</h1> <p>NICEPay menawarkan <strong>Virtual Account</strong> sebagai metode pembayaran. Dengan menggunakan metode ini, nasabah akan memiliki pilihan untuk melakukan pembayaran melalui ATM, SMS Banking, Internet Banking, atau Mobile Banking. Pemberitahuan Real Time akan dikirim saat pelanggan menyelesaikan pembayaran.<br> Bank yang Didukung oleh NICEPay: <ol type=1> <li>Bank Mandiri <li>Bank International Indonesia Maybank <li>Bank Permata <li>Bank Central Asia (BCA) <li>Bank Negara Indonesia 46 (BNI) <li>Bank KEB Hana Indonesia <li>Bank Rakyat Indonesia (BRI) <li>Bank CIMB Niaga <li>Bank DANAMON </ol></p> <p>NICEPay juga mendukung Virtual Account (VA) untuk bank lain melalui ATM BERSAMA, ALTO, LINK, and PRIMA.</p> <p>Integration Step : <ol type=1> <li>Merchant meminta registrasi VA ke NICEPay. <li>Merchant menampilkan detail VA dan customer journey, kemudian mengirimkan detail VA melalui email / sms / riwayat transaksi nasabah. <li>Pelanggan membayarkan VA di saluran pembayaran yang diinginkan. <li>NICEPay kirim notifikasi. <li>Merchant handle notifikasi. </ol></p> <h2 id=va-flow>VA Flow</h2> <p>Flow untuk Enterprise - Virtual Account<br></p> <p><img src="images/ent-va-flow-fad3c22a.png"></p> <h2 id=registrasi-va>Registrasi VA</h2><pre class="highlight java tab-java"><code><span class="c1">// Payment Mandatory Field</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setPayMethod</span><span class="o">(</span><span class="s">"02"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"IDR"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setAmt</span><span class="o">(</span><span class="s">"1000"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setReferenceNo</span><span class="o">(</span><span class="s">"MerchantReferenceNumber001"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBankCd</span><span class="o">(</span><span class="s">"BMRI"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setGoodsNm</span><span class="o">(</span><span class="s">"Merchant Goods 1"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingNm</span><span class="o">(</span><span class="s">"Buyer Name"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingEmail</span><span class="o">(</span><span class="s">"buyer@merchant.com"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingPhone</span><span class="o">(</span><span class="s">"02112345678"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingAddr</span><span class="o">(</span><span class="s">"Billing Address"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Jakarta"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"Jakarta"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingPostCd</span><span class="o">(</span><span class="s">"12345"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"Indonesia"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryNm</span><span class="o">(</span><span class="s">"Buyer Name "</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryPhone</span><span class="o">(</span><span class="s">"02112345678"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryAddr</span><span class="o">(</span><span class="s">"Billing Address "</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryCity</span><span class="o">(</span><span class="s">"Jakarta "</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryState</span><span class="o">(</span><span class="s">"Jakarta "</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryPostCd</span><span class="o">(</span><span class="s">"12345"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryCountry</span><span class="o">(</span><span class="s">"Indonesia "</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setCallBackUrl</span><span class="o">(</span><span class="n">merchantDomain</span> <span class="o">+</span> <span class="s">"callback"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDbProcessUrl</span><span class="o">(</span><span class="n">merchantDomain</span> <span class="o">+</span> <span class="s">"dbprocess"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setVat</span><span class="o">(</span><span class="s">"0"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setFee</span><span class="o">(</span><span class="s">"0"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setNotaxAmt</span><span class="o">(</span><span class="s">"0"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDescription</span><span class="o">(</span><span class="s">"Description"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setUserIP</span><span class="o">(</span><span class="s">"127.0.0.1"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setMerchantToken</span><span class="o">(</span><span class="n">nicePay</span><span class="o">.</span><span class="na">makeToken</span><span class="o">(</span><span class="n">nicePay</span><span class="o">.</span><span class="na">getAmt</span><span class="o">(),</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">getReferenceNo</span><span class="o">()));</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setCartData</span><span class="o">(</span><span class="s">"{}"</span><span class="o">);</span>

<span class="c1">// Payment Optional Field</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setReqDt</span><span class="o">(</span><span class="s">"20160301"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setReqTm</span><span class="o">(</span><span class="s">"135959"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setReqDomain</span><span class="o">(</span><span class="s">"merchant.com"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setReqServerIP</span><span class="o">(</span><span class="s">"127.0.0.1"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setReqClientVer</span><span class="o">(</span><span class="s">"1.0"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setUserSessionID</span><span class="o">(</span><span class="s">"userSessionID"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setUserAgent</span><span class="o">(</span><span class="s">"Mozilla"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setUserLanguage</span><span class="o">(</span><span class="s">"en-US"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setMerFixAcctId</span><span class="o">(</span><span class="s">"9999000000000001"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setPaymentExpiryDt</span><span class="o">(</span><span class="s">"20160303"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setPaymentExpiryTm</span><span class="o">(</span><span class="s">"135959"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setVacctValidDt</span><span class="o">(</span><span class="s">"20160303"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setVacctValidTm</span><span class="o">(</span><span class="s">"135959"</span><span class="o">);</span>


<span class="c1">// Payment Request</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">payment</span><span class="o">();</span>

<span class="c1">// Payment Response</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response String : "</span> <span class="o">+</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">getResponseString</span><span class="o">());</span> <span class="c1">// JSON in String format</span>

<span class="n">String</span> <span class="n">resultCd</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"resultCd"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">resultMsg</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"resultMsg"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">tXid</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"tXid "</span><span class="o">);</span>
<span class="n">String</span> <span class="n">referenceNo</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"referenceNo"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">bankVacctNo</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"bankVacctNo"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">payMethod</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"payMethod"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">amount</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"amount"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">transDt</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"transDt "</span><span class="o">);</span>
<span class="n">String</span> <span class="n">transTm</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"transTm "</span><span class="o">);</span>
<span class="n">String</span> <span class="n">description</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"description"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">callbackUrl</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"callbackUrl"</span><span class="o">);</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">protected</span> <span class="k">void</span> <span class="nf">CheckOut</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(!</span><span class="kt">string</span><span class="p">.</span><span class="nf">IsNullOrEmpty</span><span class="p">(</span><span class="n">BankCd</span><span class="p">.</span><span class="n">SelectedValue</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">currency</span> <span class="p">=</span> <span class="s">"IDR"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">BankCd</span> <span class="p">=</span> <span class="n">BankCd</span><span class="p">.</span><span class="n">SelectedValue</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">DateNow</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"yyyymmdd"</span><span class="p">);</span>
        <span class="c1">// Set VA expiry date +1 day (optional)</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">vaExpDate</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="nf">AddDays</span><span class="p">(</span><span class="m">1</span><span class="p">).</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"yyyymmdd"</span><span class="p">);</span>
        <span class="c1">//Populate Mandatory parameters to send</span>
        <span class="c1">// payment type Bank</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">PayMethod</span> <span class="p">=</span> <span class="s">"02"</span><span class="p">;</span>
        <span class="c1">// Total gross amount</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">amt</span> <span class="p">=</span> <span class="s">"100"</span><span class="p">;</span>
        <span class="c1">// Invoice Number or Referenc Number Generated by merchant</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">referenceNo</span> <span class="p">=</span> <span class="nf">generateReference</span><span class="p">();</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">description</span> <span class="p">=</span> <span class="s">"Payment Invoice No. "</span> <span class="p">+</span> <span class="n">objNicepay</span><span class="p">.</span><span class="n">referenceNo</span><span class="p">;</span>
        <span class="c1">// Transaction description</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingNm</span> <span class="p">=</span> <span class="s">"Donald Duck"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingPhone</span> <span class="p">=</span> <span class="s">"021987456321"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingEmail</span> <span class="p">=</span> <span class="s">"donald@duck.com"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingAddr</span> <span class="p">=</span> <span class="s">"King of money street"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingCity</span> <span class="p">=</span> <span class="s">"King"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingState</span> <span class="p">=</span> <span class="s">"Money"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingPostCd</span> <span class="p">=</span> <span class="s">"123654"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingCountry</span> <span class="p">=</span> <span class="s">"Indonesia"</span><span class="p">;</span>

        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryNm</span> <span class="p">=</span> <span class="s">"Donald Duck"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryPhone</span> <span class="p">=</span> <span class="s">"021987456321"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryEmail</span> <span class="p">=</span> <span class="s">"donald@duck.com"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryAddr</span> <span class="p">=</span> <span class="s">"King of money street"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryCity</span> <span class="p">=</span> <span class="s">"King"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryState</span> <span class="p">=</span> <span class="s">"Money"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryPostCd</span> <span class="p">=</span> <span class="s">"123654"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryCountry</span> <span class="p">=</span> <span class="s">"Indonesia"</span><span class="p">;</span>

        <span class="n">objNicepay</span><span class="p">.</span><span class="n">vacctValidDt</span> <span class="p">=</span> <span class="n">objNicepay</span><span class="p">.</span><span class="n">vaExpDate</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">vacctValidTm</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"hhmmss"</span><span class="p">);</span>

        <span class="n">objResult</span> <span class="p">=</span> <span class="n">objNicepayClass</span><span class="p">.</span><span class="nf">CreateVA</span><span class="p">(</span><span class="n">objNicepay</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">objResult</span><span class="p">.</span><span class="n">resultCd</span> <span class="p">==</span> <span class="s">"0000"</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Tresult</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">resultCd</span><span class="p">;</span>
            <span class="n">TtXid</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">tXid</span><span class="p">;</span>
            <span class="n">TcallbackUrl</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">callbackUrl</span><span class="p">;</span>
            <span class="n">Tdescription</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">description</span><span class="p">;</span>
            <span class="n">TreferenceNo</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">referenceNo</span><span class="p">;</span>
            <span class="n">TpayMethod</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">payMethod</span><span class="p">;</span>
            <span class="c1">//YYMMDD</span>
            <span class="n">TtransDT</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">transDt</span><span class="p">;</span>
            <span class="c1">//HH24MISS</span>
            <span class="n">TTranstm</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">transTm</span><span class="p">;</span>
            <span class="n">tbankVacctNo</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">bankVacctNo</span><span class="p">;</span>
            <span class="n">TresultMsg</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">resultMsg</span><span class="p">;</span>
            <span class="n">wrapper</span><span class="p">.</span><span class="n">Visible</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="n">Myresult</span><span class="p">.</span><span class="n">Visible</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">objResult</span><span class="p">.</span><span class="n">resultCd</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">//API data Not correct, you can redirect back to checkout page Or echo error message.</span>
            <span class="c1">//In this sample, we echo error message</span>
            <span class="n">EresultCd</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">resultCd</span><span class="p">;</span>
            <span class="n">EresultMsg</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">resultMsg</span><span class="p">;</span>
            <span class="n">wrapper</span><span class="p">.</span><span class="n">Visible</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="n">ErrData</span><span class="p">.</span><span class="n">Visible</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="c1">//Timeout, you can redirect back to checkout page Or echo error message.</span>
            <span class="c1">//In this sample, we echo error message</span>
            <span class="n">ERR_</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="s">"Connection Timeout. Please Try again."</span><span class="p">;</span>
            <span class="n">wrapper</span><span class="p">.</span><span class="n">Visible</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="n">ERR</span><span class="p">.</span><span class="n">Visible</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="p">}</span>

    <span class="p">}</span>

<span class="p">}</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="c1">// Include Config File
</span><span class="k">include_once</span> <span class="s2">"lib/NicepayLib.php"</span><span class="p">;</span>
<span class="nv">$nicepay</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NicepayLib</span><span class="p">();</span>

<span class="k">function</span> <span class="nf">generateReference</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$micro_date</span> <span class="o">=</span> <span class="nb">microtime</span><span class="p">();</span>
    <span class="nv">$date_array</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s2">" "</span><span class="p">,</span><span class="nv">$micro_date</span><span class="p">);</span>
    <span class="nv">$date</span> <span class="o">=</span> <span class="nb">date</span><span class="p">(</span><span class="s2">"YmdHis"</span><span class="p">,</span><span class="nv">$date_array</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="nv">$date_array</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">preg_replace</span><span class="p">(</span><span class="s1">'/[^\p{L}\p{N}\s]/u'</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="nv">$date_array</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="k">return</span> <span class="s2">"Ref"</span><span class="o">.</span><span class="nv">$date</span><span class="o">.</span><span class="nv">$date_array</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="nb">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">999</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">if</span><span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'payMethod'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'payMethod'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'02'</span>
    <span class="o">&amp;&amp;</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'bankCd'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'bankCd'</span><span class="p">])</span>
<span class="p">{</span>
  <span class="nv">$billingNm</span>      <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'billingNm'</span><span class="p">];</span>
  <span class="nv">$referenceNo</span>    <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'referenceNo'</span><span class="p">];</span>
  <span class="nv">$bankCd</span>         <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'bankCd'</span><span class="p">];</span>

  <span class="c1">// Populate Mandatory parameters to send
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'payMethod'</span><span class="p">,</span> <span class="s1">'02'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'currency'</span><span class="p">,</span> <span class="s1">'IDR'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'amt'</span><span class="p">,</span> <span class="mi">10000</span><span class="p">);</span> <span class="c1">// Total gross amount
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'referenceNo'</span><span class="p">,</span> <span class="nv">$referenceNo</span><span class="p">);</span> <span class="c1">// Invoice Number or Reference Number Generated by merchant
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'description'</span><span class="p">,</span> <span class="s1">'Payment of Invoice No '</span><span class="o">.</span><span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'referenceNo'</span><span class="p">));</span> <span class="c1">// Transaction description
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'bankCd'</span><span class="p">,</span> <span class="nv">$bankCd</span><span class="p">);</span>

  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingNm'</span><span class="p">,</span> <span class="s1">'John Doe'</span><span class="p">);</span> <span class="c1">// Customer name
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingPhone'</span><span class="p">,</span> <span class="s1">'02112345678'</span><span class="p">);</span> <span class="c1">// Customer phone number
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingEmail'</span><span class="p">,</span> <span class="s1">'john@example.com'</span><span class="p">);</span> <span class="c1">//
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingAddr'</span><span class="p">,</span> <span class="s1">'Jl. Jend. Sudirman No. 28'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingCity'</span><span class="p">,</span> <span class="s1">'Jakarta Pusat'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingState'</span><span class="p">,</span> <span class="s1">'DKI Jakarta'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingPostCd'</span><span class="p">,</span> <span class="s1">'10210'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingCountry'</span><span class="p">,</span> <span class="s1">'Indonesia'</span><span class="p">);</span>

  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryNm'</span><span class="p">,</span> <span class="s1">'John Doe'</span><span class="p">);</span> <span class="c1">// Delivery name
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryPhone'</span><span class="p">,</span> <span class="s1">'02112345678'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryEmail'</span><span class="p">,</span> <span class="s1">'john@example.com'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryAddr'</span><span class="p">,</span> <span class="s1">'Jl. Jend. Sudirman No. 28'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryCity'</span><span class="p">,</span> <span class="s1">'Jakarta Pusat'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryState'</span><span class="p">,</span> <span class="s1">'DKI Jakarta'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryPostCd'</span><span class="p">,</span> <span class="s1">'10210'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryCountry'</span><span class="p">,</span> <span class="s1">'Indonesia'</span><span class="p">);</span>

  <span class="c1">// Send Data
</span>  <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">requestVA</span><span class="p">();</span>

  <span class="c1">// Response from NICEPAY
</span>  <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">resultCd</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">resultCd</span> <span class="o">==</span> <span class="s2">"0000"</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"tXid              : </span><span class="nv">$response-&gt;tXid</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"callbackUrl       : </span><span class="nv">$response-&gt;callbackUrl</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"description       : </span><span class="nv">$response-&gt;description</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"payment date      : </span><span class="nv">$response-&gt;transDt</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span> <span class="c1">// YYYYMMDD
</span>    <span class="k">echo</span> <span class="s2">"payment time      : </span><span class="nv">$response-&gt;transTm</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span> <span class="c1">// HH24MISS
</span>    <span class="k">echo</span> <span class="s2">"virtual account   : </span><span class="nv">$response-&gt;bankVacctNo</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"result code       : </span><span class="nv">$response-&gt;resultCd</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"result message    : </span><span class="nv">$response-&gt;resultMsg</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"reference no      : </span><span class="nv">$response-&gt;referenceNo</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"payment method    : </span><span class="nv">$response-&gt;payMethod</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">elseif</span><span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">resultCd</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// API data not correct or error happened in bank system, you can redirect back to checkout page or echo error message.
</span>    <span class="c1">// In this sample, we echo error message
</span>    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"Oops! Something happened, please notice your system administrator.</span><span class="se">\n\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"result code       : </span><span class="nv">$response-&gt;resultCd</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"result message    : </span><span class="nv">$response-&gt;resultMsg</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// Timeout, you can redirect back to checkout page or echo error message.
</span>    <span class="c1">// In this sample, we echo error message
</span>    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;Connection Timeout. Please Try again.&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">json</span>

<span class="kn">from</span> <span class="nn">nicepay</span> <span class="kn">import</span> <span class="n">NICEPay</span>

<span class="c">#Set MID &amp; Merchant Key</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">iMid</span> <span class="o">=</span> <span class="s">"BMRITEST01"</span> <span class="c">#Set Merchant ID</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">merchantKey</span> <span class="o">=</span> <span class="s">"33F49GnCMS1mFYlGXisbUDzVf2ATWCl9k3R++d5hDd3Frmuos/XLx8XhXpe+LDYAbpGKZYSwtlyyLOtS/8aD7A=="</span> <span class="c">#Set Merchant Key</span>

<span class="c">#Set Mandatory Value</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">payMethod</span> <span class="o">=</span> <span class="s">"02"</span> <span class="c">#Set Payment Method</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">amt</span> <span class="o">=</span> <span class="s">"1000"</span> <span class="c">#Total Gross Amount</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">referenceNo</span> <span class="o">=</span> <span class="s">"NiceTest00003"</span> <span class="c">#Invoice Number By Merchant</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">goodsNm</span> <span class="o">=</span> <span class="n">NICEPay</span><span class="o">.</span><span class="n">referenceNo</span> <span class="c">#Goods Name</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingNm</span> <span class="o">=</span> <span class="s">"John Doe"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingPhone</span> <span class="o">=</span> <span class="s">"02112345678"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingEmail</span> <span class="o">=</span> <span class="s">"john@example.co`m"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingAddr</span> <span class="o">=</span> <span class="s">"Jl. Jend. Sudirman No. 28"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingCity</span> <span class="o">=</span> <span class="s">"Jakarta Pusat"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingState</span> <span class="o">=</span> <span class="s">"DKI Jakarta"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingPostCd</span> <span class="o">=</span> <span class="s">"10210"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingCountry</span> <span class="o">=</span> <span class="s">"Indonesia"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">callBackUrl</span> <span class="o">=</span> <span class="s">"http://example.com/callback"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">dbProcessUrl</span> <span class="o">=</span> <span class="s">"https://example.com/notification-handler.php"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s">"Payment Of Ref No."</span> <span class="o">+</span> <span class="n">NICEPay</span><span class="o">.</span><span class="n">referenceNo</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">merchantToken</span> <span class="o">=</span> <span class="n">NICEPay</span><span class="o">.</span><span class="n">getMerchantToken</span><span class="p">()</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">userIP</span> <span class="o">=</span> <span class="n">NICEPay</span><span class="o">.</span><span class="n">getUserIp</span><span class="p">()</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">cartData</span> <span class="o">=</span> <span class="s">"{}"</span> <span class="c">#Json Array Value</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">bankCd</span> <span class="o">=</span> <span class="s">"BMRI"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">vacctValidDt</span> <span class="o">=</span> <span class="s">"20160303"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">vacctValidTm</span> <span class="o">=</span> <span class="s">"135959"</span>


<span class="c"># // Payment Request</span>
<span class="n">resultData</span> <span class="o">=</span> <span class="n">NICEPay</span><span class="o">.</span><span class="n">apiRequest</span><span class="p">()</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">resultData</span><span class="p">)</span>

<span class="c">#Payment Response String Format</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">result</span><span class="p">[</span><span class="s">'resultCd'</span><span class="p">]</span>
<span class="k">except</span> <span class="nb">NameError</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">"Connection Timeout. Please Try Again!"</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">result</span><span class="p">[</span><span class="s">'resultCd'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'0000'</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"resultCd : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'resultCd'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"resultMsg : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'resultMsg'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"tXid : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'tXid'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"referenceNo : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'referenceNo'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"payMethod : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'payMethod'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"amount : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'amount'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"transDt : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'transDt'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"transTm : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'transTm'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"description : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'description'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"callbackUrl : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'callbackUrl'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"bankVacctNo : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'bankVacctNo'</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"resultCd : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'resultCd'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"resultMsg : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'resultMsg'</span><span class="p">])</span>
</code></pre> <blockquote> <p>Contoh JSON Response</p> </blockquote> <pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"resultCd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"goodsNm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test Transaction Nicepay"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"referenceNo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"99997"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"transTm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"104721"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tXid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TESTIDTEST02201803011047210789"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Payment of referenceNo 99997,This Description"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bankVacctNo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1047210789"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"resultMsg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billingNm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Thomas Alfa Edison"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vacctValidDt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20180308"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payMethod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bankCd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BMRI"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"callbackUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.merchant.com/callbackUrl"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IDR"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"transDt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20180301"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vacctValidTm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"235959"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre> <table><thead> <tr> <th>&nbsp;</th> <th>&nbsp;</th> </tr> </thead><tbody> <tr> <td><strong>API url</strong></td> <td><strong>/nicepay/api/onePass.do</strong></td> </tr> <tr> <td>Metode</td> <td>POST</td> </tr> <tr> <td>Deskripsi</td> <td>Virtual Account Transaction</td> </tr> <tr> <td>Merchant Token</td> <td>SHA256 (Merchant ID + Reference Number + Amount + Merchant Key)</td> </tr> </tbody></table> <p><strong>Request POST Parameter</strong><br> for bankCd, please refer to <a href="#bank-code">Bank Code</a></p> <table><thead> <tr> <th>Parameter</th> <th>Mandatory</th> <th>Tipe</th> <th>Deskripsi</th> <th>Contoh Data</th> </tr> </thead><tbody> <tr> <td>iMid</td> <td>Y</td> <td>AN</td> <td>10</td> <td>Merchant ID</td> </tr> <tr> <td>payMethod</td> <td>Y</td> <td>AN</td> <td>2</td> <td>Pay Method. Refer Code at <a href="#payment-method">Here</a></td> </tr> <tr> <td>currency</td> <td>Y</td> <td>AN</td> <td>3</td> <td>Currency</td> </tr> <tr> <td>amt</td> <td>Y</td> <td>N</td> <td>12</td> <td>Goods Amount</td> </tr> <tr> <td>referenceNo</td> <td>Y</td> <td>AN</td> <td>40</td> <td>Merchant Order No</td> </tr> <tr> <td>goodsNm</td> <td>Y</td> <td>AN</td> <td>100</td> <td>Goods Name</td> </tr> <tr> <td>billingNm</td> <td>Y</td> <td>A</td> <td>30</td> <td>Billing Name</td> </tr> <tr> <td>billingPhone</td> <td>Y</td> <td>N</td> <td>15</td> <td>Billing Phone Number</td> </tr> <tr> <td>billingEmail</td> <td>Y</td> <td>AN</td> <td>40</td> <td>Billing Email</td> </tr> <tr> <td>billingCity</td> <td>Y</td> <td>A</td> <td>50</td> <td>Billing City</td> </tr> <tr> <td>billingState</td> <td>Y</td> <td>A</td> <td>50</td> <td>Billing State</td> </tr> <tr> <td>billingPostCd</td> <td>Y</td> <td>N</td> <td>10</td> <td>Billing Post Number</td> </tr> <tr> <td>billingCountry</td> <td>Y</td> <td>A</td> <td>10</td> <td>Billing Country</td> </tr> <tr> <td>callBackUrl</td> <td>Y</td> <td>AN</td> <td>255</td> <td>Payment Result Forward Url (On Browser)</td> </tr> <tr> <td>dbProcessUrl</td> <td>Y</td> <td>AN</td> <td>255</td> <td>Payment Result Receive Url (Server Side)</td> </tr> <tr> <td>description</td> <td>Y</td> <td>AN</td> <td>100</td> <td>Description</td> </tr> <tr> <td>merchantToken</td> <td>Y</td> <td>AN</td> <td>255</td> <td>Merchant Token</td> </tr> <tr> <td>userIP</td> <td>Y</td> <td>AN</td> <td>15</td> <td>User IP (Customer)</td> </tr> <tr> <td>cartData</td> <td>Y</td> <td>AN</td> <td>4000</td> <td>Cart Data (Json Format)</td> </tr> <tr> <td>bankCd</td> <td>Y</td> <td>AN</td> <td>4</td> <td>Bank Code, refer to <a href="#bank-code">Link</a></td> </tr> <tr> <td>billingAddr</td> <td>N</td> <td>AN</td> <td>AN</td> <td>Billing Address</td> </tr> <tr> <td>deliveryNm</td> <td>N</td> <td>A</td> <td>30</td> <td>Delivery Name</td> </tr> <tr> <td>deliveryPhone</td> <td>N</td> <td>N</td> <td>15</td> <td>Delivery Phone</td> </tr> <tr> <td>deliveryAddr</td> <td>N</td> <td>AN</td> <td>100</td> <td>Delivery Address</td> </tr> <tr> <td>deliveryEmail</td> <td>N</td> <td>AN &nbsp;</td> <td>Delivery Email</td> <td>buyer@merhcant.com</td> </tr> <tr> <td>deliveryCity</td> <td>N</td> <td>A</td> <td>50</td> <td>Delivery City</td> </tr> <tr> <td>deliveryState</td> <td>N</td> <td>A</td> <td>50</td> <td>Delivery State</td> </tr> <tr> <td>deliveryPostCd</td> <td>N</td> <td>N</td> <td>10</td> <td>Delivery Post Number</td> </tr> <tr> <td>deliveryCountry</td> <td>N</td> <td>A</td> <td>10</td> <td>Delivery Country</td> </tr> <tr> <td>vat</td> <td>N</td> <td>N</td> <td>12</td> <td>Vat</td> </tr> <tr> <td>fee</td> <td>N</td> <td>N</td> <td>12</td> <td>Service Tax</td> </tr> <tr> <td>notaxAmt</td> <td>N</td> <td>N</td> <td>12</td> <td>Tax Free Amount</td> </tr> <tr> <td>reqDt</td> <td>N</td> <td>N</td> <td>8</td> <td>Request Date(YYYYMMDD)</td> </tr> <tr> <td>reqTm</td> <td>N</td> <td>N</td> <td>6</td> <td>Request Time(HH24MISS)</td> </tr> <tr> <td>reqDomain</td> <td>N</td> <td>AN</td> <td>100</td> <td>Request Domain</td> </tr> <tr> <td>reqServerIP</td> <td>N</td> <td>AN</td> <td>15</td> <td>Request Server IP</td> </tr> <tr> <td>reqClientVer</td> <td>N</td> <td>AN</td> <td>50</td> <td>Request Client Version</td> </tr> <tr> <td>userSessionID</td> <td>N</td> <td>AN</td> <td>100</td> <td>User Session ID</td> </tr> <tr> <td>userAgent</td> <td>N</td> <td>AN</td> <td>100</td> <td>User Agent Information</td> </tr> <tr> <td>userLanguage</td> <td>N</td> <td>AN</td> <td>2</td> <td>User Language</td> </tr> <tr> <td>vacctValidDt</td> <td>N</td> <td>N</td> <td>8</td> <td>VA expiry date (YYYYMMDD)</td> </tr> <tr> <td>vacctValidTm</td> <td>N</td> <td>N</td> <td>6</td> <td>VA expiry time (HH24MISS)</td> </tr> </tbody></table> <p><br><strong>Response JSON Object</strong></p> <table><thead> <tr> <th>Parameter</th> <th>Tipe</th> <th>Ukuran</th> <th>Deskripsi</th> </tr> </thead><tbody> <tr> <td>resultCd</td> <td>N</td> <td>4</td> <td>Result Code</td> </tr> <tr> <td>resultMsg</td> <td>AN</td> <td>255</td> <td>Result Message</td> </tr> <tr> <td>tXid</td> <td>AN</td> <td>30</td> <td>Transaction ID</td> </tr> <tr> <td>referenceNo</td> <td>ANS</td> <td>40</td> <td>Merchant Order No</td> </tr> <tr> <td>payMethod</td> <td>N</td> <td>2</td> <td>Payment Method. Refer Code at <a href="#payment-method">Here</a></td> </tr> <tr> <td>amount</td> <td>N</td> <td>12</td> <td>Transaction Amount</td> </tr> <tr> <td>currency</td> <td>AN</td> <td>3</td> <td>Currency</td> </tr> <tr> <td>goodsNm</td> <td>N</td> <td>100</td> <td>Goods Name</td> </tr> <tr> <td>billingNm</td> <td>N</td> <td>30</td> <td>Buyer Name</td> </tr> <tr> <td>transDt</td> <td>N</td> <td>8</td> <td>Transaction date (YYYYMMDD)</td> </tr> <tr> <td>transTm</td> <td>N</td> <td>6</td> <td>Transaction time (HH24MISS)</td> </tr> <tr> <td>description</td> <td>N</td> <td>100</td> <td>Transaction description</td> </tr> <tr> <td>callbackUrl</td> <td>N</td> <td>100</td> <td>Callback Url</td> </tr> <tr> <td>bankCd</td> <td>AN</td> <td>4</td> <td>Bank Code, refer to <a href="#bank-code">Link</a></td> </tr> <tr> <td>bankVacctNo</td> <td>N</td> <td>20</td> <td>Bank Virtual Account Number</td> </tr> <tr> <td>vacctValidDt</td> <td>N</td> <td>8</td> <td>VA expiry date</td> </tr> <tr> <td>vacctValidTm</td> <td>N</td> <td>6</td> <td>Va expiry time</td> </tr> </tbody></table> <h1 id=enterprise-convenience-store>Enterprise - Convenience Store</h1> <p>NICEPay menawarkan <strong>Convenience Store (CVS)</strong> sebagai metode pembayaran. Pemberitahuan Real Time akan dikirim saat pelanggan menyelesaikan pembayaran.<br> CVS yang didukung oleh NICEPay: <ol type=1> <li>Alfamart <li>Indomaret <li>Lawson <li>Alfamidi <li>Dan+Dan Store </ol></p> <p>Proses Integrasi : <ol type=1> <li>Merchant meminta registrasi CVS ke NICEPay. <li>Merchant menampilkan detail CVS dan customer journey, kemudian mengirimkan detail CVS melalui email / sms / riwayat transaksi nasabah. <li>Pelanggan membayarkan CVS di saluran pembayaran yang diinginkan. <li>NICEPay kirim notifikasi. <li>Merchant handle notifikasi. </ol></p> <h2 id=cvs-flow>CVS Flow</h2> <p>Flow untuk Enterprise - Convenience Store<br> <img src="images/ent-cvs-flow-8b30eead.png"></p> <h2 id=registrasi-cvs>Registrasi CVS</h2><pre class="highlight java tab-java"><code><span class="c1">// Payment Mandatory Field</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setPayMethod</span><span class="o">(</span><span class="s">"03"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"IDR"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setAmt</span><span class="o">(</span><span class="s">"1000"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setReferenceNo</span><span class="o">(</span><span class="s">"MerchantReferenceNumber001"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setMitraCd</span><span class="o">(</span><span class="s">"ALMA"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setGoodsNm</span><span class="o">(</span><span class="s">"Merchant Goods 1"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingNm</span><span class="o">(</span><span class="s">"Buyer Name"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingEmail</span><span class="o">(</span><span class="s">"buyer@merchant.com"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingPhone</span><span class="o">(</span><span class="s">"02112345678"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingAddr</span><span class="o">(</span><span class="s">"Billing Address"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Jakarta"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"Jakarta"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingPostCd</span><span class="o">(</span><span class="s">"12345"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"Indonesia"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryNm</span><span class="o">(</span><span class="s">"Buyer Name "</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryPhone</span><span class="o">(</span><span class="s">"02112345678"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryAddr</span><span class="o">(</span><span class="s">"Billing Address "</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryCity</span><span class="o">(</span><span class="s">"Jakarta "</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryState</span><span class="o">(</span><span class="s">"Jakarta "</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryPostCd</span><span class="o">(</span><span class="s">"12345"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryCountry</span><span class="o">(</span><span class="s">"Indonesia "</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setCallBackUrl</span><span class="o">(</span><span class="n">merchantDomain</span> <span class="o">+</span> <span class="s">"callback"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDbProcessUrl</span><span class="o">(</span><span class="n">merchantDomain</span> <span class="o">+</span> <span class="s">"dbprocess"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setVat</span><span class="o">(</span><span class="s">"0"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setFee</span><span class="o">(</span><span class="s">"0"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setNotaxAmt</span><span class="o">(</span><span class="s">"0"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDescription</span><span class="o">(</span><span class="s">"Description"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setUserIP</span><span class="o">(</span><span class="s">"127.0.0.1"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setMerchantToken</span><span class="o">(</span><span class="n">nicePay</span><span class="o">.</span><span class="na">makeToken</span><span class="o">(</span><span class="n">nicePay</span><span class="o">.</span><span class="na">getAmt</span><span class="o">(),</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">getReferenceNo</span><span class="o">()));</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setCartData</span><span class="o">(</span><span class="s">"{}"</span><span class="o">);</span>

<span class="c1">// Payment Optional Field</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setReqDt</span><span class="o">(</span><span class="s">"20160301"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setReqTm</span><span class="o">(</span><span class="s">"135959"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setReqDomain</span><span class="o">(</span><span class="s">"merchant.com"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setReqServerIP</span><span class="o">(</span><span class="s">"127.0.0.1"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setReqClientVer</span><span class="o">(</span><span class="s">"1.0"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setUserSessionID</span><span class="o">(</span><span class="s">"userSessionID"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setUserAgent</span><span class="o">(</span><span class="s">"Mozilla"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setUserLanguage</span><span class="o">(</span><span class="s">"en-US"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setMerFixAcctId</span><span class="o">(</span><span class="s">"9999000000000001"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setPaymentExpiryDt</span><span class="o">(</span><span class="s">"20160303"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setPaymentExpiryTm</span><span class="o">(</span><span class="s">"135959"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setPayValidDt</span><span class="o">(</span><span class="s">"20160303"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setPayValidTm</span><span class="o">(</span><span class="s">"135959"</span><span class="o">);</span>


<span class="c1">// Payment Request</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">payment</span><span class="o">();</span>

<span class="c1">// Payment Response</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response String : "</span> <span class="o">+</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">getResponseString</span><span class="o">());</span> <span class="c1">// JSON in String format</span>

<span class="n">String</span> <span class="n">resultCd</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"resultCd"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">resultMsg</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"resultMsg"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">tXid</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"tXid "</span><span class="o">);</span>
<span class="n">String</span> <span class="n">referenceNo</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"referenceNo"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">payNo</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"payNo"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">payMethod</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"payMethod"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">amount</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"amount"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">transDt</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"transDt "</span><span class="o">);</span>
<span class="n">String</span> <span class="n">transTm</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"transTm "</span><span class="o">);</span>
<span class="n">String</span> <span class="n">description</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"description"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">callbackUrl</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"callbackUrl"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">mitraCd</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"mitraCd"</span><span class="o">);</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">protected</span> <span class="k">void</span> <span class="nf">CheckOut</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(!</span><span class="kt">string</span><span class="p">.</span><span class="nf">IsNullOrEmpty</span><span class="p">(</span><span class="n">BankCd</span><span class="p">.</span><span class="n">SelectedValue</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">currency</span> <span class="p">=</span> <span class="s">"IDR"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">DateNow</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"yyyymmdd"</span><span class="p">);</span>
        <span class="c1">// Set VA expiry date +1 day (optional)</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">vaExpDate</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="nf">AddDays</span><span class="p">(</span><span class="m">1</span><span class="p">).</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"yyyymmdd"</span><span class="p">);</span>
        <span class="c1">//Populate Mandatory parameters to send</span>
        <span class="c1">// payment type Bank</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">PayMethod</span> <span class="p">=</span> <span class="s">"03"</span><span class="p">;</span>
        <span class="c1">// Total gross amount</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">amt</span> <span class="p">=</span> <span class="s">"10000"</span><span class="p">;</span>
        <span class="c1">// Invoice Number or Referenc Number Generated by merchant</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">referenceNo</span> <span class="p">=</span> <span class="nf">generateReference</span><span class="p">();</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">description</span> <span class="p">=</span> <span class="s">"Payment Invoice No. "</span> <span class="p">+</span> <span class="n">objNicepay</span><span class="p">.</span><span class="n">referenceNo</span><span class="p">;</span>
        <span class="c1">// Transaction description</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingNm</span> <span class="p">=</span> <span class="s">"Donald Duck"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingPhone</span> <span class="p">=</span> <span class="s">"021987456321"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingEmail</span> <span class="p">=</span> <span class="s">"donald@duck.com"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingAddr</span> <span class="p">=</span> <span class="s">"King of money street"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingCity</span> <span class="p">=</span> <span class="s">"King"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingState</span> <span class="p">=</span> <span class="s">"Money"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingPostCd</span> <span class="p">=</span> <span class="s">"123654"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingCountry</span> <span class="p">=</span> <span class="s">"Indonesia"</span><span class="p">;</span>

        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryNm</span> <span class="p">=</span> <span class="s">"Donald Duck"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryPhone</span> <span class="p">=</span> <span class="s">"021987456321"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryEmail</span> <span class="p">=</span> <span class="s">"donald@duck.com"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryAddr</span> <span class="p">=</span> <span class="s">"King of money street"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryCity</span> <span class="p">=</span> <span class="s">"King"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryState</span> <span class="p">=</span> <span class="s">"Money"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryPostCd</span> <span class="p">=</span> <span class="s">"123654"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryCountry</span> <span class="p">=</span> <span class="s">"Indonesia"</span><span class="p">;</span>

        <span class="n">objNicepay</span><span class="p">.</span><span class="n">MitraCd</span> <span class="p">=</span> <span class="s">"ALMA"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">PayValidDt</span> <span class="p">=</span> <span class="s">"20170404"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">PayValidTm</span> <span class="p">=</span> <span class="s">"131300"</span><span class="p">;</span>

        <span class="n">objResult</span> <span class="p">=</span> <span class="n">objNicepayClass</span><span class="p">.</span><span class="nf">CreateCVS</span><span class="p">(</span><span class="n">objNicepay</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">objResult</span><span class="p">.</span><span class="n">resultCd</span> <span class="p">==</span> <span class="s">"0000"</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Tresult</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">resultCd</span><span class="p">;</span>
            <span class="n">TtXid</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">tXid</span><span class="p">;</span>
            <span class="n">TcallbackUrl</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">callbackUrl</span><span class="p">;</span>
            <span class="n">Tdescription</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">description</span><span class="p">;</span>
            <span class="n">TreferenceNo</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">referenceNo</span><span class="p">;</span>
            <span class="n">TpayMethod</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">payMethod</span><span class="p">;</span>
            <span class="c1">//YYMMDD</span>
            <span class="n">TtransDT</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">transDt</span><span class="p">;</span>
            <span class="c1">//HH24MISS</span>
            <span class="n">TTranstm</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">transTm</span><span class="p">;</span>
            <span class="n">payNo</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">payNo</span><span class="p">;</span>
            <span class="n">TresultMsg</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">resultMsg</span><span class="p">;</span>
            <span class="n">mitraCd</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">mitraCd</span><span class="p">;</span>
            <span class="n">amount</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">amount</span><span class="p">;</span>
            <span class="n">wrapper</span><span class="p">.</span><span class="n">Visible</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="n">Myresult</span><span class="p">.</span><span class="n">Visible</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">objResult</span><span class="p">.</span><span class="n">resultCd</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">//API data Not correct, you can redirect back to checkout page Or echo error message.</span>
            <span class="c1">//In this sample, we echo error message</span>
            <span class="n">EresultCd</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">resultCd</span><span class="p">;</span>
            <span class="n">EresultMsg</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">resultMsg</span><span class="p">;</span>
            <span class="n">wrapper</span><span class="p">.</span><span class="n">Visible</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="n">ErrData</span><span class="p">.</span><span class="n">Visible</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="c1">//Timeout, you can redirect back to checkout page Or echo error message.</span>
            <span class="c1">//In this sample, we echo error message</span>
            <span class="n">ERR_</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="s">"Connection Timeout. Please Try again."</span><span class="p">;</span>
            <span class="n">wrapper</span><span class="p">.</span><span class="n">Visible</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="n">ERR</span><span class="p">.</span><span class="n">Visible</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="c1">// Include Config File
</span><span class="k">include_once</span> <span class="s2">"lib/NicepayLib.php"</span><span class="p">;</span>
<span class="nv">$nicepay</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NicepayLib</span><span class="p">();</span>

<span class="k">function</span> <span class="nf">generateReference</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$micro_date</span> <span class="o">=</span> <span class="nb">microtime</span><span class="p">();</span>
    <span class="nv">$date_array</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s2">" "</span><span class="p">,</span><span class="nv">$micro_date</span><span class="p">);</span>
    <span class="nv">$date</span> <span class="o">=</span> <span class="nb">date</span><span class="p">(</span><span class="s2">"YmdHis"</span><span class="p">,</span><span class="nv">$date_array</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="nv">$date_array</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">preg_replace</span><span class="p">(</span><span class="s1">'/[^\p{L}\p{N}\s]/u'</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="nv">$date_array</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="k">return</span> <span class="s2">"Ref"</span><span class="o">.</span><span class="nv">$date</span><span class="o">.</span><span class="nv">$date_array</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="nb">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">999</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">if</span><span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'payMethod'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'payMethod'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'03'</span>
    <span class="o">&amp;&amp;</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'mitraCd'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'mitraCd'</span><span class="p">])</span>
<span class="p">{</span>
  <span class="nv">$billingNm</span>      <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'billingNm'</span><span class="p">];</span>
  <span class="nv">$referenceNo</span>    <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'referenceNo'</span><span class="p">];</span>
  <span class="nv">$mitraCd</span>         <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'mitraCd'</span><span class="p">];</span>

  <span class="c1">// Populate Mandatory parameters to send
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'payMethod'</span><span class="p">,</span> <span class="s1">'03'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'currency'</span><span class="p">,</span> <span class="s1">'IDR'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'amt'</span><span class="p">,</span> <span class="mi">10000</span><span class="p">);</span> <span class="c1">// Total gross amount
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'referenceNo'</span><span class="p">,</span> <span class="nv">$referenceNo</span><span class="p">);</span> <span class="c1">// Invoice Number or Reference Number Generated by merchant
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'description'</span><span class="p">,</span> <span class="s1">'Payment of Invoice No '</span><span class="o">.</span><span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'referenceNo'</span><span class="p">));</span> <span class="c1">// Transaction description
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'mitraCd'</span><span class="p">,</span> <span class="nv">$mitraCd</span><span class="p">);</span>

  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingNm'</span><span class="p">,</span> <span class="s1">'John Doe'</span><span class="p">);</span> <span class="c1">// Customer name
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingPhone'</span><span class="p">,</span> <span class="s1">'02112345678'</span><span class="p">);</span> <span class="c1">// Customer phone number
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingEmail'</span><span class="p">,</span> <span class="s1">'john@example.com'</span><span class="p">);</span> <span class="c1">//
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingAddr'</span><span class="p">,</span> <span class="s1">'Jl. Jend. Sudirman No. 28'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingCity'</span><span class="p">,</span> <span class="s1">'Jakarta Pusat'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingState'</span><span class="p">,</span> <span class="s1">'DKI Jakarta'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingPostCd'</span><span class="p">,</span> <span class="s1">'10210'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingCountry'</span><span class="p">,</span> <span class="s1">'Indonesia'</span><span class="p">);</span>

  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryNm'</span><span class="p">,</span> <span class="s1">'John Doe'</span><span class="p">);</span> <span class="c1">// Delivery name
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryPhone'</span><span class="p">,</span> <span class="s1">'02112345678'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryEmail'</span><span class="p">,</span> <span class="s1">'john@example.com'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryAddr'</span><span class="p">,</span> <span class="s1">'Jl. Jend. Sudirman No. 28'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryCity'</span><span class="p">,</span> <span class="s1">'Jakarta Pusat'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryState'</span><span class="p">,</span> <span class="s1">'DKI Jakarta'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryPostCd'</span><span class="p">,</span> <span class="s1">'10210'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryCountry'</span><span class="p">,</span> <span class="s1">'Indonesia'</span><span class="p">);</span>

  <span class="c1">// Send Data
</span>  <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">requestCVS</span><span class="p">();</span>

  <span class="c1">// Response from NICEPAY
</span>  <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">resultCd</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">resultCd</span> <span class="o">==</span> <span class="s2">"0000"</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"tXid              : </span><span class="nv">$response-&gt;tXid</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"callbackUrl       : </span><span class="nv">$response-&gt;callbackUrl</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"description       : </span><span class="nv">$response-&gt;description</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"payment date      : </span><span class="nv">$response-&gt;transDt</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span> <span class="c1">// YYYYMMDD
</span>    <span class="k">echo</span> <span class="s2">"payment time      : </span><span class="nv">$response-&gt;transTm</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span> <span class="c1">// HH24MISS
</span>    <span class="k">echo</span> <span class="s2">"pay number        : </span><span class="nv">$response-&gt;payNo</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"result code       : </span><span class="nv">$response-&gt;resultCd</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"result message    : </span><span class="nv">$response-&gt;resultMsg</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"reference no      : </span><span class="nv">$response-&gt;referenceNo</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"payment method    : </span><span class="nv">$response-&gt;payMethod</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">elseif</span><span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">resultCd</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// API data not correct or error happened in bank system, you can redirect back to checkout page or echo error message.
</span>    <span class="c1">// In this sample, we echo error message
</span>    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"Oops! Something happened, please notice your system administrator.</span><span class="se">\n\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"result code       : </span><span class="nv">$response-&gt;resultCd</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"result message    : </span><span class="nv">$response-&gt;resultMsg</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// Timeout, you can redirect back to checkout page or echo error message.
</span>    <span class="c1">// In this sample, we echo error message
</span>    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;Connection Timeout. Please Try again.&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">json</span>

<span class="kn">from</span> <span class="nn">nicepay</span> <span class="kn">import</span> <span class="n">NICEPay</span>

<span class="c">#Set MID &amp; Merchant Key</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">iMid</span> <span class="o">=</span> <span class="s">"BMRITEST01"</span> <span class="c">#Set Merchant ID</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">merchantKey</span> <span class="o">=</span> <span class="s">"33F49GnCMS1mFYlGXisbUDzVf2ATWCl9k3R++d5hDd3Frmuos/XLx8XhXpe+LDYAbpGKZYSwtlyyLOtS/8aD7A=="</span> <span class="c">#Set Merchant Key</span>

<span class="c">#Set Mandatory Value</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">payMethod</span> <span class="o">=</span> <span class="s">"03"</span> <span class="c">#Set Payment Method</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">amt</span> <span class="o">=</span> <span class="s">"1000"</span> <span class="c">#Total Gross Amount</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">referenceNo</span> <span class="o">=</span> <span class="s">"NiceTest00003"</span> <span class="c">#Invoice Number By Merchant</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">goodsNm</span> <span class="o">=</span> <span class="n">NICEPay</span><span class="o">.</span><span class="n">referenceNo</span> <span class="c">#Goods Name</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingNm</span> <span class="o">=</span> <span class="s">"John Doe"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingPhone</span> <span class="o">=</span> <span class="s">"02112345678"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingEmail</span> <span class="o">=</span> <span class="s">"john@example.co`m"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingAddr</span> <span class="o">=</span> <span class="s">"Jl. Jend. Sudirman No. 28"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingCity</span> <span class="o">=</span> <span class="s">"Jakarta Pusat"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingState</span> <span class="o">=</span> <span class="s">"DKI Jakarta"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingPostCd</span> <span class="o">=</span> <span class="s">"10210"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingCountry</span> <span class="o">=</span> <span class="s">"Indonesia"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">callBackUrl</span> <span class="o">=</span> <span class="s">"http://example.com/callback"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">dbProcessUrl</span> <span class="o">=</span> <span class="s">"https://example.com/notification-handler.php"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s">"Payment Of Ref No."</span> <span class="o">+</span> <span class="n">NICEPay</span><span class="o">.</span><span class="n">referenceNo</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">merchantToken</span> <span class="o">=</span> <span class="n">NICEPay</span><span class="o">.</span><span class="n">getMerchantToken</span><span class="p">()</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">userIP</span> <span class="o">=</span> <span class="n">NICEPay</span><span class="o">.</span><span class="n">getUserIp</span><span class="p">()</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">cartData</span> <span class="o">=</span> <span class="s">"{}"</span> <span class="c">#Json Array Value</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">mitraCd</span> <span class="o">=</span> <span class="s">"INDO"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">payValidDt</span> <span class="o">=</span> <span class="s">"20160303"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">payValidTm</span> <span class="o">=</span> <span class="s">"135959"</span>



<span class="c"># // Payment Request</span>
<span class="n">resultData</span> <span class="o">=</span> <span class="n">NICEPay</span><span class="o">.</span><span class="n">apiRequest</span><span class="p">()</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">resultData</span><span class="p">)</span>

<span class="c">#Payment Response String Format</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">result</span><span class="p">[</span><span class="s">'resultCd'</span><span class="p">]</span>
<span class="k">except</span> <span class="nb">NameError</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">"Connection Timeout. Please Try Again!"</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">result</span><span class="p">[</span><span class="s">'resultCd'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'0000'</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"resultCd : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'resultCd'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"resultMsg : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'resultMsg'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"tXid : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'tXid'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"referenceNo : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'referenceNo'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"payMethod : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'payMethod'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"amount : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'amount'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"transDt : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'transDt'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"transTm : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'transTm'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"description : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'description'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"callbackUrl : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'callbackUrl'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"payNo : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'payNo'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"mitraCd : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'mitraCd'</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"resultCd : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'resultCd'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"resultMsg : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'resultMsg'</span><span class="p">])</span>
</code></pre> <blockquote> <p>Contoh JSON Response</p> </blockquote> <pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"resultCd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"goodsNm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test Transaction Nicepay"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"referenceNo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"99997"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"transTm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"110847"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mitraCd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ALMA"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tXid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TESTIDTEST03201803011108471311"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Payment of referenceNo 99997,This Description"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"resultMsg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billingNm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Thomas Alfa Edison"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payNo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"011108471311"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payValidTm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"235959"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payMethod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"03"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"callbackUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.merchant.com/callbackUrl"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payValidDt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20180308"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IDR"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"transDt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20180301"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre> <table><thead> <tr> <th>&nbsp;</th> <th>&nbsp;</th> </tr> </thead><tbody> <tr> <td><strong>API url</strong></td> <td><strong>/nicepay/api/onePass.do</strong></td> </tr> <tr> <td>Metode</td> <td>POST</td> </tr> <tr> <td>Deskripsi</td> <td>Convenience Store (CVS) Transaction</td> </tr> <tr> <td>Merchant Token</td> <td>SHA256 (Merchant ID + Reference Number + Amount + Merchant Key)</td> </tr> </tbody></table> <p><strong>Request POST Parameter</strong></p> <table><thead> <tr> <th>Parameter</th> <th>Mandatory</th> <th>Tipe</th> <th>Ukuran</th> <th>Deskripsi</th> </tr> </thead><tbody> <tr> <td>iMid</td> <td>Y</td> <td>AN</td> <td>10</td> <td>Merchant ID</td> </tr> <tr> <td>payMethod</td> <td>Y</td> <td>AN</td> <td>2</td> <td>Pay Method, refer to <a href="#payment-method">here</a></td> </tr> <tr> <td>currency</td> <td>Y</td> <td>AN</td> <td>3</td> <td>Currency</td> </tr> <tr> <td>amt</td> <td>Y</td> <td>N</td> <td>12</td> <td>Goods Amount</td> </tr> <tr> <td>referenceNo</td> <td>Y</td> <td>AN</td> <td>40</td> <td>Merchant Order No</td> </tr> <tr> <td>goodsNm</td> <td>Y</td> <td>AN</td> <td>100</td> <td>Goods Name</td> </tr> <tr> <td>billingNm</td> <td>Y</td> <td>A</td> <td>30</td> <td>Billing Name</td> </tr> <tr> <td>billingPhone</td> <td>Y</td> <td>N</td> <td>15</td> <td>Billing Phone Number</td> </tr> <tr> <td>billingEmail</td> <td>Y</td> <td>AN</td> <td>40</td> <td>Billing Email</td> </tr> <tr> <td>billingCity</td> <td>Y</td> <td>A</td> <td>50</td> <td>Billing City</td> </tr> <tr> <td>billingState</td> <td>Y</td> <td>A</td> <td>50</td> <td>Billing State</td> </tr> <tr> <td>billingPostCd</td> <td>Y</td> <td>N</td> <td>10</td> <td>Billing Post Number</td> </tr> <tr> <td>billingCountry</td> <td>Y</td> <td>A</td> <td>10</td> <td>Billing Country</td> </tr> <tr> <td>callBackUrl</td> <td>Y</td> <td>AN</td> <td>255</td> <td>Payment Result Forward Url (On Browser)</td> </tr> <tr> <td>dbProcessUrl</td> <td>Y</td> <td>AN</td> <td>255</td> <td>Payment Result Receive Url (Server Side)</td> </tr> <tr> <td>description</td> <td>Y</td> <td>AN</td> <td>100</td> <td>Description</td> </tr> <tr> <td>merchantToken</td> <td>Y</td> <td>AN</td> <td>255</td> <td>Merchant Token</td> </tr> <tr> <td>userIP</td> <td>Y</td> <td>AN</td> <td>15</td> <td>User IP (Customer)</td> </tr> <tr> <td>cartData</td> <td>Y</td> <td>AN</td> <td>4000</td> <td>Cart Data (Json Format)</td> </tr> <tr> <td>mitraCd</td> <td>Y</td> <td>AN</td> <td>4</td> <td>Mitra Code, refer to <a href="#mitra-code">here</a></td> </tr> <tr> <td>billingAddr</td> <td>N</td> <td>100</td> <td>AN</td> <td>Billing Address</td> </tr> <tr> <td>deliveryNm</td> <td>N</td> <td>A</td> <td>30</td> <td>Delivery Name</td> </tr> <tr> <td>deliveryPhone</td> <td>N</td> <td>N</td> <td>15</td> <td>Delivery Phone</td> </tr> <tr> <td>deliveryAddr</td> <td>N</td> <td>AN</td> <td>100</td> <td>Delivery Address</td> </tr> <tr> <td>deliveryEmail</td> <td>N</td> <td>AN</td> <td>&nbsp;</td> <td>Delivery Email</td> </tr> <tr> <td>deliveryCity</td> <td>N</td> <td>A</td> <td>50</td> <td>Delivery City</td> </tr> <tr> <td>deliveryState</td> <td>N</td> <td>A</td> <td>50</td> <td>Delivery State</td> </tr> <tr> <td>deliveryPostCd</td> <td>N</td> <td>N</td> <td>10</td> <td>Delivery Post Number</td> </tr> <tr> <td>deliveryCountry</td> <td>N</td> <td>A</td> <td>10</td> <td>Delivery Country</td> </tr> <tr> <td>vat</td> <td>N</td> <td>N</td> <td>12</td> <td>Vat</td> </tr> <tr> <td>fee</td> <td>N</td> <td>N</td> <td>12</td> <td>Service Tax</td> </tr> <tr> <td>notaxAmt</td> <td>N</td> <td>N</td> <td>12</td> <td>Tax Free Amount</td> </tr> <tr> <td>reqDt</td> <td>N</td> <td>N</td> <td>8</td> <td>Request Date(YYYYMMDD)</td> </tr> <tr> <td>reqTm</td> <td>N</td> <td>N</td> <td>6</td> <td>Request Time(HH24MISS)</td> </tr> <tr> <td>reqDomain</td> <td>N</td> <td>AN</td> <td>100</td> <td>Request Domain</td> </tr> <tr> <td>reqServerIP</td> <td>N</td> <td>AN</td> <td>15</td> <td>Request Server IP</td> </tr> <tr> <td>reqClientVer</td> <td>N</td> <td>AN</td> <td>50</td> <td>Request Client Version</td> </tr> <tr> <td>userSessionID</td> <td>N</td> <td>AN</td> <td>100</td> <td>User Session ID</td> </tr> <tr> <td>userAgent</td> <td>N</td> <td>AN</td> <td>100</td> <td>User Agent Information</td> </tr> <tr> <td>userLanguage</td> <td>N</td> <td>AN</td> <td>2</td> <td>User Language</td> </tr> <tr> <td>payValidDt</td> <td>N</td> <td>N</td> <td>8</td> <td>CVS expiry date (YYYYMMDD)</td> </tr> <tr> <td>payValidTm</td> <td>N</td> <td>N</td> <td>6</td> <td>CVS expiry time (HH24MISS)</td> </tr> </tbody></table> <p><br><strong>Response JSON Object</strong></p> <table><thead> <tr> <th>Parameter</th> <th>Tipe</th> <th>Ukuran</th> <th>Deskripsi</th> </tr> </thead><tbody> <tr> <td>resultCd</td> <td>N</td> <td>4</td> <td>Result Code</td> </tr> <tr> <td>resultMsg</td> <td>AN</td> <td>255</td> <td>Result Message</td> </tr> <tr> <td>tXid</td> <td>AN</td> <td>30</td> <td>Transaction ID</td> </tr> <tr> <td>referenceNo</td> <td>ANS</td> <td>40</td> <td>Merchant Order No</td> </tr> <tr> <td>payMethod</td> <td>N</td> <td>2</td> <td>Payment Method. Refer Code at <a href="#payment-method">Here</a></td> </tr> <tr> <td>amount</td> <td>N</td> <td>12</td> <td>Transaction Amount</td> </tr> <tr> <td>currency</td> <td>AN</td> <td>3</td> <td>Currency</td> </tr> <tr> <td>goodsNm</td> <td>N</td> <td>100</td> <td>Goods Name</td> </tr> <tr> <td>billingNm</td> <td>N</td> <td>30</td> <td>Buyer Name</td> </tr> <tr> <td>transDt</td> <td>N</td> <td>8</td> <td>Transaction date (YYYYMMDD)</td> </tr> <tr> <td>description</td> <td>N</td> <td>100</td> <td>Transaction description</td> </tr> <tr> <td>callbackUrl</td> <td>N</td> <td>100</td> <td>Callback Url</td> </tr> <tr> <td>mitraCd</td> <td>AN</td> <td>4</td> <td>Mitra Code, refer to <a href="#mitra-code">Link</a></td> </tr> <tr> <td>payNo</td> <td>N</td> <td>16</td> <td>CVS Number</td> </tr> <tr> <td>payValidTm</td> <td>N</td> <td>8</td> <td>CVS Expiry Time (HH24MISS)</td> </tr> <tr> <td>payValidDt</td> <td>N</td> <td>6</td> <td>CVS Expiry Date (YYYYMMDD)</td> </tr> </tbody></table> <h1 id=enterprise-clickpay>Enterprise - ClickPay</h1> <p>NICEPay menawarkan <strong>ClickPay</strong> sebagai metode pembayaran. Pemberitahuan Real Time akan dikirim saat pelanggan menyelesaikan pembayaran.<br> ClickPay yang didukung oleh NICEPay: <ol type=1> <li>Mandiri Clickpay <li>CIMB Clicks <li>BCA KlikPay </ol></p> <p>Proses Integrasi : <ol type=1> <li>Merchant meminta registrasi ClickPay ke NICEPay. <li>NICEPay redirect ke halaman Bank. <li>Pelanggan membayarkan ClickPay. <li>NICEPay kirim notifikasi. <li>Merchant handle notifikasi. </ol></p> <h2 id=clickpay-flow>ClickPay Flow</h2> <p>Flow for Enterprise - ClickPay<br> <img src="images/ent-clickpay-flow-266e2006.png"></p> <h2 id=registrasi-klikpay>Registrasi KlikPay</h2><pre class="highlight java tab-java"><code><span class="c1">// Payment Mandatory Field</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setPayMethod</span><span class="o">(</span><span class="s">"04"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="s">"IDR"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setAmt</span><span class="o">(</span><span class="s">"1000"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setReferenceNo</span><span class="o">(</span><span class="s">"MerchantReferenceNumber001"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setMitraCd</span><span class="o">(</span><span class="s">"MDRC"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setGoodsNm</span><span class="o">(</span><span class="s">"Merchant Goods 1"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingNm</span><span class="o">(</span><span class="s">"Buyer Name"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingEmail</span><span class="o">(</span><span class="s">"buyer@merchant.com"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingPhone</span><span class="o">(</span><span class="s">"02112345678"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingAddr</span><span class="o">(</span><span class="s">"Billing Address"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingCity</span><span class="o">(</span><span class="s">"Jakarta"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingState</span><span class="o">(</span><span class="s">"Jakarta"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingPostCd</span><span class="o">(</span><span class="s">"12345"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setBillingCountry</span><span class="o">(</span><span class="s">"Indonesia"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryNm</span><span class="o">(</span><span class="s">"Buyer Name "</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryPhone</span><span class="o">(</span><span class="s">"02112345678"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryAddr</span><span class="o">(</span><span class="s">"Billing Address "</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryCity</span><span class="o">(</span><span class="s">"Jakarta "</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryState</span><span class="o">(</span><span class="s">"Jakarta "</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryPostCd</span><span class="o">(</span><span class="s">"12345"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDeliveryCountry</span><span class="o">(</span><span class="s">"Indonesia "</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setCallBackUrl</span><span class="o">(</span><span class="n">merchantDomain</span> <span class="o">+</span> <span class="s">"callback"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDbProcessUrl</span><span class="o">(</span><span class="n">merchantDomain</span> <span class="o">+</span> <span class="s">"dbprocess"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setVat</span><span class="o">(</span><span class="s">"0"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setFee</span><span class="o">(</span><span class="s">"0"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setNotaxAmt</span><span class="o">(</span><span class="s">"0"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDescription</span><span class="o">(</span><span class="s">"Description"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setUserIP</span><span class="o">(</span><span class="s">"127.0.0.1"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setMerchantToken</span><span class="o">(</span><span class="n">nicePay</span><span class="o">.</span><span class="na">makeToken</span><span class="o">(</span><span class="n">nicePay</span><span class="o">.</span><span class="na">getAmt</span><span class="o">(),</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">getReferenceNo</span><span class="o">()));</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setCartData</span><span class="o">(</span><span class="s">"{}"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setClickPayNo</span><span class="o">(</span><span class="s">"1234567890123456"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setClickPayToken</span><span class="o">(</span><span class="s">"000000"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setDataField3</span><span class="o">(</span><span class="s">"3"</span><span class="o">);</span>

<span class="c1">// Payment Optional Field</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setReqDt</span><span class="o">(</span><span class="s">"20160301"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setReqTm</span><span class="o">(</span><span class="s">"135959"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setReqDomain</span><span class="o">(</span><span class="s">"merchant.com"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setReqServerIP</span><span class="o">(</span><span class="s">"127.0.0.1"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setReqClientVer</span><span class="o">(</span><span class="s">"1.0"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setUserSessionID</span><span class="o">(</span><span class="s">"userSessionID"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setUserAgent</span><span class="o">(</span><span class="s">"Mozilla"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setUserLanguage</span><span class="o">(</span><span class="s">"en-US"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setMerFixAcctId</span><span class="o">(</span><span class="s">"9999000000000001"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setPaymentExpiryDt</span><span class="o">(</span><span class="s">"20160303"</span><span class="o">);</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setPaymentExpiryTm</span><span class="o">(</span><span class="s">"135959"</span><span class="o">);</span>


<span class="c1">// Payment Request</span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">payment</span><span class="o">();</span>

<span class="c1">// Payment Response</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response String : "</span> <span class="o">+</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">getResponseString</span><span class="o">());</span> <span class="c1">// JSON in String format</span>

<span class="n">String</span> <span class="n">resultCd</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"resultCd"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">resultMsg</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"resultMsg"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">tXid</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"tXid "</span><span class="o">);</span>
<span class="n">String</span> <span class="n">referenceNo</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"referenceNo"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">receiptCode</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"receiptCode"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">payMethod</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"payMethod"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">amount</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"amount"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">transDt</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"transDt "</span><span class="o">);</span>
<span class="n">String</span> <span class="n">transTm</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"transTm "</span><span class="o">);</span>
<span class="n">String</span> <span class="n">description</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"description"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">callbackUrl</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"callbackUrl"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">mitraCd</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"mitraCd"</span><span class="o">);</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">protected</span> <span class="k">void</span> <span class="nf">CheckOut</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(!</span><span class="kt">string</span><span class="p">.</span><span class="nf">IsNullOrEmpty</span><span class="p">(</span><span class="n">BankCd</span><span class="p">.</span><span class="n">SelectedValue</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">currency</span> <span class="p">=</span> <span class="s">"IDR"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">DateNow</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"yyyymmdd"</span><span class="p">);</span>
        <span class="c1">// Set VA expiry date +1 day (optional)</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">vaExpDate</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="nf">AddDays</span><span class="p">(</span><span class="m">1</span><span class="p">).</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"yyyymmdd"</span><span class="p">);</span>
        <span class="c1">//Populate Mandatory parameters to send</span>
        <span class="c1">// payment type Bank</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">PayMethod</span> <span class="p">=</span> <span class="s">"04"</span><span class="p">;</span>
        <span class="c1">// Total gross amount</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">amt</span> <span class="p">=</span> <span class="s">"10000"</span><span class="p">;</span>
        <span class="c1">// Invoice Number or Referenc Number Generated by merchant</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">referenceNo</span> <span class="p">=</span> <span class="nf">generateReference</span><span class="p">();</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">description</span> <span class="p">=</span> <span class="s">"Payment Invoice No. "</span> <span class="p">+</span> <span class="n">objNicepay</span><span class="p">.</span><span class="n">referenceNo</span><span class="p">;</span>
        <span class="c1">// Transaction description</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingNm</span> <span class="p">=</span> <span class="s">"Donald Duck"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingPhone</span> <span class="p">=</span> <span class="s">"021987456321"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingEmail</span> <span class="p">=</span> <span class="s">"donald@duck.com"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingAddr</span> <span class="p">=</span> <span class="s">"King of money street"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingCity</span> <span class="p">=</span> <span class="s">"King"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingState</span> <span class="p">=</span> <span class="s">"Money"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingPostCd</span> <span class="p">=</span> <span class="s">"123654"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">billingCountry</span> <span class="p">=</span> <span class="s">"Indonesia"</span><span class="p">;</span>

        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryNm</span> <span class="p">=</span> <span class="s">"Donald Duck"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryPhone</span> <span class="p">=</span> <span class="s">"021987456321"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryEmail</span> <span class="p">=</span> <span class="s">"donald@duck.com"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryAddr</span> <span class="p">=</span> <span class="s">"King of money street"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryCity</span> <span class="p">=</span> <span class="s">"King"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryState</span> <span class="p">=</span> <span class="s">"Money"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryPostCd</span> <span class="p">=</span> <span class="s">"123654"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">deliveryCountry</span> <span class="p">=</span> <span class="s">"Indonesia"</span><span class="p">;</span>

        <span class="n">objNicepay</span><span class="p">.</span><span class="n">MitraCd</span> <span class="p">=</span> <span class="s">"MDRC"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">clickPayNo</span> <span class="p">=</span> <span class="s">"1234567890123456"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">clickPayToken</span> <span class="p">=</span> <span class="s">"000000"</span><span class="p">;</span>
        <span class="n">objNicepay</span><span class="p">.</span><span class="n">dataField3</span> <span class="p">=</span> <span class="s">"3"</span><span class="p">;</span>


        <span class="n">objResult</span> <span class="p">=</span> <span class="n">objNicepayClass</span><span class="p">.</span><span class="nf">CreateCVS</span><span class="p">(</span><span class="n">objNicepay</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">objResult</span><span class="p">.</span><span class="n">resultCd</span> <span class="p">==</span> <span class="s">"0000"</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Tresult</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">resultCd</span><span class="p">;</span>
            <span class="n">TtXid</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">tXid</span><span class="p">;</span>
            <span class="n">TcallbackUrl</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">callbackUrl</span><span class="p">;</span>
            <span class="n">Tdescription</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">description</span><span class="p">;</span>
            <span class="n">TreferenceNo</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">referenceNo</span><span class="p">;</span>
            <span class="n">TpayMethod</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">payMethod</span><span class="p">;</span>
            <span class="c1">//YYMMDD</span>
            <span class="n">TtransDT</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">transDt</span><span class="p">;</span>
            <span class="c1">//HH24MISS</span>
            <span class="n">TTranstm</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">transTm</span><span class="p">;</span>
            <span class="n">receiptCode</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">receiptCode</span><span class="p">;</span>
            <span class="n">TresultMsg</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">resultMsg</span><span class="p">;</span>
            <span class="n">mitraCd</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">mitraCd</span><span class="p">;</span>
            <span class="n">amount</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">amount</span><span class="p">;</span>
            <span class="n">wrapper</span><span class="p">.</span><span class="n">Visible</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="n">Myresult</span><span class="p">.</span><span class="n">Visible</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">objResult</span><span class="p">.</span><span class="n">resultCd</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">//API data Not correct, you can redirect back to checkout page Or echo error message.</span>
            <span class="c1">//In this sample, we echo error message</span>
            <span class="n">EresultCd</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">resultCd</span><span class="p">;</span>
            <span class="n">EresultMsg</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">resultMsg</span><span class="p">;</span>
            <span class="n">wrapper</span><span class="p">.</span><span class="n">Visible</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="n">ErrData</span><span class="p">.</span><span class="n">Visible</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="c1">//Timeout, you can redirect back to checkout page Or echo error message.</span>
            <span class="c1">//In this sample, we echo error message</span>
            <span class="n">ERR_</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="s">"Connection Timeout. Please Try again."</span><span class="p">;</span>
            <span class="n">wrapper</span><span class="p">.</span><span class="n">Visible</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="n">ERR</span><span class="p">.</span><span class="n">Visible</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="c1">// Include Config File
</span><span class="k">include_once</span> <span class="s2">"lib/NicepayLib.php"</span><span class="p">;</span>
<span class="nv">$nicepay</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NicepayLib</span><span class="p">();</span>

<span class="k">function</span> <span class="nf">generateReference</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$micro_date</span> <span class="o">=</span> <span class="nb">microtime</span><span class="p">();</span>
    <span class="nv">$date_array</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s2">" "</span><span class="p">,</span><span class="nv">$micro_date</span><span class="p">);</span>
    <span class="nv">$date</span> <span class="o">=</span> <span class="nb">date</span><span class="p">(</span><span class="s2">"YmdHis"</span><span class="p">,</span><span class="nv">$date_array</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="nv">$date_array</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">preg_replace</span><span class="p">(</span><span class="s1">'/[^\p{L}\p{N}\s]/u'</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="nv">$date_array</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="k">return</span> <span class="s2">"Ref"</span><span class="o">.</span><span class="nv">$date</span><span class="o">.</span><span class="nv">$date_array</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="nb">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">999</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">if</span><span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'payMethod'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'payMethod'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'04'</span>
    <span class="o">&amp;&amp;</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'mitraCd'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'mitraCd'</span><span class="p">])</span>
<span class="p">{</span>
  <span class="nv">$billingNm</span>      <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'billingNm'</span><span class="p">];</span>
  <span class="nv">$referenceNo</span>    <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'referenceNo'</span><span class="p">];</span>
  <span class="nv">$mitraCd</span>         <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'mitraCd'</span><span class="p">];</span>

  <span class="c1">// Populate Mandatory parameters to send
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'payMethod'</span><span class="p">,</span> <span class="s1">'04'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'currency'</span><span class="p">,</span> <span class="s1">'IDR'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'amt'</span><span class="p">,</span> <span class="mi">10000</span><span class="p">);</span> <span class="c1">// Total gross amount
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'referenceNo'</span><span class="p">,</span> <span class="nv">$referenceNo</span><span class="p">);</span> <span class="c1">// Invoice Number or Reference Number Generated by merchant
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'description'</span><span class="p">,</span> <span class="s1">'Payment of Invoice No '</span><span class="o">.</span><span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'referenceNo'</span><span class="p">));</span> <span class="c1">// Transaction description
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'mitraCd'</span><span class="p">,</span> <span class="nv">$mitraCd</span><span class="p">);</span>

  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingNm'</span><span class="p">,</span> <span class="s1">'John Doe'</span><span class="p">);</span> <span class="c1">// Customer name
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingPhone'</span><span class="p">,</span> <span class="s1">'02112345678'</span><span class="p">);</span> <span class="c1">// Customer phone number
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingEmail'</span><span class="p">,</span> <span class="s1">'john@example.com'</span><span class="p">);</span> <span class="c1">//
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingAddr'</span><span class="p">,</span> <span class="s1">'Jl. Jend. Sudirman No. 28'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingCity'</span><span class="p">,</span> <span class="s1">'Jakarta Pusat'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingState'</span><span class="p">,</span> <span class="s1">'DKI Jakarta'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingPostCd'</span><span class="p">,</span> <span class="s1">'10210'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'billingCountry'</span><span class="p">,</span> <span class="s1">'Indonesia'</span><span class="p">);</span>

  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryNm'</span><span class="p">,</span> <span class="s1">'John Doe'</span><span class="p">);</span> <span class="c1">// Delivery name
</span>  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryPhone'</span><span class="p">,</span> <span class="s1">'02112345678'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryEmail'</span><span class="p">,</span> <span class="s1">'john@example.com'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryAddr'</span><span class="p">,</span> <span class="s1">'Jl. Jend. Sudirman No. 28'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryCity'</span><span class="p">,</span> <span class="s1">'Jakarta Pusat'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryState'</span><span class="p">,</span> <span class="s1">'DKI Jakarta'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryPostCd'</span><span class="p">,</span> <span class="s1">'10210'</span><span class="p">);</span>
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'deliveryCountry'</span><span class="p">,</span> <span class="s1">'Indonesia'</span><span class="p">);</span>

  <span class="c1">// Send Data
</span>  <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">requestClickPay</span><span class="p">();</span>

  <span class="c1">// Response from NICEPAY
</span>  <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">resultCd</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">resultCd</span> <span class="o">==</span> <span class="s2">"0000"</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"tXid              : </span><span class="nv">$response-&gt;tXid</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"callbackUrl       : </span><span class="nv">$response-&gt;callbackUrl</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"description       : </span><span class="nv">$response-&gt;description</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"payment date      : </span><span class="nv">$response-&gt;transDt</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span> <span class="c1">// YYYYMMDD
</span>    <span class="k">echo</span> <span class="s2">"payment time      : </span><span class="nv">$response-&gt;transTm</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span> <span class="c1">// HH24MISS
</span>    <span class="k">echo</span> <span class="s2">"receipt Code      : </span><span class="nv">$response-&gt;receiptCode</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"result code       : </span><span class="nv">$response-&gt;resultCd</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"result message    : </span><span class="nv">$response-&gt;resultMsg</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"reference no      : </span><span class="nv">$response-&gt;referenceNo</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"payment method    : </span><span class="nv">$response-&gt;payMethod</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">elseif</span><span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">resultCd</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// API data not correct or error happened in bank system, you can redirect back to checkout page or echo error message.
</span>    <span class="c1">// In this sample, we echo error message
</span>    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"Oops! Something happened, please notice your system administrator.</span><span class="se">\n\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"result code       : </span><span class="nv">$response-&gt;resultCd</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"result message    : </span><span class="nv">$response-&gt;resultMsg</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// Timeout, you can redirect back to checkout page or echo error message.
</span>    <span class="c1">// In this sample, we echo error message
</span>    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;Connection Timeout. Please Try again.&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">json</span>

<span class="kn">from</span> <span class="nn">nicepay</span> <span class="kn">import</span> <span class="n">NICEPay</span>

<span class="c">#Set MID &amp; Merchant Key</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">iMid</span> <span class="o">=</span> <span class="s">"BMRITEST01"</span> <span class="c">#Set Merchant ID</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">merchantKey</span> <span class="o">=</span> <span class="s">"33F49GnCMS1mFYlGXisbUDzVf2ATWCl9k3R++d5hDd3Frmuos/XLx8XhXpe+LDYAbpGKZYSwtlyyLOtS/8aD7A=="</span> <span class="c">#Set Merchant Key</span>

<span class="c">#Set Mandatory Value</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">payMethod</span> <span class="o">=</span> <span class="s">"04"</span> <span class="c">#Set Payment Method</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">amt</span> <span class="o">=</span> <span class="s">"1000"</span> <span class="c">#Total Gross Amount</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">referenceNo</span> <span class="o">=</span> <span class="s">"NiceTest00003"</span> <span class="c">#Invoice Number By Merchant</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">goodsNm</span> <span class="o">=</span> <span class="n">NICEPay</span><span class="o">.</span><span class="n">referenceNo</span> <span class="c">#Goods Name</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingNm</span> <span class="o">=</span> <span class="s">"John Doe"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingPhone</span> <span class="o">=</span> <span class="s">"02112345678"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingEmail</span> <span class="o">=</span> <span class="s">"john@example.co`m"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingAddr</span> <span class="o">=</span> <span class="s">"Jl. Jend. Sudirman No. 28"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingCity</span> <span class="o">=</span> <span class="s">"Jakarta Pusat"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingState</span> <span class="o">=</span> <span class="s">"DKI Jakarta"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingPostCd</span> <span class="o">=</span> <span class="s">"10210"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">billingCountry</span> <span class="o">=</span> <span class="s">"Indonesia"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">callBackUrl</span> <span class="o">=</span> <span class="s">"http://example.com/callback"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">dbProcessUrl</span> <span class="o">=</span> <span class="s">"https://example.com/notification-handler.php"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s">"Payment Of Ref No."</span> <span class="o">+</span> <span class="n">NICEPay</span><span class="o">.</span><span class="n">referenceNo</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">merchantToken</span> <span class="o">=</span> <span class="n">NICEPay</span><span class="o">.</span><span class="n">getMerchantToken</span><span class="p">()</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">userIP</span> <span class="o">=</span> <span class="n">NICEPay</span><span class="o">.</span><span class="n">getUserIp</span><span class="p">()</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">cartData</span> <span class="o">=</span> <span class="s">"{}"</span> <span class="c">#Json Array Value</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">mitraCd</span> <span class="o">=</span> <span class="s">"MDRC"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">clickPayNo</span> <span class="o">=</span> <span class="s">"1234567890123456"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">clickPayToken</span> <span class="o">=</span> <span class="s">"000000"</span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">dataField3</span> <span class="o">=</span> <span class="s">"3"</span>



<span class="c"># // Payment Request</span>
<span class="n">resultData</span> <span class="o">=</span> <span class="n">NICEPay</span><span class="o">.</span><span class="n">apiRequest</span><span class="p">()</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">resultData</span><span class="p">)</span>

<span class="c">#Payment Response String Format</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">result</span><span class="p">[</span><span class="s">'resultCd'</span><span class="p">]</span>
<span class="k">except</span> <span class="nb">NameError</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">"Connection Timeout. Please Try Again!"</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">result</span><span class="p">[</span><span class="s">'resultCd'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'0000'</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"resultCd : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'resultCd'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"resultMsg : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'resultMsg'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"tXid : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'tXid'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"referenceNo : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'referenceNo'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"payMethod : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'payMethod'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"amount : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'amount'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"transDt : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'transDt'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"transTm : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'transTm'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"description : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'description'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"callbackUrl : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'callbackUrl'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"receiptCode : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'receiptCode'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"mitraCd : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'mitraCd'</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"resultCd : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'resultCd'</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"resultMsg : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'resultMsg'</span><span class="p">])</span>
</code></pre> <blockquote> <p>Contoh JSON Response</p> </blockquote> <pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"resultCd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"goodsNm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test Transaction Nicepay"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"referenceNo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"99997"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"transTm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"113152"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mitraCd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MDRC"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tXid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TESTIDTEST04201803011131521855"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Payment of referenceNo 99997"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"receiptCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1831B3127001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"resultMsg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billingNm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Customer Name"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mRefNo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"201803011131521884"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payMethod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"callbackUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.merchant.com/callbackUrl"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IDR"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"transDt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20180301"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre> <table><thead> <tr> <th>&nbsp;</th> <th>&nbsp;</th> </tr> </thead><tbody> <tr> <td><strong>API url</strong></td> <td><strong>/nicepay/api/onePass.do</strong></td> </tr> <tr> <td>Metode</td> <td>POST</td> </tr> <tr> <td>Deskripsi</td> <td>ClickPay Transaction</td> </tr> <tr> <td>Merchant Token</td> <td>SHA256 (Merchant ID + Reference Number + Amount + Merchant Key)</td> </tr> </tbody></table> <p><br><strong>Request POST Parameter</strong></p> <table><thead> <tr> <th>Parameter</th> <th>Mandatory</th> <th>Tipe</th> <th>Ukuran</th> <th>Deskripsi</th> </tr> </thead><tbody> <tr> <td>iMid</td> <td>Y</td> <td>AN</td> <td>10</td> <td>Merchant ID</td> </tr> <tr> <td>payMethod</td> <td>Y</td> <td>AN</td> <td>2</td> <td>Pay Method, refer to <a href="#payment-method">here</a></td> </tr> <tr> <td>currency</td> <td>Y</td> <td>AN</td> <td>3</td> <td>Currency</td> </tr> <tr> <td>amt</td> <td>Y</td> <td>N</td> <td>12</td> <td>Goods Amount</td> </tr> <tr> <td>referenceNo</td> <td>Y</td> <td>AN</td> <td>40</td> <td>Merchant Order No</td> </tr> <tr> <td>goodsNm</td> <td>Y</td> <td>AN</td> <td>100</td> <td>Goods Name</td> </tr> <tr> <td>billingNm</td> <td>Y</td> <td>A</td> <td>30</td> <td>Billing Name</td> </tr> <tr> <td>billingPhone</td> <td>Y</td> <td>N</td> <td>15</td> <td>Billing Phone Number</td> </tr> <tr> <td>billingEmail</td> <td>Y</td> <td>AN</td> <td>40</td> <td>Billing Email</td> </tr> <tr> <td>billingCity</td> <td>Y</td> <td>A</td> <td>50</td> <td>Billing City</td> </tr> <tr> <td>billingState</td> <td>Y</td> <td>A</td> <td>50</td> <td>Billing State</td> </tr> <tr> <td>billingPostCd</td> <td>Y</td> <td>N</td> <td>10</td> <td>Billing Post Number</td> </tr> <tr> <td>billingCountry</td> <td>Y</td> <td>A</td> <td>10</td> <td>Billing Country</td> </tr> <tr> <td>callBackUrl</td> <td>Y</td> <td>AN</td> <td>255</td> <td>Payment Result Forward Url (On Browser)</td> </tr> <tr> <td>dbProcessUrl</td> <td>Y</td> <td>AN</td> <td>255</td> <td>Payment Result Receive Url (Server Side)</td> </tr> <tr> <td>description</td> <td>Y</td> <td>AN</td> <td>100</td> <td>Description</td> </tr> <tr> <td>merchantToken</td> <td>Y</td> <td>AN</td> <td>255</td> <td>Merchant Token</td> </tr> <tr> <td>userIP</td> <td>Y</td> <td>AN</td> <td>15</td> <td>User IP (Customer)</td> </tr> <tr> <td>cartData</td> <td>Y</td> <td>AN</td> <td>4000</td> <td>Cart Data (Json Format)</td> </tr> <tr> <td>mitraCd</td> <td>Y</td> <td>AN</td> <td>4</td> <td>Mitra Code, refer to <a href="#mitra-code">here</a></td> </tr> <tr> <td>clickPayNo</td> <td>Y</td> <td>N</td> <td>16</td> <td>Clickpay card number</td> </tr> <tr> <td>dataField3</td> <td>Y</td> <td>N</td> <td>16</td> <td>Token input 3 for Clickpay</td> </tr> <tr> <td>clickPayToken</td> <td>Y</td> <td>N</td> <td>6</td> <td>Code response from token</td> </tr> <tr> <td>billingAddr</td> <td>N</td> <td>100</td> <td>AN</td> <td>Billing Address</td> </tr> <tr> <td>deliveryNm</td> <td>N</td> <td>A</td> <td>30</td> <td>Delivery Name</td> </tr> <tr> <td>deliveryPhone</td> <td>N</td> <td>N</td> <td>15</td> <td>Delivery Phone</td> </tr> <tr> <td>deliveryAddr</td> <td>N</td> <td>AN</td> <td>100</td> <td>Delivery Address</td> </tr> <tr> <td>deliveryEmail</td> <td>N</td> <td>AN</td> <td>&nbsp;</td> <td>Delivery Email</td> </tr> <tr> <td>deliveryCity</td> <td>N</td> <td>A</td> <td>50</td> <td>Delivery City</td> </tr> <tr> <td>deliveryState</td> <td>N</td> <td>A</td> <td>50</td> <td>Delivery State</td> </tr> <tr> <td>deliveryPostCd</td> <td>N</td> <td>N</td> <td>10</td> <td>Delivery Post Number</td> </tr> <tr> <td>deliveryCountry</td> <td>N</td> <td>A</td> <td>10</td> <td>Delivery Country</td> </tr> <tr> <td>vat</td> <td>N</td> <td>N</td> <td>12</td> <td>Vat</td> </tr> <tr> <td>fee</td> <td>N</td> <td>N</td> <td>12</td> <td>Service Tax</td> </tr> <tr> <td>notaxAmt</td> <td>N</td> <td>N</td> <td>12</td> <td>Tax Free Amount</td> </tr> <tr> <td>reqDt</td> <td>N</td> <td>N</td> <td>8</td> <td>Request Date(YYYYMMDD)</td> </tr> <tr> <td>reqTm</td> <td>N</td> <td>N</td> <td>6</td> <td>Request Time(HH24MISS)</td> </tr> <tr> <td>reqDomain</td> <td>N</td> <td>AN</td> <td>100</td> <td>Request Domain</td> </tr> <tr> <td>reqServerIP</td> <td>N</td> <td>AN</td> <td>15</td> <td>Request Server IP</td> </tr> <tr> <td>reqClientVer</td> <td>N</td> <td>AN</td> <td>50</td> <td>Request Client Version</td> </tr> <tr> <td>userSessionID</td> <td>N</td> <td>AN</td> <td>100</td> <td>User Session ID</td> </tr> <tr> <td>userAgent</td> <td>N</td> <td>AN</td> <td>100</td> <td>User Agent Information</td> </tr> <tr> <td>userLanguage</td> <td>N</td> <td>AN</td> <td>2</td> <td>User Language</td> </tr> </tbody></table> <p><br><strong>Response JSON Object</strong></p> <table><thead> <tr> <th>Parameter</th> <th>Tipe</th> <th>Ukuran</th> <th>Deskripsi</th> </tr> </thead><tbody> <tr> <td>resultCd</td> <td>N</td> <td>4</td> <td>Result Code</td> </tr> <tr> <td>resultMsg</td> <td>AN</td> <td>255</td> <td>Result Message</td> </tr> <tr> <td>tXid</td> <td>AN</td> <td>30</td> <td>Transaction ID</td> </tr> <tr> <td>referenceNo</td> <td>ANS</td> <td>40</td> <td>Merchant Order No</td> </tr> <tr> <td>payMethod</td> <td>N</td> <td>2</td> <td>Payment Method. Refer Code at <a href="#payment-method">Here</a></td> </tr> <tr> <td>amount</td> <td>N</td> <td>12</td> <td>Transaction Amount</td> </tr> <tr> <td>currency</td> <td>AN</td> <td>3</td> <td>Currency</td> </tr> <tr> <td>goodsNm</td> <td>N</td> <td>100</td> <td>Goods Name</td> </tr> <tr> <td>billingNm</td> <td>N</td> <td>30</td> <td>Buyer Name</td> </tr> <tr> <td>description</td> <td>N</td> <td>100</td> <td>Transaction description</td> </tr> <tr> <td>callbackUrl</td> <td>N</td> <td>100</td> <td>Callback Url</td> </tr> <tr> <td>mitraCd</td> <td>AN</td> <td>4</td> <td>Mitra Code, refer to <a href="#mitra-code">Link</a></td> </tr> <tr> <td>transDt</td> <td>N</td> <td>8</td> <td>Transaction date (YYYYMMDD)</td> </tr> <tr> <td>transTm</td> <td>N</td> <td>6</td> <td>Transaction Time (HH24MISS)</td> </tr> <tr> <td>receiptCode</td> <td>ANS</td> <td>20</td> <td>Authorization Number</td> </tr> <tr> <td>mRefNo</td> <td>AN</td> <td>18</td> <td>Bank Reference No</td> </tr> </tbody></table> <h1 id=enterprise-e-wallet>Enterprise - E-Wallet</h1> <p>NICEPay menawarkan <strong>E-Wallet</strong> sebagai metode pembayaran. Pemberitahuan Real Time akan dikirim saat pelanggan menyelesaikan pembayaran.<br> E-Wallet yang didukung oleh NICEPay: <ol type=1> <li>Mandiri E-Cash </ol></p> <p>Proses Integrasi : <ol type=1> <li>Merchant meminta registrasi E-Wallet ke NICEPay. <li>NICEPay akan me-redirect halaman ke halaman Bank <li>Pelanggan membayarkan E-Wallet. <li>NICEPay kirim notifikasi. <li>Merchant handle notifikasi. </ol></p> <h2 id=registrasi-e-wallet>Registrasi E-Wallet</h2> <blockquote> <p>Contoh JSON Request</p> </blockquote> <pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"iMid"</span><span class="p">:</span><span class="s2">"TESTIDTEST"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payMethod"</span><span class="p">:</span><span class="s2">"Credit Card"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"IDR"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Amt"</span><span class="p">:</span><span class="s2">"1000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"referenceNo"</span><span class="p">:</span><span class="s2">"MerchantReferenceNumber001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"goodsNm"</span><span class="p">:</span><span class="s2">"Merchant Goods 1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billingNm"</span><span class="p">:</span><span class="s2">"Buyer Name"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billingPhone"</span><span class="p">:</span><span class="s2">"02112345678"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billingEmail"</span><span class="p">:</span><span class="s2">"buyer@merchant.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billingAddr"</span><span class="p">:</span><span class="s2">"Billing Address"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billingCity"</span><span class="p">:</span><span class="s2">"Jakarta"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billingState"</span><span class="p">:</span><span class="s2">"Jakarta"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billingPostCd"</span><span class="p">:</span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billingCountry"</span><span class="p">:</span><span class="s2">"Indonesia"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deliveryNm"</span><span class="p">:</span><span class="s2">"Buyer Name"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deliveryPhone"</span><span class="p">:</span><span class="s2">"02112345678"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deliveryAddr"</span><span class="p">:</span><span class="s2">"Billing Address"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deliveryCity"</span><span class="p">:</span><span class="s2">"Jakarta"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deliveryState"</span><span class="p">:</span><span class="s2">"Jakarta"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deliveryPostCd"</span><span class="p">:</span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deliveryCountry"</span><span class="p">:</span><span class="s2">"Indonesia"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"callBackUrl"</span><span class="p">:</span><span class="s2">"http://www.merchant.com/callback"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"dbProcessUrl"</span><span class="p">:</span><span class="s2">"http://www.merchant.com/notification"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Vat"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Fee"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"notaxAmt"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Description"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"merchantToken"</span><span class="p">:</span><span class="s2">"6cfccfc0046773c1b589d8e98f8b596c284f3c70a4ecf86eba14c18944b74bcd"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reqDt"</span><span class="p">:</span><span class="s2">"20160301"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reqTm"</span><span class="p">:</span><span class="s2">"135959"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reqDomain"</span><span class="p">:</span><span class="s2">"merchant.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reqServerIP"</span><span class="p">:</span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reqClientVer"</span><span class="p">:</span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userIP"</span><span class="p">:</span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userSessionID"</span><span class="p">:</span><span class="s2">"userSessionID"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userAgent"</span><span class="p">:</span><span class="s2">"Mozilla"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userLanguage"</span><span class="p">:</span><span class="s2">"en-US"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cartData"</span><span class="p">:</span><span class="s2">"{}"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre> <blockquote> <p>Contoh Parameter Response</p> </blockquote> <pre class="highlight plaintext"><code>{
    "resultCd": "0000",
    "amount": "10000",
    "referenceNo": "99997",
    "transTm": "141408",
    "mitraCd": "MDRE",
    "tXid": "TESTIDTEST03201803011414085658",
    "resultMsg": "SUCCESS",
    "payMethod": "03",
    "transDt": "20180301"
}
</code></pre> <table><thead> <tr> <th>&nbsp;</th> <th>&nbsp;</th> </tr> </thead><tbody> <tr> <td><strong>API url</strong></td> <td><strong>/nicepay/api/ewalletTrans.do</strong></td> </tr> <tr> <td>Metode</td> <td>POPUP (POST)</td> </tr> <tr> <td>Deskripsi</td> <td>E-Wallet Transaction</td> </tr> <tr> <td>Merchant Token</td> <td>SHA256 (Merchant ID + Reference Number + Amount + Merchant Key)</td> </tr> </tbody></table> <p><br><strong>Request POST Parameter</strong></p> <table><thead> <tr> <th>Parameter</th> <th>Mandatory</th> <th>Tipe</th> <th>Ukuran</th> <th>Deskripsi</th> </tr> </thead><tbody> <tr> <td>iMid</td> <td>Y</td> <td>AN</td> <td>10</td> <td>Merchant ID</td> </tr> <tr> <td>payMethod</td> <td>Y</td> <td>AN</td> <td>2</td> <td>Pay Method, refer to <a href="#payment-method">here</a></td> </tr> <tr> <td>currency</td> <td>Y</td> <td>AN</td> <td>3</td> <td>Currency</td> </tr> <tr> <td>amt</td> <td>Y</td> <td>N</td> <td>12</td> <td>Goods Amount</td> </tr> <tr> <td>referenceNo</td> <td>Y</td> <td>AN</td> <td>40</td> <td>Merchant Order No</td> </tr> <tr> <td>goodsNm</td> <td>Y</td> <td>AN</td> <td>100</td> <td>Goods Name</td> </tr> <tr> <td>billingNm</td> <td>Y</td> <td>A</td> <td>30</td> <td>Billing Name</td> </tr> <tr> <td>billingPhone</td> <td>Y</td> <td>N</td> <td>15</td> <td>Billing Phone Number</td> </tr> <tr> <td>billingEmail</td> <td>Y</td> <td>AN</td> <td>40</td> <td>Billing Email</td> </tr> <tr> <td>billingCity</td> <td>Y</td> <td>A</td> <td>50</td> <td>Billing City</td> </tr> <tr> <td>billingState</td> <td>Y</td> <td>A</td> <td>50</td> <td>Billing State</td> </tr> <tr> <td>billingPostCd</td> <td>Y</td> <td>N</td> <td>10</td> <td>Billing Post Number</td> </tr> <tr> <td>billingCountry</td> <td>Y</td> <td>A</td> <td>10</td> <td>Billing Country</td> </tr> <tr> <td>callBackUrl</td> <td>Y</td> <td>AN</td> <td>255</td> <td>Payment Result Forward Url (On Browser)</td> </tr> <tr> <td>dbProcessUrl</td> <td>Y</td> <td>AN</td> <td>255</td> <td>Payment Result Receive Url (Server Side)</td> </tr> <tr> <td>description</td> <td>Y</td> <td>AN</td> <td>100</td> <td>Description</td> </tr> <tr> <td>merchantToken</td> <td>Y</td> <td>AN</td> <td>255</td> <td>Merchant Token</td> </tr> <tr> <td>userIP</td> <td>Y</td> <td>AN</td> <td>15</td> <td>User IP (Customer)</td> </tr> <tr> <td>cartData</td> <td>Y</td> <td>AN</td> <td>4000</td> <td>Cart Data (Json Format)</td> </tr> <tr> <td>mitraCd</td> <td>Y</td> <td>AN</td> <td>4</td> <td>Mitra Code, refer to <a href="#mitra-code">here</a></td> </tr> <tr> <td>billingAddr</td> <td>N</td> <td>100</td> <td>AN</td> <td>Billing Address</td> </tr> <tr> <td>deliveryNm</td> <td>N</td> <td>A</td> <td>30</td> <td>Delivery Name</td> </tr> <tr> <td>deliveryPhone</td> <td>N</td> <td>N</td> <td>15</td> <td>Delivery Phone</td> </tr> <tr> <td>deliveryAddr</td> <td>N</td> <td>AN</td> <td>100</td> <td>Delivery Address</td> </tr> <tr> <td>deliveryEmail</td> <td>N</td> <td>AN</td> <td>&nbsp;</td> <td>Delivery Email</td> </tr> <tr> <td>deliveryCity</td> <td>N</td> <td>A</td> <td>50</td> <td>Delivery City</td> </tr> <tr> <td>deliveryState</td> <td>N</td> <td>A</td> <td>50</td> <td>Delivery State</td> </tr> <tr> <td>deliveryPostCd</td> <td>N</td> <td>N</td> <td>10</td> <td>Delivery Post Number</td> </tr> <tr> <td>deliveryCountry</td> <td>N</td> <td>A</td> <td>10</td> <td>Delivery Country</td> </tr> <tr> <td>vat</td> <td>N</td> <td>N</td> <td>12</td> <td>Vat</td> </tr> <tr> <td>fee</td> <td>N</td> <td>N</td> <td>12</td> <td>Service Tax</td> </tr> <tr> <td>notaxAmt</td> <td>N</td> <td>N</td> <td>12</td> <td>Tax Free Amount</td> </tr> <tr> <td>reqDt</td> <td>N</td> <td>N</td> <td>8</td> <td>Request Date(YYYYMMDD)</td> </tr> <tr> <td>reqTm</td> <td>N</td> <td>N</td> <td>6</td> <td>Request Time(HH24MISS)</td> </tr> <tr> <td>reqDomain</td> <td>N</td> <td>AN</td> <td>100</td> <td>Request Domain</td> </tr> <tr> <td>reqServerIP</td> <td>N</td> <td>AN</td> <td>15</td> <td>Request Server IP</td> </tr> <tr> <td>reqClientVer</td> <td>N</td> <td>AN</td> <td>50</td> <td>Request Client Version</td> </tr> <tr> <td>userSessionID</td> <td>N</td> <td>AN</td> <td>100</td> <td>User Session ID</td> </tr> <tr> <td>userAgent</td> <td>N</td> <td>AN</td> <td>100</td> <td>User Agent Information</td> </tr> <tr> <td>userLanguage</td> <td>N</td> <td>AN</td> <td>2</td> <td>User Language</td> </tr> </tbody></table> <p><br><strong>Response Data</strong></p> <table><thead> <tr> <th>Parameter</th> <th>Tipe</th> <th>Ukuran</th> <th>Deskripsi</th> </tr> </thead><tbody> <tr> <td>resultCd</td> <td>N</td> <td>4</td> <td>Result Code</td> </tr> <tr> <td>resultMsg</td> <td>AN</td> <td>255</td> <td>Result Message</td> </tr> <tr> <td>tXid</td> <td>AN</td> <td>30</td> <td>Transaction ID</td> </tr> <tr> <td>referenceNo</td> <td>ANS</td> <td>40</td> <td>Merchant Order No</td> </tr> <tr> <td>payMethod</td> <td>N</td> <td>2</td> <td>Payment Method. Refer Code at <a href="#payment-method">Here</a></td> </tr> <tr> <td>amount</td> <td>N</td> <td>12</td> <td>Transaction Amount</td> </tr> <tr> <td>mitraCd</td> <td>AN</td> <td>4</td> <td>Mitra Code, refer to <a href="#mitra-code">Link</a></td> </tr> <tr> <td>transDt</td> <td>N</td> <td>8</td> <td>Transaction date (YYYYMMDD)</td> </tr> <tr> <td>transTm</td> <td>N</td> <td>6</td> <td>Transaction Time (HH24MISS)</td> </tr> </tbody></table> <h1 id=cek-status-transaksi>Cek status Transaksi</h1><pre class="highlight java tab-java"><code><span class="c1">// Order Status Mandatory Field    </span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setTrxId</span><span class="o">(</span><span class="s">"IONPAYTEST02201603091207051498"</span><span class="o">);</span>    
<span class="n">nicePay</span><span class="o">.</span><span class="na">setReferenceNo</span><span class="o">(</span><span class="s">"MerchantReferenceNumber001"</span><span class="o">);</span>    
<span class="n">nicePay</span><span class="o">.</span><span class="na">setAmt</span><span class="o">(</span><span class="s">"1000"</span><span class="o">);</span>    
<span class="n">nicePay</span><span class="o">.</span><span class="na">setMerchantToken</span><span class="o">(</span><span class="n">nicePay</span><span class="o">.</span><span class="na">makeToken</span><span class="o">(</span><span class="n">nicePay</span><span class="o">.</span><span class="na">getAmt</span><span class="o">(),</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">getReferenceNo</span><span class="o">()));</span>    
<span class="c1">// Order Status Request    </span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">orderStatus</span><span class="o">();</span>    
<span class="c1">// Order Status Response    </span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response String : "</span> <span class="o">+</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">getResponseString</span><span class="o">());</span> <span class="c1">// JSON in String format    </span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">getHtResponse</span><span class="o">();</span> <span class="c1">// JSON in HashTable&lt;String, String&gt; format    </span>

<span class="n">String</span> <span class="n">resultCd</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"resultCd"</span><span class="o">);</span>           
<span class="n">String</span> <span class="n">resultMsg</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"resultMsg"</span><span class="o">);</span>           
<span class="n">String</span> <span class="n">tXid</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"tXid "</span><span class="o">);</span>           
<span class="n">String</span> <span class="n">iMid</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"iMid"</span><span class="o">);</span>     
<span class="n">String</span> <span class="n">currency</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"currency"</span><span class="o">);</span>  
<span class="n">String</span> <span class="n">amount</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"amount"</span><span class="o">);</span>           
<span class="n">String</span> <span class="n">instmntMon</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"instmntMon"</span><span class="o">);</span>           
<span class="n">String</span> <span class="n">instmntType</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"instmntType"</span><span class="o">);</span>     
<span class="n">String</span> <span class="n">referenceNo</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"referenceNo"</span><span class="o">);</span>    
<span class="n">String</span> <span class="n">goodsNm</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"goodsNm"</span><span class="o">);</span>           
<span class="n">String</span> <span class="n">payMethod</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"payMethod"</span><span class="o">);</span>           
<span class="n">String</span> <span class="n">billingNm</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"billingNm"</span><span class="o">);</span>           
<span class="n">String</span> <span class="n">merchantToken</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"merchantToken"</span><span class="o">);</span>     
<span class="n">String</span> <span class="n">reqDt</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"reqDt"</span><span class="o">);</span>    
<span class="n">String</span> <span class="n">reqTm</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"reqTm"</span><span class="o">);</span>           
<span class="n">String</span> <span class="n">status</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"status"</span><span class="o">);</span>           
<span class="n">String</span> <span class="n">bankCd</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"bankCd"</span><span class="o">);</span>  
<span class="n">String</span> <span class="n">vacctValidDt</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"vacctValidDt"</span><span class="o">);</span>            
<span class="n">String</span> <span class="n">vacctValidTm</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"vacctValidTm"</span><span class="o">);</span>     
<span class="n">String</span> <span class="n">vacctNo</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"vacctNo"</span><span class="o">);</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="k">public</span> <span class="n">NotificationResult</span> <span class="nf">ChargcheckPaymentStatuseCard</span><span class="p">(</span><span class="kt">string</span> <span class="n">tXid</span><span class="p">,</span> <span class="kt">string</span> <span class="n">referenceNo</span><span class="p">,</span> <span class="kt">string</span> <span class="n">amt</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">string</span> <span class="n">RequestType</span> <span class="p">=</span> <span class="s">"checkPaymentStatus"</span><span class="p">;</span>
    <span class="n">Nicepay</span> <span class="n">Nicepay</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Nicepay</span><span class="p">();</span>

    <span class="n">Nicepay</span><span class="p">.</span><span class="n">iMid</span> <span class="p">=</span> <span class="n">NicepayConfig</span><span class="p">.</span><span class="n">NICEPAY_IMID</span><span class="p">;</span>
    <span class="n">Nicepay</span><span class="p">.</span><span class="n">tXid</span> <span class="p">=</span> <span class="n">tXid</span><span class="p">;</span>
    <span class="n">Nicepay</span><span class="p">.</span><span class="n">referenceNo</span> <span class="p">=</span> <span class="n">referenceNo</span><span class="p">;</span>
    <span class="n">Nicepay</span><span class="p">.</span><span class="n">amt</span> <span class="p">=</span> <span class="n">amt</span><span class="p">;</span>
    <span class="n">Nicepay</span><span class="p">.</span><span class="n">merchantToken</span> <span class="p">=</span> <span class="nf">merchantToken</span><span class="p">(</span><span class="n">Nicepay</span><span class="p">,</span> <span class="n">RequestType</span><span class="p">);</span>

    <span class="nf">CheckParam</span><span class="p">(</span><span class="n">Nicepay</span><span class="p">.</span><span class="n">iMid</span><span class="p">,</span> <span class="s">"01"</span><span class="p">);</span>
    <span class="nf">CheckParam</span><span class="p">(</span><span class="n">Nicepay</span><span class="p">.</span><span class="n">amt</span><span class="p">,</span> <span class="s">"04"</span><span class="p">);</span>
    <span class="nf">CheckParam</span><span class="p">(</span><span class="n">Nicepay</span><span class="p">.</span><span class="n">referenceNo</span><span class="p">,</span> <span class="s">"06"</span><span class="p">);</span>
    <span class="nf">CheckParam</span><span class="p">(</span><span class="n">Nicepay</span><span class="p">.</span><span class="n">merchantToken</span><span class="p">,</span> <span class="s">"28"</span><span class="p">);</span>
    <span class="nf">CheckParam</span><span class="p">(</span><span class="n">Nicepay</span><span class="p">.</span><span class="n">tXid</span><span class="p">,</span> <span class="s">"30"</span><span class="p">);</span>

    <span class="kt">string</span> <span class="n">API_Url</span> <span class="p">=</span> <span class="nf">GetApiRequest</span><span class="p">(</span><span class="n">RequestType</span><span class="p">);</span>
    <span class="kt">string</span> <span class="n">SingleString</span> <span class="p">=</span> <span class="nf">BuildString</span><span class="p">(</span><span class="n">Nicepay</span><span class="p">);</span>

    <span class="kt">string</span> <span class="n">ResultString</span> <span class="p">=</span> <span class="n">WebRequestPostHttp</span><span class="p">.</span><span class="nf">Post_Http</span><span class="p">(</span><span class="n">SingleString</span><span class="p">,</span> <span class="n">API_Url</span><span class="p">);</span>
    <span class="n">JavaScriptSerializer</span> <span class="n">JsonSerializer</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">JavaScriptSerializer</span><span class="p">();</span>

    <span class="k">return</span> <span class="n">JsonSerializer</span><span class="p">.</span><span class="n">Deserialize</span><span class="p">&lt;</span><span class="n">NotificationResult</span><span class="p">&gt;(</span><span class="n">ResultString</span><span class="p">);</span>

<span class="p">}</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'tXid'</span><span class="p">,</span><span class="nv">$tXid</span><span class="p">);</span>
<span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'referenceNo'</span><span class="p">,</span><span class="nv">$referenceNo</span><span class="p">);</span>
<span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'amt'</span><span class="p">,</span><span class="nv">$amt</span><span class="p">);</span>
<span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'iMid'</span><span class="p">,</span><span class="nv">$iMid</span><span class="p">);</span>
<span class="nv">$merchantToken</span> <span class="o">=</span> <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">merchantTokenC</span><span class="p">();</span>
<span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'merchantToken'</span><span class="p">,</span> <span class="nv">$merchantToken</span><span class="p">);</span>

<span class="c1">//Request To Nicepay
</span><span class="nv">$paymentStatus</span> <span class="o">=</span> <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">checkPaymentStatus</span><span class="p">(</span><span class="nv">$tXid</span><span class="p">,</span><span class="nv">$referenceNo</span><span class="p">,</span> <span class="nv">$amt</span><span class="p">);</span>

<span class="c1">//Response From Nicepay
</span><span class="k">if</span><span class="p">(</span><span class="nv">$pushedToken</span> <span class="o">==</span> <span class="nv">$merchantToken</span><span class="p">){</span>
  <span class="k">if</span><span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$paymentStatus</span><span class="o">-&gt;</span><span class="na">status</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nv">$paymentStatus</span><span class="o">-&gt;</span><span class="na">status</span> <span class="o">==</span> <span class="s1">'0'</span><span class="p">){</span>
    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;Success&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span><span class="k">elseif</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$paymentStatus</span><span class="o">-&gt;</span><span class="na">status</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nv">$paymentStatus</span><span class="o">-&gt;</span><span class="na">status</span> <span class="o">==</span> <span class="s1">'1'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;Void&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span><span class="k">elseif</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$paymentStatus</span><span class="o">-&gt;</span><span class="na">status</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nv">$paymentStatus</span><span class="o">-&gt;</span><span class="na">status</span> <span class="o">==</span> <span class="s1">'2'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;Refund&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span><span class="k">elseif</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$paymentStatus</span><span class="o">-&gt;</span><span class="na">status</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nv">$paymentStatus</span><span class="o">-&gt;</span><span class="na">status</span> <span class="o">==</span> <span class="s1">'9'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;Reversal&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span><span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;Status Unknown&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">library</span> <span class="kn">import</span> <span class="n">NICEPay</span>  

<span class="c">#Set Parameters For Check Status  </span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">iMid</span> <span class="o">=</span> <span class="s">"IONPAYTEST"</span> <span class="c">#Set Merchant ID  </span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">merchantKey</span> <span class="o">=</span> <span class="s">"33F49GnCMS1mFYlGXisbUDzVf2ATWCl9k3R++d5hDd3Frmuos/XLx8XhXpe+LDYAbpGKZYSwtlyyLOtS/8aD7A=="</span> <span class="c">#Set Merchant Key  </span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">amt</span> <span class="o">=</span> <span class="s">"100"</span>  
<span class="n">NICEPay</span><span class="o">.</span><span class="n">referenceNo</span> <span class="o">=</span> <span class="s">"379072"</span>  
<span class="n">NICEPay</span><span class="o">.</span><span class="n">merchantToken</span> <span class="o">=</span> <span class="n">NICEPay</span><span class="o">.</span><span class="n">getMerchantToken</span><span class="p">()</span>  
<span class="n">NICEPay</span><span class="o">.</span><span class="n">tXid</span> <span class="o">=</span> <span class="s">"IONPAYTEST02201609161449136760"</span>  

<span class="c">#Check Status Request  </span>
<span class="n">resultCheckStatus</span> <span class="o">=</span> <span class="n">NICEPay</span><span class="o">.</span><span class="n">checkStatus</span><span class="p">()</span>  

<span class="c">#Check Status Response  </span>
<span class="n">result</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">resultCheckStatus</span><span class="p">)</span>  

<span class="c">#Check Payment Response String Format  </span>
<span class="k">print</span><span class="p">(</span><span class="s">"resultCd : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'resultCd'</span><span class="p">])</span>  
<span class="k">print</span><span class="p">(</span><span class="s">"resultMsg : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'resultMsg'</span><span class="p">])</span>  
<span class="k">print</span><span class="p">(</span><span class="s">"tXid : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'tXid'</span><span class="p">])</span>  
<span class="k">print</span><span class="p">(</span><span class="s">"iMid : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'iMid'</span><span class="p">])</span>  
<span class="k">print</span><span class="p">(</span><span class="s">"currency : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'currency'</span><span class="p">])</span>  
<span class="k">print</span><span class="p">(</span><span class="s">"amount : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'amt'</span><span class="p">])</span>  
<span class="k">print</span><span class="p">(</span><span class="s">"instmntMon : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'instmntMon'</span><span class="p">])</span>  
<span class="k">print</span><span class="p">(</span><span class="s">"instmntType : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'instmntType'</span><span class="p">])</span>  
<span class="k">print</span><span class="p">(</span><span class="s">"referenceNo : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'referenceNo'</span><span class="p">])</span>  
<span class="k">print</span><span class="p">(</span><span class="s">"goodsNm : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'goodsNm'</span><span class="p">])</span>  
<span class="k">print</span><span class="p">(</span><span class="s">"payMethod : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'payMethod'</span><span class="p">])</span>  
<span class="k">print</span><span class="p">(</span><span class="s">"billingNm : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'billingNm'</span><span class="p">])</span>  
<span class="k">print</span><span class="p">(</span><span class="s">"merchantToken : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'merchantToken'</span><span class="p">])</span>  
<span class="k">print</span><span class="p">(</span><span class="s">"reqDt : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'reqDt'</span><span class="p">])</span>  
<span class="k">print</span><span class="p">(</span><span class="s">"reqTm : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'reqTm'</span><span class="p">])</span>  
<span class="k">print</span><span class="p">(</span><span class="s">"status : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'status'</span><span class="p">])</span>
</code></pre> <blockquote> <p>Contoh response JSON structured (when success) :</p> </blockquote> <pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"reqTm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"151024"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"resultCd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"goodsNm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test Transaction Nicepay"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"referenceNo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"99999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"transTm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"151024"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tXid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IONPAYTEST02201706131510248946"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cancelAmt"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"depositTm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"175005"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vacctNo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1510248946"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"resultMsg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paid"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"iMid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IONPAYTEST"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billingNm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Customer Name"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vacctValidDt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20170620"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"depositDt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20170613"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payMethod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reqDt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20170613"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bankCd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BNIA"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IDR"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"transDt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20170613"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vacctValidTm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"235959"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre> <p>API ini untuk permintaan untuk memeriksa status transaksi.<br></p> <table><thead> <tr> <th>&nbsp;</th> <th>&nbsp;</th> </tr> </thead><tbody> <tr> <td><strong>API url</strong></td> <td><strong>/nicepay/api/onePassStatus.do</strong></td> </tr> <tr> <td>Metode</td> <td>POST</td> </tr> <tr> <td>Deskripsi</td> <td>Permintaan Status Pesanan</td> </tr> <tr> <td>Merchant Token</td> <td>SHA256 (Merchant ID + Reference Number + amt + Merchant Key)</td> </tr> </tbody></table> <p><strong>Request POST Parameter</strong></p> <table><thead> <tr> <th>Parameter</th> <th>Mandatory</th> <th>Tipe</th> <th>Ukuran</th> <th>Deskripsi</th> </tr> </thead><tbody> <tr> <td>iMid</td> <td>Y</td> <td>AN</td> <td>10</td> <td>Merchant ID</td> </tr> <tr> <td>merchantToken</td> <td>Y</td> <td>AN</td> <td>255</td> <td>generate SHA256 (Merchant ID + Reference Number + amt + Merchant Key)</td> </tr> <tr> <td>tXid</td> <td>Y</td> <td>AN</td> <td>30</td> <td>Transaction ID</td> </tr> <tr> <td>amt</td> <td>Y</td> <td>N</td> <td>12</td> <td>Transaction amount</td> </tr> <tr> <td>referenceNo</td> <td>Y</td> <td>ANS</td> <td>40</td> <td>Merchant order No</td> </tr> </tbody></table> <p><strong>Response Json Object</strong></p> <table><thead> <tr> <th>Parameter</th> <th>Tipe</th> <th>Ukuran</th> <th>Deskripsi</th> </tr> </thead><tbody> <tr> <td>resultCd</td> <td>N</td> <td>4</td> <td>Result Code</td> </tr> <tr> <td>resultMsg</td> <td>N</td> <td>255</td> <td>Result Message</td> </tr> <tr> <td>tXid</td> <td>N</td> <td>30</td> <td>Transaction ID</td> </tr> <tr> <td>iMid</td> <td>N</td> <td>10</td> <td>Merchant ID</td> </tr> <tr> <td>referenceNo</td> <td>N</td> <td>40</td> <td>Merchant Order No</td> </tr> <tr> <td>payMethod</td> <td>N</td> <td>2</td> <td>Payment method. Refer Code at <a href="#payment-method">Here</a></td> </tr> <tr> <td>amt</td> <td>N</td> <td>12</td> <td>Payment amount</td> </tr> <tr> <td>cancelAmt</td> <td>N</td> <td>12</td> <td>Cancel amount</td> </tr> <tr> <td>reqDt</td> <td>N</td> <td>8</td> <td>Transaction request date</td> </tr> <tr> <td>reqTm</td> <td>N</td> <td>6</td> <td>Transaction request time</td> </tr> <tr> <td>transDt</td> <td>N</td> <td>8</td> <td>Transaction date</td> </tr> <tr> <td>transTm</td> <td>N</td> <td>6</td> <td>Transaction time</td> </tr> <tr> <td>depositDt</td> <td>N</td> <td>&amp;nbsp</td> <td>Transaction deposit date</td> </tr> <tr> <td>depositTm</td> <td>N</td> <td>&amp;nbsp</td> <td>Transaction deposit time</td> </tr> <tr> <td>currency</td> <td>N</td> <td>3</td> <td>Currency</td> </tr> <tr> <td>goodsNm</td> <td>N</td> <td>100</td> <td>Goods name</td> </tr> <tr> <td>billingNm</td> <td>N</td> <td>30</td> <td>Billing name</td> </tr> <tr> <td>status</td> <td>N</td> <td>1</td> <td>Transaction status&lt;. Refer Code at <a href="#payment-status-code">Here</a></td> </tr> <tr> <td>authNo</td> <td>N</td> <td>10</td> <td>Approval number</td> </tr> <tr> <td>issueBankCd</td> <td>A</td> <td>4</td> <td>Issue bank code. Refer Code at <a href="#bank-code">Here</a></td> </tr> <tr> <td>acquBankCd</td> <td>A</td> <td>4</td> <td>Acquire bank code. Refer Code at <a href="#bank-code">Here</a></td> </tr> <tr> <td>cardNo</td> <td>AN</td> <td>20</td> <td>Card no with masking</td> </tr> <tr> <td>instmntMon</td> <td>N</td> <td>2</td> <td>Installment month</td> </tr> <tr> <td>instmntType</td> <td>N</td> <td>2</td> <td>Installment Type. Refer Code at <a href="#installment-type">Here</a></td> </tr> <tr> <td>preauthToken</td> <td>AN</td> <td>255</td> <td>Preauth Token</td> </tr> <tr> <td>recurringToken</td> <td>AN</td> <td>255</td> <td>Recurring token</td> </tr> <tr> <td>ccTransType</td> <td>AN</td> <td>2</td> <td>Credit card transaction type<br>1: Normal<br>2: Recurring<br>3: Pre-auth<br>4: Captured</td> </tr> <tr> <td>acquStatus</td> <td>AN</td> <td>2</td> <td>Purchase status<br>00: not purchase<br>01: later cancel not purchase<br>10: finish purchase<br>99: etc</td> </tr> <tr> <td>vat</td> <td>N</td> <td>12</td> <td>Vat number</td> </tr> <tr> <td>fee</td> <td>N</td> <td>12</td> <td>service fee</td> </tr> <tr> <td>notaxAmt</td> <td>N</td> <td>12</td> <td>tax free amount</td> </tr> </tbody></table> <p><strong>Additional Response Json Object for Virtual Account</strong></p> <table><thead> <tr> <th>Parameter</th> <th>Tipe</th> <th>Ukuran</th> <th>Deskripsi</th> </tr> </thead><tbody> <tr> <td>bankCd</td> <td>N</td> <td>4</td> <td>Bank Code. Refer Code at <a href="#bank-code">Here</a></td> </tr> <tr> <td>vacctNo</td> <td>N</td> <td>16</td> <td>Bank Virtual Account number</td> </tr> <tr> <td>vacctValidDt</td> <td>N</td> <td>8</td> <td>VA expiry date</td> </tr> <tr> <td>vacctValidTm</td> <td>N</td> <td>6</td> <td>VA expiry time</td> </tr> </tbody></table> <p><strong>Additional Response Json Object for Others Payment Method</strong></p> <table><thead> <tr> <th>Parameter</th> <th>Tipe</th> <th>Ukuran</th> <th>Deskripsi</th> </tr> </thead><tbody> <tr> <td>mitraCd</td> <td>A</td> <td>4</td> <td>Mitra Code. Refer Code at <a href="#mitra-code">Here</a></td> </tr> <tr> <td>payNo</td> <td>N</td> <td>12</td> <td>CVS number</td> </tr> <tr> <td>payValidDt</td> <td>N</td> <td>8</td> <td>CVS expiry date</td> </tr> <tr> <td>payValidTm</td> <td>N</td> <td>6</td> <td>CVS expiry time</td> </tr> <tr> <td>receiptCode</td> <td>ANS</td> <td>18</td> <td>Authorization number</td> </tr> <tr> <td>mRefNo</td> <td>AN</td> <td>20</td> <td>Bank reference No</td> </tr> </tbody></table> <h1 id=membatalkan-transaksi>Membatalkan Transaksi</h1><pre class="highlight java tab-java"><code><span class="n">nicePay</span><span class="o">.</span><span class="na">setCancelMsg</span><span class="o">(</span><span class="s">"Cancel Message"</span><span class="o">);</span>    
<span class="n">nicePay</span><span class="o">.</span><span class="na">setAmt</span><span class="o">(</span><span class="s">"1000"</span><span class="o">);</span>    
<span class="n">nicePay</span><span class="o">.</span><span class="na">setFee</span><span class="o">(</span><span class="s">"0"</span><span class="o">);</span>    
<span class="n">nicePay</span><span class="o">.</span><span class="na">setVat</span><span class="o">(</span><span class="s">"0"</span><span class="o">);</span>    
<span class="n">nicePay</span><span class="o">.</span><span class="na">setNotaxAmt</span><span class="o">(</span><span class="s">"0"</span><span class="o">);</span>    
<span class="n">nicePay</span><span class="o">.</span><span class="na">setReqServerIP</span><span class="o">(</span><span class="s">"127.0.0.1"</span><span class="o">);</span>    
<span class="n">nicePay</span><span class="o">.</span><span class="na">setCancelUserId</span><span class="o">(</span><span class="s">""</span><span class="o">);</span>    
<span class="n">nicePay</span><span class="o">.</span><span class="na">setUserIP</span><span class="o">(</span><span class="s">"127.0.0.1"</span><span class="o">);</span>    
<span class="n">nicePay</span><span class="o">.</span><span class="na">setCancelUserInfo</span><span class="o">(</span><span class="s">"Customer cancel transaction"</span><span class="o">);</span>    
<span class="n">nicePay</span><span class="o">.</span><span class="na">setCancelRetryCnt</span><span class="o">(</span><span class="s">"3"</span><span class="o">);</span>    
<span class="n">nicePay</span><span class="o">.</span><span class="na">setWorker</span><span class="o">(</span><span class="s">""</span><span class="o">);</span>    
<span class="c1">// Cancel Mandatory Field    </span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">setTrxId</span><span class="o">(</span><span class="s">"IONPAYTEST02201603091207051498"</span><span class="o">);</span>    
<span class="n">nicePay</span><span class="o">.</span><span class="na">setPayMethod</span><span class="o">(</span><span class="s">"02"</span><span class="o">);</span>    
<span class="n">nicePay</span><span class="o">.</span><span class="na">setCancelType</span><span class="o">(</span><span class="s">"1"</span><span class="o">);</span>    
<span class="n">nicePay</span><span class="o">.</span><span class="na">setMerchantToken</span><span class="o">(</span><span class="n">nicePay</span><span class="o">.</span><span class="na">makeToken</span><span class="o">(</span><span class="n">nicePay</span><span class="o">.</span><span class="na">getAmt</span><span class="o">(),</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">getTrxId</span><span class="o">()));</span>    
<span class="c1">// Cancel request    </span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">cancel</span><span class="o">();</span>    
<span class="c1">// Cancel Response    </span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response String : "</span> <span class="o">+</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">getResponseString</span><span class="o">());</span> <span class="c1">// JSON in String format    </span>
<span class="n">nicePay</span><span class="o">.</span><span class="na">getHtResponse</span><span class="o">();</span> <span class="c1">// JSON in HashTable&lt;String, String&gt; format    </span>
<span class="n">String</span> <span class="n">resultCd</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"resultCd"</span><span class="o">);</span>         
<span class="n">String</span> <span class="n">resultMsg</span> <span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"resultMsg"</span><span class="o">);</span>         
<span class="n">String</span> <span class="n">tXid</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"tXid "</span><span class="o">);</span>         
<span class="n">String</span> <span class="n">referenceNo</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"referenceNo"</span><span class="o">);</span>   
<span class="n">String</span> <span class="n">transDt</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"transDt"</span><span class="o">);</span>   
<span class="n">String</span> <span class="n">transTm</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"transTm"</span><span class="o">);</span>   
<span class="n">String</span> <span class="n">description</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"description"</span><span class="o">);</span>   
<span class="n">String</span> <span class="n">amount</span><span class="o">=</span> <span class="n">nicePay</span><span class="o">.</span><span class="na">Get</span><span class="o">(</span><span class="s">"amount"</span><span class="o">);</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="kt">string</span> <span class="n">RequestType</span> <span class="p">=</span> <span class="s">"cancel"</span><span class="p">;</span>
<span class="n">Nicepay</span> <span class="n">Nicepay</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Nicepay</span><span class="p">();</span>

<span class="n">Nicepay</span><span class="p">.</span><span class="n">iMid</span> <span class="p">=</span> <span class="n">NicepayConfig</span><span class="p">.</span><span class="n">NICEPAY_IMID</span><span class="p">;</span>
<span class="n">Nicepay</span><span class="p">.</span><span class="n">tXid</span> <span class="p">=</span> <span class="n">tXid</span><span class="p">;</span>
<span class="n">Nicepay</span><span class="p">.</span><span class="n">amt</span> <span class="p">=</span> <span class="n">amt</span><span class="p">;</span>
<span class="n">Nicepay</span><span class="p">.</span><span class="n">merchantToken</span> <span class="p">=</span> <span class="nf">merchantToken</span><span class="p">(</span><span class="n">Nicepay</span><span class="p">,</span> <span class="n">RequestType</span><span class="p">);</span>
<span class="n">Nicepay</span><span class="p">.</span><span class="n">PayMethod</span> <span class="p">=</span> <span class="s">"02"</span><span class="p">;</span>
<span class="n">Nicepay</span><span class="p">.</span><span class="n">cancelType</span> <span class="p">=</span> <span class="s">"1"</span><span class="p">;</span>

<span class="n">objResult</span> <span class="p">=</span> <span class="n">objNicepayClass</span><span class="p">.</span><span class="nf">Cancel</span> <span class="p">(</span><span class="n">Nicepay</span><span class="p">);</span>

<span class="n">Tresult</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">resultCd</span><span class="p">;</span>
<span class="n">TtXid</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">tXid</span><span class="p">;</span>
<span class="n">TcallbackUrl</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">callbackUrl</span><span class="p">;</span>
<span class="n">Tdescription</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">description</span><span class="p">;</span>
<span class="n">TreferenceNo</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">referenceNo</span><span class="p">;</span>
<span class="n">TpayMethod</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">payMethod</span><span class="p">;</span>
<span class="c1">//YYMMDD</span>
<span class="n">TtransDT</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">transDt</span><span class="p">;</span>
<span class="c1">//HH24MISS</span>
<span class="n">TTranstm</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">transTm</span><span class="p">;</span>
<span class="n">TresultMsg</span><span class="p">.</span><span class="n">InnerText</span> <span class="p">=</span> <span class="n">objResult</span><span class="p">.</span><span class="n">resultMsg</span><span class="p">;</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="nv">$nicepay</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NicepayLib</span><span class="p">();</span>  
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">emptyempty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'tXid'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">emptyempty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'tXid'</span><span class="p">]))</span>  
<span class="p">{</span>  
  <span class="nv">$iMid</span>               <span class="o">=</span> <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">iMid</span><span class="p">;</span>  
  <span class="nv">$tXid</span>               <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'tXid'</span><span class="p">];</span>  
  <span class="nv">$amt</span>                <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'amt'</span><span class="p">];</span>  

  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'tXid'</span><span class="p">,</span> <span class="nv">$tXid</span><span class="p">);</span>  
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'payMethod'</span><span class="p">,</span> <span class="s1">'02'</span><span class="p">);</span>  
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'amt'</span><span class="p">,</span> <span class="nv">$amt</span><span class="p">);</span>  
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'iMid'</span><span class="p">,</span><span class="nv">$iMid</span><span class="p">);</span>  
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'cancelType'</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>  

  <span class="nv">$merchantToken</span> <span class="o">=</span> <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">merchantTokenC</span><span class="p">();</span>  
  <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'merchantToken'</span><span class="p">,</span> <span class="nv">$merchantToken</span><span class="p">);</span>  

  <span class="c1">// &lt;REQUEST to NICEPAY&gt;  
</span>  <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$nicepay</span><span class="o">-&gt;</span><span class="na">cancel</span><span class="p">(</span><span class="nv">$tXid</span><span class="p">,</span> <span class="nv">$amt</span><span class="p">);</span>  

  <span class="c1">// &lt;RESPONSE from NICEPAY&gt;  
</span>  <span class="k">echo</span> <span class="s1">'&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;'</span><span class="p">;</span>  
  <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>  
  <span class="nb">var_dump</span><span class="p">(</span><span class="nv">$response</span><span class="p">);</span>  
  <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">json</span>  

<span class="kn">from</span> <span class="nn">library</span> <span class="kn">import</span> <span class="n">NICEPay</span>  

<span class="c">#Set MID &amp; Merchant Key  </span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">iMid</span> <span class="o">=</span> <span class="s">"IONPAYTEST"</span> <span class="c">#Set Merchant ID  </span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">merchantKey</span> <span class="o">=</span> <span class="s">"33F49GnCMS1mFYlGXisbUDzVf2ATWCl9k3R++d5hDd3Frmuos/XLx8XhXpe+LDYAbpGKZYSwtlyyLOtS/8aD7A=="</span> <span class="c">#Set Merchant Key  </span>

<span class="c">#Set Mandatory Value  </span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">payMethod</span> <span class="o">=</span> <span class="s">"02"</span>  
<span class="n">NICEPay</span><span class="o">.</span><span class="n">amt</span> <span class="o">=</span> <span class="s">"1000"</span>  
<span class="n">NICEPay</span><span class="o">.</span><span class="n">tXid</span> <span class="o">=</span> <span class="s">"IONPAYTEST02201703301501243952"</span>  
<span class="n">NICEPay</span><span class="o">.</span><span class="n">cancelType</span> <span class="o">=</span> <span class="s">"1"</span>  
<span class="n">NICEPay</span><span class="o">.</span><span class="n">merchantToken</span> <span class="o">=</span> <span class="n">NICEPay</span><span class="o">.</span><span class="n">getMerchantTokenCancel</span><span class="p">()</span>  

<span class="c">#Set Optional Value  </span>
<span class="n">NICEPay</span><span class="o">.</span><span class="n">cancelMsg</span> <span class="o">=</span> <span class="s">"Cancel Message"</span>  
<span class="n">NICEPay</span><span class="o">.</span><span class="n">fee</span> <span class="o">=</span> <span class="s">"0"</span>  
<span class="n">NICEPay</span><span class="o">.</span><span class="n">vat</span> <span class="o">=</span> <span class="s">"0"</span>  
<span class="n">NICEPay</span><span class="o">.</span><span class="n">notaxAmt</span> <span class="o">=</span> <span class="s">"0"</span>  
<span class="n">NICEPay</span><span class="o">.</span><span class="n">reqServerIP</span> <span class="o">=</span> <span class="s">"127.0.0.01"</span>  
<span class="n">NICEPay</span><span class="o">.</span><span class="n">cancelUserId</span> <span class="o">=</span> <span class="s">"Admin"</span>  
<span class="n">NICEPay</span><span class="o">.</span><span class="n">userIP</span> <span class="o">=</span> <span class="s">"127.0.0.1"</span>  
<span class="n">NICEPay</span><span class="o">.</span><span class="n">cancelUserInfo</span> <span class="o">=</span> <span class="s">"Customer cancel transaction"</span>  
<span class="n">NICEPay</span><span class="o">.</span><span class="n">cancelRetryCnt</span> <span class="o">=</span> <span class="s">"5"</span>  
<span class="n">NICEPay</span><span class="o">.</span><span class="n">worker</span> <span class="o">=</span> <span class="s">"Worker"</span>  

<span class="c">#Cancel Request  </span>
<span class="n">resultCancel</span> <span class="o">=</span> <span class="n">NICEPay</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>  

<span class="c">#Cancel Response  </span>
<span class="n">result</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">resultCancel</span><span class="p">)</span>  

<span class="c">#Cancel Response String Format  </span>
<span class="k">print</span><span class="p">(</span><span class="s">"resultCd : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'resultCd'</span><span class="p">])</span>  
<span class="k">print</span><span class="p">(</span><span class="s">"resultMsg : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'resultMsg'</span><span class="p">])</span>  
<span class="k">print</span><span class="p">(</span><span class="s">"tXid : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'tXid'</span><span class="p">])</span>  
<span class="k">print</span><span class="p">(</span><span class="s">"referenceNo : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'referenceNo'</span><span class="p">])</span>  
<span class="k">print</span><span class="p">(</span><span class="s">"transDt : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'transDt'</span><span class="p">])</span>  
<span class="k">print</span><span class="p">(</span><span class="s">"transTm : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'transTm'</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">"description : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'description'</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">"amount : "</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s">'amount'</span><span class="p">])</span>
</code></pre> <blockquote> <p>Contoh response JSON structured (when success) :</p> </blockquote> <pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"tXid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IONPAYTEST02201603091207051498"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"referenceNo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OrdNo20160525000-52104"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"resultCd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"resultMsg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"transDt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20160303"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"transTm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"135959"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Payment of OrdNo20160525000-52104"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"canceltXid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IONPAYTEST02201603091207051499"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre> <p>API ini untuk permintaan membatalkan transaksi.<br> Jenis transaksi yang bisa diminta:</p> <table><thead> <tr> <th>Code</th> <th>Deskripsi</th> </tr> </thead><tbody> <tr> <td>01</td> <td>Credit Card</td> </tr> <tr> <td>02</td> <td>Virtual Account</td> </tr> <tr> <td>03</td> <td>CVS (Convenience Store)</td> </tr> </tbody></table> <table><thead> <tr> <th>&nbsp;</th> <th>&nbsp;</th> </tr> </thead><tbody> <tr> <td><strong>API url</strong></td> <td><strong>/nicepay/api/onePassAllCancel.do</strong></td> </tr> <tr> <td>Metode</td> <td>POST</td> </tr> <tr> <td>Deskripsi</td> <td>untuk permintaan membatalkan transaksi Credit Card, Virtual Account, dan CVS</td> </tr> <tr> <td>Merchant Token</td> <td>SHA256 (Merchant ID + NICEPay Transaction ID + Amount + Merchant Key)</td> </tr> </tbody></table> <p><strong>Request POST Parameter</strong></p> <table><thead> <tr> <th>Parameter</th> <th>Mandatory</th> <th>Tipe</th> <th>Ukuran</th> <th>Deskripsi</th> </tr> </thead><tbody> <tr> <td>iMid</td> <td>Y</td> <td>AN</td> <td>10</td> <td>Merchant ID</td> </tr> <tr> <td>merchantToken</td> <td>Y</td> <td>AN</td> <td>255</td> <td>generate SHA256 (Merchant ID + NICEPay Transaction ID + Amount + Merchant Key)</td> </tr> <tr> <td>tXid</td> <td>Y</td> <td>AN</td> <td>30</td> <td>Transaction ID</td> </tr> <tr> <td>payMethod</td> <td>Y</td> <td>AN</td> <td>2</td> <td>Payment method. Refer Code at <a href="#payment-method">Here</a></td> </tr> <tr> <td>cancelType</td> <td>Y</td> <td>N</td> <td>2</td> <td>Cancelation type</td> </tr> <tr> <td>amt</td> <td>Y</td> <td>N</td> <td>12</td> <td>Cancelation amount</td> </tr> <tr> <td>cancelMsg</td> <td>N</td> <td>AN</td> <td>255</td> <td>Cancelation message</td> </tr> <tr> <td>preauthToken</td> <td>N</td> <td>AN</td> <td>100</td> <td>Preauth Token</td> </tr> <tr> <td>fee</td> <td>N</td> <td>AN</td> <td>12</td> <td>service fee</td> </tr> <tr> <td>vat</td> <td>N</td> <td>N</td> <td>12</td> <td>Vat number</td> </tr> <tr> <td>notaxAmt</td> <td>N</td> <td>N</td> <td>12</td> <td>Number Tax Amount</td> </tr> <tr> <td>cancelServerIp</td> <td>N</td> <td>AN</td> <td>15</td> <td>Server IP address</td> </tr> <tr> <td>cancelUserId</td> <td>N</td> <td>AN</td> <td>30</td> <td>User ID</td> </tr> <tr> <td>cancelUserIp</td> <td>N</td> <td>AN</td> <td>15</td> <td>User IP address</td> </tr> <tr> <td>cancelUserInfo</td> <td>N</td> <td>AN</td> <td>100</td> <td>User Information for cancel reason</td> </tr> <tr> <td>cancelRetryCnt</td> <td>N</td> <td>N</td> <td>2</td> <td>Retry count for cancel</td> </tr> <tr> <td>worker</td> <td>N</td> <td>N</td> <td>10</td> <td>Worker</td> </tr> </tbody></table> <p><strong>Response Json Object</strong></p> <table><thead> <tr> <th>Parameter</th> <th>Tipe</th> <th>Ukuran</th> <th>Deskripsi</th> </tr> </thead><tbody> <tr> <td>tXid</td> <td>AN</td> <td>30</td> <td>Transaction ID</td> </tr> <tr> <td>referenceNo</td> <td>ANS</td> <td>30</td> <td>Merchant order No</td> </tr> <tr> <td>resultCd</td> <td>N</td> <td>4</td> <td>Result code</td> </tr> <tr> <td>resultMsg</td> <td>AN</td> <td>255</td> <td>Result message</td> </tr> <tr> <td>transDt</td> <td>N</td> <td>40</td> <td>Transaction date</td> </tr> <tr> <td>transTm</td> <td>N</td> <td>12</td> <td>Transaction time</td> </tr> <tr> <td>description</td> <td>AN</td> <td>255</td> <td>Description</td> </tr> <tr> <td>amount</td> <td>N</td> <td>8</td> <td>Amount</td> </tr> <tr> <td>canceltXid</td> <td>AN</td> <td>6</td> <td>Cancel transaction ID</td> </tr> </tbody></table> <h1 id=notification>Notification</h1> <blockquote> <p>Sample POST for Notification</p> </blockquote> <pre class="highlight plaintext"><code>tXid={tXid}  
referenceNo={referenceNo}  
amt={amt}  
merchantToken={merchantToken}  
matchCl={matchCl}
status={status}
bankCd={bankCd}
vacctNo={vacctNo}
authNo={authNo}
cardNo={cardNo}
issuBankCd = {issuBankCd}
issuBankNm = {issuBankNm}
acquBankCd = {acquBankCd}
acquBankNm = {acquBankNm}
depositDt = {depositDt}
depositTm = {depositTm}
payNo={payNo}
mitraCd={mitraCd}
</code></pre> <p>NICEPAY provides push notification through merchant&#39;s <code>dbProcessUrl</code>.<br> To Allow Push Notifications from NICEPAY Server, please add these details to your firewall whitelist:</p> <table><thead> <tr> <th><strong>Method</strong></th> <th>Merchant Token</th> <th>IP</th> <th>Description</th> </tr> </thead><tbody> <tr> <td><strong>POST</strong> <em>application/x-www-form-urlencoded</em></td> <td>SHA256(<code>iMid</code>+<code>tXid</code>+<code>amt</code>+<code>merchantKey</code>)</td> <td><code>103.20.51.0/24</code> <br> <code>103.117.8.0/24</code></td> <td>Notification from <code>User-Agent: Jakarta Commons-HttpClient/3.1</code></td> </tr> </tbody></table> <aside class=notice> Merchant Token received by your Notification Endpoint should be compared internally to prevent fake Notifications. </aside> <h2 id=notification-parameter>Notification Parameter</h2> <table><thead> <tr> <th><strong>Parameter</strong></th> <th><strong>Type and Size</strong></th> <th>Description</th> </tr> </thead><tbody> <tr> <td><strong>tXid</strong></td> <td><strong>N</strong> <strong>30</strong></td> <td>Transaction ID</td> </tr> <tr> <td><strong>merchantToken</strong></td> <td><strong>AN</strong> <strong>255</strong></td> <td>Merchant Token</td> </tr> <tr> <td><strong>referenceNo</strong></td> <td><strong>N</strong> <strong>40</strong></td> <td>Merchant Order No</td> </tr> <tr> <td><strong>payMethod</strong></td> <td><strong>N</strong> <strong>2</strong></td> <td>Payment method. Refer Code at <a href="#payment-method">Here</a></td> </tr> <tr> <td><strong>amt</strong></td> <td><strong>N</strong> <strong>12</strong></td> <td>Payment amount</td> </tr> <tr> <td><strong>transDt</strong></td> <td><strong>N</strong> <strong>8</strong></td> <td>Transaction date</td> </tr> <tr> <td><strong>transTm</strong></td> <td><strong>N</strong> <strong>6</strong></td> <td>Transaction time</td> </tr> <tr> <td><strong>currency</strong></td> <td><strong>N</strong> <strong>3</strong></td> <td>Currency</td> </tr> <tr> <td><strong>goodsNm</strong></td> <td><strong>N</strong> <strong>100</strong></td> <td>Goods name</td> </tr> <tr> <td><strong>billingNm</strong></td> <td><strong>N</strong> <strong>30</strong></td> <td>Billing name</td> </tr> <tr> <td><strong>matchCl</strong></td> <td><strong>N</strong> <strong>1</strong></td> <td>Payment amount match flag. Refer Code at <a href="#notification-match-amount-indicator">Here</a></td> </tr> <tr> <td><strong>status</strong></td> <td><strong>AN</strong> <strong>1</strong></td> <td>Deposit Status<br>0: Deposit<br>1: Reversal</td> </tr> </tbody></table> <h3 id=additional-parameter-for-credit-card-notification>Additional Parameter for Credit Card Notification</h3> <table><thead> <tr> <th><strong>Parameter</strong></th> <th><strong>Type and Size</strong></th> <th>Description</th> </tr> </thead><tbody> <tr> <td><strong>authNo</strong></td> <td><strong>N</strong> <strong>10</strong></td> <td>Approval number</td> </tr> <tr> <td><strong>IssueBankCd</strong></td> <td><strong>A</strong> <strong>4</strong></td> <td>Issue bank code. Refer Code at <a href="#bank-code">Here</a></td> </tr> <tr> <td><strong>IssueBankNm</strong></td> <td><strong>A</strong></td> <td>Issue bank name.</td> </tr> <tr> <td><strong>acquBankCd</strong></td> <td><strong>A</strong></td> <td>Acquire bank code. Refer Code at <a href="#bank-code">Here</a></td> </tr> <tr> <td><strong>acquBankNm</strong></td> <td><strong>A</strong></td> <td>Acquire bank name.</td> </tr> <tr> <td><strong>cardNo</strong></td> <td><strong>AN</strong> <strong>20</strong></td> <td>Card no with masking</td> </tr> <tr> <td><strong>cardExpYymm</strong></td> <td><strong>N</strong></td> <td>Card expiry (YYMM)</td> </tr> <tr> <td><strong>instmntMon</strong></td> <td><strong>N</strong> <strong>2</strong></td> <td>Installment month</td> </tr> <tr> <td><strong>instmntType</strong></td> <td><strong>N</strong> <strong>2</strong></td> <td>Installment Type. Refer Code at <a href="#installment-type">Here</a></td> </tr> <tr> <td><strong>preauthToken</strong></td> <td><strong>AN</strong> <strong>255</strong></td> <td>Preauth Token</td> </tr> <tr> <td><strong>recurringToken</strong></td> <td><strong>AN</strong> <strong>255</strong></td> <td>Recurring token</td> </tr> <tr> <td><strong>ccTransType</strong></td> <td><strong>AN</strong> <strong>2</strong></td> <td>Credit card transaction type<br>1: Normal<br>2: Recurring<br>3: Pre-auth<br>4: Captured</td> </tr> <tr> <td><strong>vat</strong></td> <td><strong>N</strong> <strong>12</strong></td> <td>Vat number</td> </tr> <tr> <td><strong>fee</strong></td> <td><strong>N</strong> <strong>12</strong></td> <td>Service fee</td> </tr> <tr> <td><strong>notaxAmt</strong></td> <td><strong>N</strong> <strong>12</strong></td> <td>Tax free amount</td> </tr> </tbody></table> <h3 id=additional-parameter-for-virtual-account-notification>Additional Parameter for Virtual Account Notification</h3> <table><thead> <tr> <th><strong>Parameter</strong></th> <th><strong>Type and Size</strong></th> <th>Description</th> </tr> </thead><tbody> <tr> <td><strong>bankCd</strong></td> <td><strong>N</strong> <strong>4</strong></td> <td>Bank Code</td> </tr> <tr> <td><strong>vacctNo</strong></td> <td><strong>N</strong> <strong>16</strong></td> <td>Bank VA Number</td> </tr> <tr> <td><strong>vacctValidDt</strong></td> <td><strong>N</strong> <strong>8</strong></td> <td>VA Expiry Date</td> </tr> <tr> <td><strong>vacctValidTm</strong></td> <td><strong>N</strong> <strong>6</strong></td> <td>VA Expiry Time</td> </tr> <tr> <td><strong>depositDt</strong></td> <td><strong>N</strong></td> <td>Deposit Date</td> </tr> <tr> <td><strong>depositTm</strong></td> <td><strong>N</strong></td> <td>Deposit TIme</td> </tr> </tbody></table> <h3 id=additional-parameter-for-others-payment-method-notification>Additional Parameter for Others Payment Method Notification</h3> <table><thead> <tr> <th><strong>Parameter</strong></th> <th><strong>Type and Size</strong></th> <th>Description</th> </tr> </thead><tbody> <tr> <td><strong>mitraCd</strong></td> <td><strong>A</strong> <strong>4</strong></td> <td>Mitra Code</td> </tr> <tr> <td><strong>payNo</strong></td> <td><strong>N</strong> <strong>1</strong></td> <td>Payment Number</td> </tr> <tr> <td><strong>payValidDt</strong></td> <td><strong>N</strong> <strong>8</strong></td> <td>Expiry Date</td> </tr> <tr> <td><strong>payValidTm</strong></td> <td><strong>N</strong> <strong>6</strong></td> <td>Expiry Time</td> </tr> <tr> <td><strong>receiptCode</strong></td> <td><strong>ANS</strong> <strong>20</strong></td> <td>Authorization number</td> </tr> <tr> <td><strong>mRefNo</strong></td> <td><strong>AN</strong> <strong>18</strong></td> <td>Reference No.</td> </tr> <tr> <td><strong>depositDt</strong></td> <td><strong>N</strong></td> <td>Deposit Date</td> </tr> <tr> <td><strong>depositTm</strong></td> <td><strong>N</strong></td> <td>Deposit Time</td> </tr> </tbody></table> <h1 id=nicepay-code>Nicepay Code</h1><h2 id=field-type>Field Type</h2> <table><thead> <tr> <th><strong>Value Code</strong></th> <th>Meaning</th> </tr> </thead><tbody> <tr> <td><strong><code>A</code></strong></td> <td>Alphabet</td> </tr> <tr> <td><strong><code>AN</code></strong></td> <td>Alphabet Numeric</td> </tr> <tr> <td><strong><code>N</code></strong></td> <td>Numeric</td> </tr> <tr> <td><strong><code>ANS</code></strong></td> <td>Alphabet Numeric Symbol</td> </tr> <tr> <td><strong><code>AOO</code></strong></td> <td>Array of Object</td> </tr> </tbody></table> <h2 id=installment-type>Installment Type</h2> <table><thead> <tr> <th><strong>Value Code</strong></th> <th>Meaning</th> </tr> </thead><tbody> <tr> <td><strong><code>1</code></strong></td> <td>Customer charge</td> </tr> <tr> <td><strong><code>2</code></strong></td> <td>Merchant charge</td> </tr> </tbody></table> <h2 id=payment-method>Payment Method</h2> <table><thead> <tr> <th><strong>Value Code</strong></th> <th>Meaning</th> </tr> </thead><tbody> <tr> <td><strong><code>01</code></strong></td> <td>Credit Card</td> </tr> <tr> <td><strong><code>02</code></strong></td> <td>Virtual Account</td> </tr> <tr> <td><strong><code>03</code></strong></td> <td>CVS (Convenience Store)</td> </tr> <tr> <td><strong><code>04</code></strong></td> <td>ClickPay</td> </tr> <tr> <td><strong><code>05</code></strong></td> <td>E-Wallet</td> </tr> <tr> <td><strong><code>06</code></strong></td> <td>Payloan</td> </tr> </tbody></table> <h2 id=payment-status-code>Payment Status Code</h2> <table><thead> <tr> <th><strong>Credit Card</strong></th> <th></th> </tr> </thead><tbody> <tr> <td><strong><code>0</code></strong></td> <td>Success</td> </tr> <tr> <td><strong><code>1</code></strong></td> <td>Failed</td> </tr> <tr> <td><strong><code>2</code></strong></td> <td>Void/Refund</td> </tr> <tr> <td><strong><code>9</code></strong></td> <td>Initialization / Reversal</td> </tr> </tbody></table> <table><thead> <tr> <th><strong>Virtual Account</strong></th> <th></th> </tr> </thead><tbody> <tr> <td><strong><code>0</code></strong></td> <td>Paid</td> </tr> <tr> <td><strong><code>3</code></strong></td> <td>Unpaid</td> </tr> <tr> <td><strong><code>4</code></strong></td> <td>Expired</td> </tr> </tbody></table> <table><thead> <tr> <th><strong>CVS</strong></th> <th></th> </tr> </thead><tbody> <tr> <td><strong><code>0</code></strong></td> <td>Paid</td> </tr> <tr> <td><strong><code>3</code></strong></td> <td>Unpaid</td> </tr> <tr> <td><strong><code>4</code></strong></td> <td>Expired</td> </tr> <tr> <td><strong><code>5</code></strong></td> <td>Ready to Paid (for Alfamart)</td> </tr> </tbody></table> <h2 id=notification-status-code>Notification Status Code</h2> <table><thead> <tr> <th><strong>Value Code</strong></th> <th>Meaning</th> </tr> </thead><tbody> <tr> <td><strong><code>0</code></strong></td> <td>Deposit</td> </tr> <tr> <td><strong><code>1</code></strong></td> <td>Reversal</td> </tr> </tbody></table> <h2 id=notification-match-amount-indicator>Notification Match Amount Indicator</h2> <table><thead> <tr> <th><strong>Value Code</strong></th> <th>Meaning</th> </tr> </thead><tbody> <tr> <td><strong><code>1</code></strong></td> <td>Match</td> </tr> <tr> <td><strong><code>2</code></strong></td> <td>Over</td> </tr> <tr> <td><strong><code>3</code></strong></td> <td>Under</td> </tr> </tbody></table> <h2 id=cancel-type>Cancel Type</h2> <table><thead> <tr> <th><strong>Value Code</strong></th> <th>Meaning</th> </tr> </thead><tbody> <tr> <td><strong><code>1</code></strong></td> <td>Full Cancellation</td> </tr> <tr> <td><strong><code>2</code></strong></td> <td>Partial Cancellation</td> </tr> </tbody></table> <h2 id=bank-code>Bank Code</h2> <table><thead> <tr> <th><strong>Value Code</strong></th> <th>Meaning</th> </tr> </thead><tbody> <tr> <td><strong><code>BMRI</code></strong></td> <td>Bank Mandiri</td> </tr> <tr> <td><strong><code>IBBK</code></strong></td> <td>Bank International Indonesia Maybank</td> </tr> <tr> <td><strong><code>BBBA</code></strong></td> <td>Bank Permata</td> </tr> <tr> <td><strong><code>CENA</code></strong></td> <td>Bank Central Asia</td> </tr> <tr> <td><strong><code>BNIN</code></strong></td> <td>Bank Negara Indonesia 46</td> </tr> <tr> <td><strong><code>HNBN</code></strong></td> <td>Bank KEB Hana Indonesia</td> </tr> <tr> <td><strong><code>BRIN</code></strong></td> <td>Bank Rakyat Indonesia</td> </tr> <tr> <td><strong><code>BNIA</code></strong></td> <td>Bank PT. BANK CIMB NIAGA, TBK.</td> </tr> <tr> <td><strong><code>BDIN</code></strong></td> <td>Bank PT. BANK DANAMON INDONESIA, TBK</td> </tr> <tr> <td><strong><code>OTHR</code></strong></td> <td>etc, unknown</td> </tr> </tbody></table> <h2 id=mitra-code>Mitra Code</h2> <table><thead> <tr> <th><strong>Value Code</strong></th> <th>Meaning</th> </tr> </thead><tbody> <tr> <td><strong><code>ALMA</code></strong></td> <td>CVS Alfamart</td> </tr> <tr> <td><strong><code>INDO</code></strong></td> <td>CVS Indomaret</td> </tr> <tr> <td><strong><code>MDRC</code></strong></td> <td>ClickPay Mandiri</td> </tr> <tr> <td><strong><code>BCAC</code></strong></td> <td>ClickPay BCA</td> </tr> <tr> <td><strong><code>CIMC</code></strong></td> <td>ClickPay CIMB</td> </tr> <tr> <td><strong><code>MDRE</code></strong></td> <td>E-Wallet Mandiri</td> </tr> <tr> <td><strong><code>BCAE</code></strong></td> <td>E-Wallet BCA(Sakuku)</td> </tr> <tr> <td><strong><code>AKLP</code></strong></td> <td>Akulaku</td> </tr> <tr> <td><strong><code>KDVI</code></strong></td> <td>Kredivo</td> </tr> <tr> <td><strong><code>OVOE</code></strong></td> <td>OVO</td> </tr> </tbody></table> <h2 id=error-code>Error Code</h2> <table><thead> <tr> <th>Value</th> <th>Description</th> </tr> </thead><tbody> <tr> <td>&nbsp;</td> <td><strong>Common</strong></td> </tr> <tr> <td>0000</td> <td>Success</td> </tr> <tr> <td>1001</td> <td>Connection error</td> </tr> <tr> <td>1002</td> <td>Socket error</td> </tr> <tr> <td>1003</td> <td>Server error</td> </tr> <tr> <td>1004</td> <td>Timeout error</td> </tr> <tr> <td>9501</td> <td>Invalid transaction number.</td> </tr> <tr> <td>9502</td> <td>Transaction not allowed.</td> </tr> <tr> <td>9503</td> <td>It has been stopped or terminated in its stores.</td> </tr> <tr> <td>9504</td> <td>No offus information.</td> </tr> <tr> <td>9505</td> <td>No bank information.</td> </tr> <tr> <td>9506</td> <td>No Merchant Paymethod information.</td> </tr> <tr> <td>9507</td> <td>Http timeout exception.</td> </tr> <tr> <td>&nbsp;</td> <td><strong>Order</strong></td> </tr> <tr> <td>8001</td> <td>Order registration error.</td> </tr> <tr> <td>8002</td> <td>Order inquiry error.</td> </tr> <tr> <td>8003</td> <td>Order registration data error.</td> </tr> <tr> <td>8004</td> <td>The tXid error during the order inquiry.</td> </tr> <tr> <td>8005</td> <td>OrderAuthType API Response data null.</td> </tr> <tr> <td>9001</td> <td>Failed to register your order. Please check your HTTP Message.</td> </tr> <tr> <td>9002</td> <td>Server is busy. Please kindly try again in few minutes.</td> </tr> <tr> <td>9003</td> <td>Invalid Order.</td> </tr> <tr> <td>9004</td> <td>Error on inquiry of order confirmation.</td> </tr> <tr> <td>9005</td> <td>Failed to check status. Please contact NICEPay for further information.</td> </tr> <tr> <td>9006</td> <td>Transaction number generated error.</td> </tr> <tr> <td>9007</td> <td>Undefined: Amount. Please check your request parameter and make sure [amt] is defined.</td> </tr> <tr> <td>9008</td> <td>Invalid Request Amount. Amount should only number and do not includes decimal.</td> </tr> <tr> <td>9009</td> <td>Reference Number already exist. Please generate unique [referenceNo].</td> </tr> <tr> <td>9010</td> <td>Invalid Merchant Token. Contact NICEPay for further information.</td> </tr> <tr> <td>9011</td> <td>Invalid MID, Merchant is not registered. Contact NICEPay for further information.</td> </tr> <tr> <td>9012</td> <td>This Payment method is currently not activated. Contact Nicepay for further information.</td> </tr> <tr> <td>9013</td> <td>Undefined: Currency Code. Please check your request parameter and make sure [currencyCode] is defined.</td> </tr> <tr> <td>9014</td> <td>Undefined: Reference No. Please check your request parameter and make sure [referenceNo] is defined.</td> </tr> <tr> <td>9015</td> <td>Undefined: Goods Name. Please check your request parameter and make sure [goodsNm] is defined.</td> </tr> <tr> <td>9016</td> <td>Undefined: Buyer Name. Please check your request parameter and make sure [billingNm] is defined.</td> </tr> <tr> <td>9017</td> <td>Undefined: Buyer Phone Number. Please check your request parameter and make sure [billingPhone] is defined.</td> </tr> <tr> <td>9018</td> <td>Undefined: Buyer Email Address. Please check your request parameter and make sure [billingEmail] is defined.</td> </tr> <tr> <td>9019</td> <td>Undefined: Callback URL. Please check your request parameter and make sure [callbackUrl] is defined.</td> </tr> <tr> <td>9020</td> <td>Undefined: Debit Process URL. Please check your request parameter and make sure [dbProcessUrl] is defined.</td> </tr> <tr> <td>9021</td> <td>Failed in inquiring the criterion information (BO_MER_MGNT ORD_NO_DUP_CHK_FLG).</td> </tr> <tr> <td>9022</td> <td>Invalid Card Data. Please check [cartData] parameter, and make sure you send valid JSON format.</td> </tr> <tr> <td>9023</td> <td>Invalid Cart Data. Amount is different with Cart Data total amount. Please make sure [amt] = sum of [amt] in [cartData]</td> </tr> <tr> <td>9024</td> <td>Undefined: Customer IP Address. Please check your request parameter and make sure [userIP] is defined.</td> </tr> <tr> <td>9025</td> <td>Undefined: Buyer City. Please check your request parameter and make sure [billingCity] is defined.</td> </tr> <tr> <td>9026</td> <td>Undefined: Buyer State. Please check your request parameter and make sure [billingState] is defined.</td> </tr> <tr> <td>9027</td> <td>Undefined: Buyer Postal Code. Please check your request parameter and make sure [billingPostCd] is defined.</td> </tr> <tr> <td>9028</td> <td>Undefined: Buyer Country. Please check your request parameter and make sure [billingCountry] is defined.</td> </tr> <tr> <td>9029</td> <td>Installment is not available for defined month</td> </tr> <tr> <td>9030</td> <td>Transaction Fail. Please check information.</td> </tr> <tr> <td>9031</td> <td>Date/Time check.</td> </tr> <tr> <td>&nbsp;</td> <td><strong>Card</strong></td> </tr> <tr> <td>8021</td> <td>Card authorization error.</td> </tr> <tr> <td>8022</td> <td>The tXid error during the card authorization.</td> </tr> <tr> <td>8023</td> <td>The tXid error during the card net cancel.</td> </tr> <tr> <td>8024</td> <td>The MID error during the card net cancel.</td> </tr> <tr> <td>8026</td> <td>Failed card VISA 3D.</td> </tr> <tr> <td>8027</td> <td>Invalid Parameter (PAN or expiry or country_code)</td> </tr> <tr> <td>8028</td> <td>Invalid Parameter (callbackUrl)</td> </tr> <tr> <td>8029</td> <td>Invalid Parameter (onePassToken)</td> </tr> <tr> <td>8030</td> <td>Not Support Keyin Payment.</td> </tr> <tr> <td>9101</td> <td>Server is busy. Please kindly try again in few minutes.</td> </tr> <tr> <td>9102</td> <td>Server is busy. Please kindly try again in few minutes.</td> </tr> <tr> <td>9103</td> <td>Error in inquiring card ledger.</td> </tr> <tr> <td>9104</td> <td>Server is busy. Please kindly try again in few minutes.</td> </tr> <tr> <td>9105</td> <td>Server is busy. Please kindly try again in few minutes.</td> </tr> <tr> <td>9106</td> <td>Transaction failed.</td> </tr> <tr> <td>9107</td> <td>Server is busy. Please kindly try again in few minutes.</td> </tr> <tr> <td>9108</td> <td>This Payment method is currently not activated. Contact Nicepay for further information.</td> </tr> <tr> <td>9109</td> <td>Reference Number Maximum Length Exceed. [referenceNo] should have maximum 40 characters length.</td> </tr> <tr> <td>9110</td> <td>Transaction failed. Please check card information and try again.</td> </tr> <tr> <td>9111</td> <td>Transaction failed. Please check card information and try again.</td> </tr> <tr> <td>9112</td> <td>Transaction failed. Please check card information and try again.</td> </tr> <tr> <td>9113</td> <td>Transaction failed. Please check card information and try again.</td> </tr> <tr> <td>9114</td> <td>MERCHANT_CARDINFO query error.</td> </tr> <tr> <td>9115</td> <td>Invalid Amount: too low. Please increase amount.</td> </tr> <tr> <td>9116</td> <td>Transaction already exist. Please make new transaction.</td> </tr> <tr> <td>9117</td> <td>3D Secure Failed. Please kindly check your card data and try again.</td> </tr> <tr> <td>9118</td> <td>Invalid Installment Type.</td> </tr> <tr> <td>9119</td> <td>Transaction failed: Invalid Terminal ID or Merchant ID</td> </tr> <tr> <td>9120</td> <td>Transaction failed: Invalid Terminal ID or Merchant ID</td> </tr> <tr> <td>9121</td> <td>This Payment method is currently not activated. Contact Nicepay for further information.</td> </tr> <tr> <td>9122</td> <td>Transaction failed. Please check settlement interval.</td> </tr> <tr> <td>9123</td> <td>Transaction failed. Transaction limit reached.</td> </tr> <tr> <td>9124</td> <td>Invalid Amount: too low. Please increase amount.</td> </tr> <tr> <td>9125</td> <td>Transaction failed. Please check card information and try again.</td> </tr> <tr> <td>9126</td> <td>Transaction already approved.</td> </tr> <tr> <td>9127</td> <td>Transaction already exist. Please make new transaction.</td> </tr> <tr> <td>9128</td> <td>Transaction failed. Please check card information and try again.</td> </tr> <tr> <td>9129</td> <td>Transaction failed: Expired transaction. Please make new transaction.</td> </tr> <tr> <td>9130</td> <td>Forbidden. You do not have permission to access this resource.</td> </tr> <tr> <td>9131</td> <td>Invalid Token. Please check [onePassToken] parameter</td> </tr> <tr> <td>9132</td> <td>Transaction failed. Please check Risk Management.</td> </tr> <tr> <td>9133</td> <td>Email not sent.</td> </tr> <tr> <td>9134</td> <td>Card Recurring Token Failed.</td> </tr> <tr> <td>9135</td> <td>Card Recurring Auto Void Failed.</td> </tr> <tr> <td>9136</td> <td>Card Recurring Token Unregistraion Failed.</td> </tr> <tr> <td>9137</td> <td>Card MIGS Transaction Number not found. (queryDR, vpc_DRExists : N)</td> </tr> <tr> <td>9138</td> <td>Card MIGS SecureHash not match.</td> </tr> <tr> <td>9139</td> <td>Card MIGS Amount not match.</td> </tr> <tr> <td>9140</td> <td>Recurring Payment Parameter CVV code is mandatary.</td> </tr> <tr> <td>9141</td> <td>Recurring Payment AuthType is &#39;1&#39; or &#39;2&#39;.</td> </tr> <tr> <td>9142</td> <td>Cards issued overseas can not be paymented.</td> </tr> <tr> <td>9143</td> <td>Card PreAuth Token Failed.</td> </tr> <tr> <td>9144</td> <td>Card PreAuth Token Unregistraion Failed.</td> </tr> <tr> <td>9145</td> <td>capture amount must be less than pre-authorised amount.</td> </tr> <tr> <td>9146</td> <td>Failed to card token inquiry</td> </tr> <tr> <td>9147</td> <td>Invalid parameters.</td> </tr> <tr> <td>9148</td> <td>Recurring Token is only available for 3DS.</td> </tr> <tr> <td>9149</td> <td>Recurring Payment Use Check : Fail.</td> </tr> <tr> <td>9150</td> <td>Recurring Payment CVV Check : Fail.</td> </tr> <tr> <td>9151</td> <td>cardBin Information exist in blackList.</td> </tr> <tr> <td>9152</td> <td>FDS Check : high risk score.</td> </tr> <tr> <td>9153</td> <td>FDS Check : binCountry is not local card.</td> </tr> <tr> <td>9154</td> <td>card daily transaction limit count over.</td> </tr> <tr> <td>9155</td> <td>card daily transaction limit amount over.</td> </tr> <tr> <td>9156</td> <td>FDS Check : server communication error.</td> </tr> <tr> <td>9157</td> <td>There is no valid authentication data. Please make new transaction.</td> </tr> <tr> <td>9158</td> <td>Card Holder Name is Mandatory.</td> </tr> <tr> <td>9159</td> <td>Transaction failed. please contact merchant.</td> </tr> <tr> <td>9160</td> <td>Invalid expired date format YYMM</td> </tr> <tr> <td>9161</td> <td>Token not found</td> </tr> <tr> <td>9162</td> <td>FDS Check : binCountry is not permit to payment.</td> </tr> <tr> <td>00</td> <td>Successful approval/completion or that V.I.P. PIN verification is valid</td> </tr> <tr> <td>01</td> <td>Refer to card issuer</td> </tr> <tr> <td>02</td> <td>Refer to card issuer, special condition</td> </tr> <tr> <td>03</td> <td>Invalid merchant or service provider</td> </tr> <tr> <td>04</td> <td>Pickup card</td> </tr> <tr> <td>05</td> <td>Do not honor</td> </tr> <tr> <td>06</td> <td>General Error</td> </tr> <tr> <td>07</td> <td>Pickup card, special condition (other than lost/stolen card)</td> </tr> <tr> <td>08</td> <td>Honor with identification</td> </tr> <tr> <td>09</td> <td>Request in progress</td> </tr> <tr> <td>10</td> <td>Partial Approval</td> </tr> <tr> <td>11</td> <td>V.I.P. approval</td> </tr> <tr> <td>12</td> <td>Invalid transaction</td> </tr> <tr> <td>13</td> <td>Invalid amount (currency conversion field overflow) or amount exceeds maximum for card program</td> </tr> <tr> <td>14</td> <td>Invalid account number (no such number)</td> </tr> <tr> <td>15</td> <td>No such issuer</td> </tr> <tr> <td>16</td> <td>Insufficient funds</td> </tr> <tr> <td>17</td> <td>Customer cancellation</td> </tr> <tr> <td>19</td> <td>Re-enter transaction</td> </tr> <tr> <td>20</td> <td>Invalid response</td> </tr> <tr> <td>21</td> <td>No action taken (unable to back out prior transaction)</td> </tr> <tr> <td>22</td> <td>Suspected Malfunction</td> </tr> <tr> <td>25</td> <td>Unable to locate record in file, or account number is missing from the inquiry</td> </tr> <tr> <td>28</td> <td>File is temporarily unavailable</td> </tr> <tr> <td>30</td> <td>Format Error</td> </tr> <tr> <td>41</td> <td>Pickup card (lost card)</td> </tr> <tr> <td>43</td> <td>Pickup card (stolen card)</td> </tr> <tr> <td>51</td> <td>Insufficient funds</td> </tr> <tr> <td>52</td> <td>No checking account</td> </tr> <tr> <td>53</td> <td>No savings account</td> </tr> <tr> <td>54</td> <td>Expired card</td> </tr> <tr> <td>55</td> <td>Incorrect PIN</td> </tr> <tr> <td>57</td> <td>Transaction not permitted to cardholder</td> </tr> <tr> <td>58</td> <td>Transaction not allowed at terminal</td> </tr> <tr> <td>59</td> <td>Suspected fraud</td> </tr> <tr> <td>61</td> <td>Activity amount limit exceeded</td> </tr> <tr> <td>62</td> <td>Restricted card (for example, in Country Exclusion table)</td> </tr> <tr> <td>63</td> <td>Security violation</td> </tr> <tr> <td>65</td> <td>Activity count limit exceeded</td> </tr> <tr> <td>68</td> <td>Response received too late</td> </tr> <tr> <td>75</td> <td>Allowable number of PIN - entry tries exceeded</td> </tr> <tr> <td>76</td> <td>Unable to locate previous message (no match on Retrieval Reference number)</td> </tr> <tr> <td>77</td> <td>Previous message located for a repeat or reversal, but repeat or reversal data are inconsistent with original message</td> </tr> <tr> <td>78</td> <td>’Blocked, first used’ - The transaction is from a new cardholder, and the card has not been properly unblocked.</td> </tr> <tr> <td>80</td> <td>Visa transactions: credit issuer unavailable. Private label and check acceptance: Invalid date</td> </tr> <tr> <td>81</td> <td>PIN cryptographic error found (error found by VIC security module during PIN decryption)</td> </tr> <tr> <td>82</td> <td>Negative CAM, dCVV, iCVV, or CVV results</td> </tr> <tr> <td>83</td> <td>Unable to verify PIN</td> </tr> <tr> <td>85</td> <td>No reason to decline a request for account number verification, address verification, CVV2 verification, or a credit voucher or merchandise return</td> </tr> <tr> <td>91</td> <td>Issuer unavailable or switch inoperative (STIP not applicable or available for this transaction)</td> </tr> <tr> <td>92</td> <td>Destination cannot be found for routing</td> </tr> <tr> <td>93</td> <td>Transaction cannot be completed, violation of law</td> </tr> <tr> <td>94</td> <td>Duplicate Transmission</td> </tr> <tr> <td>95</td> <td>Reconcile error</td> </tr> <tr> <td>96</td> <td>System malfunction, System malfunction or certain field error conditions</td> </tr> <tr> <td>B1</td> <td>Surcharge amount not permitted on Visa cards (U.S. acquirers only)</td> </tr> <tr> <td>N0</td> <td>Force STIP</td> </tr> <tr> <td>N3</td> <td>Cash service not available</td> </tr> <tr> <td>N4</td> <td>Cashback request exceeds issuer limit</td> </tr> <tr> <td>N7</td> <td>Decline for CVV2 failure</td> </tr> <tr> <td>P2</td> <td>Invalid biller information</td> </tr> <tr> <td>P5</td> <td>PIN Change/Unblock request declined</td> </tr> <tr> <td>P6</td> <td>Unsafe PIN</td> </tr> <tr> <td>Q1</td> <td>Card Authentication failed</td> </tr> <tr> <td>R0</td> <td>Stop Payment Order</td> </tr> <tr> <td>R1</td> <td>Revocation of Authorization Order</td> </tr> <tr> <td>R3</td> <td>Revocation of All Authorizations Order</td> </tr> <tr> <td>XA</td> <td>Forward to issuer</td> </tr> <tr> <td>XD</td> <td>Forward to issuer</td> </tr> <tr> <td>Z3</td> <td>Unable to go online</td> </tr> <tr> <td>C101</td> <td>Error setting mandatory fields, TRANSACTION_TYPE is empty!</td> </tr> <tr> <td>C102</td> <td>Invalid value for TRANSACTION_TYPE! Acceptable Value : QUERY=1, SALES=2, AUTHORIZED=3, CAPTURE=4</td> </tr> <tr> <td>C103</td> <td>This transaction is not authorized, cannot proceed to be captured.</td> </tr> <tr> <td>C104</td> <td>Error setting mandatory fields, MERCHANT_ACC_NO is empty!</td> </tr> <tr> <td>C105</td> <td>Invalid MERCHANT_ACC_NO! Unable to find merchant with provided MERCHANT_ACC_NO.</td> </tr> <tr> <td>C106</td> <td>The status of this MERCHANT_ACC_NO is suspended! All transactions are not allowed temporary. Please check with administrator for the status.</td> </tr> <tr> <td>C107</td> <td>The status of this MERCHANT_ACC_NO is still pending and not yet activated. Please check with administrator for the status.</td> </tr> <tr> <td>C108</td> <td>The status of this MERCHANT_ACC_NO is invalid! Please check the merchant setting.</td> </tr> <tr> <td>C109</td> <td>The setting of this MERCHANT_ACC_NO does not allow the requested transaction type. Please check the merchant setting.</td> </tr> <tr> <td>C110</td> <td>The setting of this MERCHANT_ACC_NO do not allow transaction request from this IP address. Please checks the merchant allow IP setting.</td> </tr> <tr> <td>C111</td> <td>Error setting mandatory fields, AMOUNT is empty!</td> </tr> <tr> <td>C112</td> <td>Invalid value for AMOUNT</td> </tr> <tr> <td>C113</td> <td>Error setting mandatory fields, CARD_NO is empty!</td> </tr> <tr> <td>C114</td> <td>Error setting mandatory fields, CARD_EXP_MM is empty!</td> </tr> <tr> <td>C115</td> <td>Error setting mandatory fields, CARD_EXP_YY is empty!</td> </tr> <tr> <td>C116</td> <td>Error setting mandatory fields, CARD_CVC is empty!</td> </tr> <tr> <td>C117</td> <td>Invalid value for CARD_NO. CARD_NO must be numeric and with valid length!</td> </tr> <tr> <td>C118</td> <td>Invalid value for CARD_EXP_MM. CARD_EXP_MM must be numeric and with valid length!</td> </tr> <tr> <td>C119</td> <td>Invalid value for CARD_EXP_YY. CARD_EXP_YY must be numeric and with valid length!</td> </tr> <tr> <td>C120</td> <td>Invalid value for CARD_CVC. CARD_CVC must be numeric and with valid length!</td> </tr> <tr> <td>C121</td> <td>Invalid payment method. Please call bank to check Merchant Settings.</td> </tr> <tr> <td>C122</td> <td>Amount has been over transaction limit for today. Please call bank to check Merchant Settings.</td> </tr> <tr> <td>C123</td> <td>Transaction not permitted through this merchant type. Please call bank to check Merchant Settings.</td> </tr> <tr> <td>C124</td> <td>Undefined Error. Error Code:1024</td> </tr> <tr> <td>C301</td> <td>Error setting mandatory fields, TRANSACTION_ID is empty! TRANSACTION_ID is required for CAPTURE transaction type</td> </tr> <tr> <td>C302</td> <td>Error setting mandatory fields, RETURN_URL is empty!</td> </tr> <tr> <td>C303</td> <td>Error setting mandatory fields, RESPONSE_TYPE is empty!</td> </tr> <tr> <td>C304</td> <td>Error setting mandatory fields, TXN_URL is Null for RESPONSE_TYPE using HTTP!</td> </tr> <tr> <td>C305</td> <td>Invalid value for RESPONSE_TYPE for non-3D transaction! Acceptable Value : HTTP, XML, PLAIN</td> </tr> <tr> <td>C306</td> <td>Error setting mandatory fields, TXN_SIGNATURE is empty!</td> </tr> <tr> <td>C307</td> <td>Invalid value for TXN_SIGNATURE! Computed signature does not match one included in the request.</td> </tr> <tr> <td>C308</td> <td>Invalid format for TXN_SIGNATURE! TXN_SIGNATURE must be length of 32, and in hexadecimal format.</td> </tr> <tr> <td>C309</td> <td>Unable to find the transaction record!</td> </tr> <tr> <td>C310</td> <td>MERCHANT_ACC_NO not matched with previous submitted transaction request! To capture/query previous transaction, please ensure the MERCHANT_ACC_NO is the same MERCHANT_ACC_NO submitted during previous transaction.</td> </tr> <tr> <td>C311</td> <td>AMOUNT not matched with previous submitted transaction request! To capture/query previous transaction, please ensure the AMOUNT is the same AMOUNT submitted during previous transaction.</td> </tr> <tr> <td>C312</td> <td>CUSTOMER_ID not matched with previous submitted transaction request! To capture/query previous transaction, if this field is being used, please ensure the CUSTOMER_ID is the same CUSTOMER_ID submitted during previous transaction.</td> </tr> <tr> <td>C313</td> <td>MERCHANT_TRANID not matched with previous submitted transaction request! To capture/query previous transaction, please ensure the MERCHANT_TRANID is the same MERCHANT_TRANID submitted during previous transaction.</td> </tr> <tr> <td>C314</td> <td>Insecure mode for RETURN_URL. Please specify an URL which uses HTTPS protocol!</td> </tr> <tr> <td>C315</td> <td>Insecure mode for TXN_URL. Please specify an URL which uses HTTPS protocol!</td> </tr> <tr> <td>C401</td> <td>Error setting mandatory fields, CARD_HOLDER_NAME is empty!</td> </tr> <tr> <td>C402</td> <td>Error setting mandatory fields, MERCHANT_TRANID is empty!</td> </tr> <tr> <td>C403</td> <td>Duplicate MERCHANT_TRANID detected! Please ensure the MERCHANT_TRANID is always unique.</td> </tr> <tr> <td>C404</td> <td>Error setting mandatory fields, TXN_DESC is empty!</td> </tr> <tr> <td>C405</td> <td>Error setting mandatory fields for 3D transaction, MPI_CODE is empty!</td> </tr> <tr> <td>C406</td> <td>Error setting mandatory fields for 3D transaction, MPI_CAVV is empty!</td> </tr> <tr> <td>C407</td> <td>Error setting mandatory fields for 3D transaction, MPI_CAVV_ALG is empty!</td> </tr> <tr> <td>C408</td> <td>Error setting mandatory fields for 3D transaction, MPI_ECI is empty!</td> </tr> <tr> <td>C409</td> <td>Error setting mandatory fields for 3D transaction, MPI_MSG is empty!</td> </tr> <tr> <td>C501</td> <td>Error setting mandatory fields for fraud risk detection, FR_HIGHRISK_EMAIL is empty!</td> </tr> <tr> <td>C502</td> <td>Error setting mandatory fields for fraud risk detection, FR_HIGHRISK_COUNTRY is empty!</td> </tr> <tr> <td>C503</td> <td>Error setting mandatory fields for fraud risk detection, FR_BILLING_ADDRESS is empty!</td> </tr> <tr> <td>C504</td> <td>Error setting mandatory fields for fraud risk detection, FR_SHIPPING_ADDRESS is empty!</td> </tr> <tr> <td>C505</td> <td>Error setting mandatory fields for fraud risk detection, FR_SHIPPING_COST is empty!</td> </tr> <tr> <td>C506</td> <td>Error setting mandatory fields for fraud risk detection, CUSTOMER_IP is empty!</td> </tr> <tr> <td>C507</td> <td>Error setting mandatory fields for fraud risk detection, FR_PURCHASE_HOUR is empty!</td> </tr> <tr> <td>C508</td> <td>Transaction was blocked due to fraud level exceeded threshold limit.</td> </tr> <tr> <td>C509</td> <td>Transaction was blocked due to blacklisted card detected.</td> </tr> <tr> <td>C601</td> <td>Unable to get connection to MPI Server!</td> </tr> <tr> <td>C602</td> <td>Time out occurred during communication with MPI Server!</td> </tr> <tr> <td>C603</td> <td>Unable to update MPI Ref. No in system. Please try again.</td> </tr> <tr> <td>C604</td> <td>There was an error occurred during 3D authentication with MPI. Please check logs for details.</td> </tr> <tr> <td>C605</td> <td>Invalid message or response received from MPI. Please try again.</td> </tr> <tr> <td>C606</td> <td>MPI Settings are not configured correctly. Please check MPI_HOST and MPI_PORT in system configuration.</td> </tr> <tr> <td>C607</td> <td>Error occurred when trying to display ACS Form in web browser for 3D authentication. Please try again.</td> </tr> <tr> <td>C608</td> <td>Problem occurred on MPI side, cannot proceed to display ACS Form. Please check MPI message or try again.</td> </tr> <tr> <td>C609</td> <td>Unable to locate back transaction to update system after 3-D authentication process. Please try again.</td> </tr> <tr> <td>C610</td> <td>Empty response received from MPI, please try again.</td> </tr> <tr> <td>C611</td> <td>MPI Code received is not allowed to proceed to process the transaction.</td> </tr> <tr> <td>C612</td> <td>Transaction was aborted because 3-D authentication process is not completed.</td> </tr> <tr> <td>C613</td> <td>Attempted duplicate submission of 3-D authentication result. Please try with new transaction.</td> </tr> <tr> <td>C614</td> <td>MALL NAME is required for 3-D transaction. Please call bank to check Merchant Settings.</td> </tr> <tr> <td>C615</td> <td>MALL URL is required for 3-D transaction. Please call bank to check Merchant Settings.</td> </tr> <tr> <td>C616</td> <td>Invalid value for RESPONSE_TYPE for 3D transaction! Acceptable Value : HTTP only</td> </tr> <tr> <td>C801</td> <td>This MERCHANT_ACC_NO is not authorized to proceed with this transaction via website! Please check the merchant setting.</td> </tr> <tr> <td>C802</td> <td>This MERCHANT_ACC_NO is not authorized to proceed with this transaction via batch upload! Please check the merchant setting.</td> </tr> <tr> <td>C803</td> <td>Exception while query Payment Server!</td> </tr> <tr> <td>C804</td> <td>Exception while checking for fraud risk!</td> </tr> <tr> <td>C999</td> <td>Internal Exception. Please call bank to report.</td> </tr> <tr> <td>C988</td> <td>Server Time Out Exception.</td> </tr> <tr> <td>C977</td> <td>Bank Connection Error!</td> </tr> <tr> <td>C966</td> <td>Reply from bank is empty/incorrect!</td> </tr> <tr> <td>C967</td> <td>Bank rejected transaction!</td> </tr> <tr> <td>C955</td> <td>Error when trying to insert transaction table. Transaction ID is empty!</td> </tr> <tr> <td>C933</td> <td>Server interruption occurred during processing. Manual checking required. Please inform Administrator.</td> </tr> <tr> <td>C935</td> <td>Cancel payment by customer.</td> </tr> <tr> <td>C937</td> <td>Insufficient point to redeem in cardholder&#39;s account. Please enter another card number.</td> </tr> <tr> <td>1</td> <td>Transaction could not be processed</td> </tr> <tr> <td>2</td> <td>Transaction Declined - Contact Issuing Bank</td> </tr> <tr> <td>3</td> <td>Transaction Declined- No reply from Bank</td> </tr> <tr> <td>4</td> <td>Transaction Declined - Expired Card</td> </tr> <tr> <td>5</td> <td>Transaction Declined - Insufficient credit</td> </tr> <tr> <td>6</td> <td>Transaction Declined - Bank system error</td> </tr> <tr> <td>7</td> <td>Payment Server Processing Error - Typically caused by invalid input data such as an invalid credit card number. Processing errors can also occur. (This is only relevant for Payment Servers that enforce the uniqueness of this field) Processing errors can also occur.</td> </tr> <tr> <td>8</td> <td>Transaction Declined - Transaction Type Not Supported</td> </tr> <tr> <td>9</td> <td>Bank Declined Transaction (Do not contact Bank)</td> </tr> <tr> <td>A</td> <td>Transaction Aborted</td> </tr> <tr> <td>B</td> <td>Transaction Blocked - Returned</td> </tr> <tr> <td>C</td> <td>Transaction Cancelled</td> </tr> <tr> <td>D</td> <td>Deferred Transaction</td> </tr> <tr> <td>E</td> <td>Transaction Declined - Refer to card issuer</td> </tr> <tr> <td>F</td> <td>3D Secure Authentication Failed</td> </tr> <tr> <td>I</td> <td>Card Security Code Failed</td> </tr> <tr> <td>L</td> <td>Shopping Transaction Locked (This indicates that there is another transaction taking place using the same shopping transaction number)</td> </tr> <tr> <td>N</td> <td>Cardholder is not enrolled in 3D Secure (Authentication Only)</td> </tr> <tr> <td>P</td> <td>Transaction is Pending</td> </tr> <tr> <td>R</td> <td>Retry Limits Exceeded, Transaction Not Processed</td> </tr> <tr> <td>T</td> <td>Address Verification Failed</td> </tr> <tr> <td>U</td> <td>Card Security Code Failed</td> </tr> <tr> <td>V</td> <td>Address Verification and Card Security Code Failed</td> </tr> <tr> <td>&nbsp;</td> <td><strong>Virtual Account</strong></td> </tr> <tr> <td>8041</td> <td>Virtual account registration error.</td> </tr> <tr> <td>8042</td> <td>The tXid error during the vertual account registration.</td> </tr> <tr> <td>8045</td> <td>requestVacctCustomerInquiryAPI is null.</td> </tr> <tr> <td>9201</td> <td>Server is busy. Please kindly try again in few minutes.</td> </tr> <tr> <td>9202</td> <td>Server is busy. Please kindly try again in few minutes.</td> </tr> <tr> <td>9203</td> <td>Failed to generate virtual account. Pool is empty or reached maximum.</td> </tr> <tr> <td>9204</td> <td>Server is busy. Please kindly try again in few minutes.</td> </tr> <tr> <td>9205</td> <td>Failed to generate virtual account. Invalid Virtual Account.</td> </tr> <tr> <td>9206</td> <td>Server is busy. Please kindly try again in few minutes.</td> </tr> <tr> <td>9207</td> <td>Reference Number Maximum Length Exceed. [referenceNo] should have maximum 40 characters length.</td> </tr> <tr> <td>9208</td> <td>Error in non-usage of criterion information.</td> </tr> <tr> <td>9209</td> <td>the payment amount is too small.</td> </tr> <tr> <td>9210</td> <td>Error in expiration date of deposit, expiration time for deposit, and inclusion of letters.</td> </tr> <tr> <td>9211</td> <td>Expiration date and time for deposit length is not valid.</td> </tr> <tr> <td>9212</td> <td>Error of check for merchant ID, payment method.</td> </tr> <tr> <td>9213</td> <td>TB_TRANS_HISTORY registration error.</td> </tr> <tr> <td>9214</td> <td>Failed in inquiring settlement interval.</td> </tr> <tr> <td>9215</td> <td>Order number redundancy check (TB_MOID_VERIFY) updates error.</td> </tr> <tr> <td>9216</td> <td>Virtual account failure ledger (TB_VACCT_FAIL) registration error.</td> </tr> <tr> <td>9217</td> <td>Order number redundancy check (TB_MOID_VERIFY) delete error.</td> </tr> <tr> <td>9218</td> <td>Virtual account ledger inquiry failure.</td> </tr> <tr> <td>9219</td> <td>Server is busy. Please kindly try again in few minutes.</td> </tr> <tr> <td>9220</td> <td>Server is busy. Please kindly try again in few minutes.</td> </tr> <tr> <td>9221</td> <td>Error in non-usage of criterion information(VACCT_SET).</td> </tr> <tr> <td>9222</td> <td>Error in non-usage of criterion information(VACCT_CONT).</td> </tr> <tr> <td>9223</td> <td>Invalid customer id.</td> </tr> <tr> <td>9224</td> <td>Error of check for customerId.</td> </tr> <tr> <td>9225</td> <td>Invalid Merchant Token. Contact NICEPay for further information.</td> </tr> <tr> <td>9226</td> <td>VacctNo is exceeded limit digit.</td> </tr> <tr> <td>9227</td> <td>DB insert error.</td> </tr> <tr> <td>9228</td> <td>Transaction not found.</td> </tr> <tr> <td>9229</td> <td>Fix account accountType error.</td> </tr> <tr> <td>9230</td> <td>Not exist customerId.</td> </tr> <tr> <td>9231</td> <td>Data is null error.</td> </tr> <tr> <td>9232</td> <td>iMid is exist.</td> </tr> <tr> <td>9233</td> <td>vacctNo is duplicate.</td> </tr> <tr> <td>9234</td> <td>customerId already exist.</td> </tr> <tr> <td>9235</td> <td>Invalid customer name.</td> </tr> <tr> <td>9236</td> <td>Try check date.</td> </tr> <tr> <td>9237</td> <td>Invalid BankCd.</td> </tr> <tr> <td>&nbsp;</td> <td><strong>Cancel</strong></td> </tr> <tr> <td>8061</td> <td>Full canceled error.</td> </tr> <tr> <td>8062</td> <td>Partial cancled error.</td> </tr> <tr> <td>8063</td> <td>The MID error during the full cancel.</td> </tr> <tr> <td>8064</td> <td>The tXID error during the full cancel.</td> </tr> <tr> <td>8065</td> <td>The MID error during the partial cancel.</td> </tr> <tr> <td>8066</td> <td>The tXID error during the partial cancel.</td> </tr> <tr> <td>8067</td> <td>The amount error during the partial cancel.</td> </tr> <tr> <td>8090</td> <td>Net canceled error.</td> </tr> <tr> <td>9301</td> <td>Invalid Cancel Type.</td> </tr> <tr> <td>9302</td> <td>Server is busy. Please kindly try again in few minutes.</td> </tr> <tr> <td>9303</td> <td>Server is busy. Please kindly try again in few minutes.</td> </tr> <tr> <td>9304</td> <td>TB_TRANS_HISTORY update error.</td> </tr> <tr> <td>9305</td> <td>Ledger card registration error.</td> </tr> <tr> <td>9306</td> <td>Ledger partial cancel registration error.</td> </tr> <tr> <td>9307</td> <td>Cards query error.</td> </tr> <tr> <td>9308</td> <td>Database connection error.</td> </tr> <tr> <td>9309</td> <td>Bank connection error.</td> </tr> <tr> <td>9310</td> <td>TB_TRANS HISTORY registration error.</td> </tr> <tr> <td>9311</td> <td>Transaction number generated error.</td> </tr> <tr> <td>9312</td> <td>No cancellation amount or cancellation amount includes the letter.</td> </tr> <tr> <td>9313</td> <td>Partial cancellation is only possible mandiri.</td> </tr> <tr> <td>9314</td> <td>Can not cancel your request transaction number.</td> </tr> <tr> <td>9315</td> <td>Cancel Ledger duplicate registration error.</td> </tr> <tr> <td>9316</td> <td>Bank code duplication errors.</td> </tr> <tr> <td>9317</td> <td>Bank Mandiri is available once a partial canceled.</td> </tr> <tr> <td>9318</td> <td>Virtual account can not request to cancel.</td> </tr> <tr> <td>9319</td> <td>The amount you entered is larger than the amount you want to cancel.</td> </tr> <tr> <td>9320</td> <td>Can not cancel the entire data already partially canceled.</td> </tr> <tr> <td>9321</td> <td>Please fill in the requested amount greater than zero.</td> </tr> <tr> <td>9322</td> <td>Merchant infomaition(CARD_BIN) query fail.</td> </tr> <tr> <td>9323</td> <td>Merchant infomaition(Merchant_INFO) query fail.</td> </tr> <tr> <td>9324</td> <td>MERCHANT_CARDINFO query error.</td> </tr> <tr> <td>9325</td> <td>B_MID,B_TID query error.</td> </tr> <tr> <td>9326</td> <td>It can not be canceled after purchase.</td> </tr> <tr> <td>9327</td> <td>It can not be partial cancelation before purchase.</td> </tr> <tr> <td>9328</td> <td>The information can not be canceled (Void Risk Check).</td> </tr> <tr> <td>9329</td> <td>The information can not be partial cancelation (Void Risk Check).</td> </tr> <tr> <td>9330</td> <td>Virtual account deposit has been completed can not be canceled.</td> </tr> <tr> <td>9331</td> <td>The merchant can not be canceled.</td> </tr> <tr> <td>9332</td> <td>The merchant can not be partial cancellation.</td> </tr> <tr> <td>9333</td> <td>The merchant can not be cancellation. (Debt cancellation prevent restrictions)</td> </tr> <tr> <td>9334</td> <td>Cancellation period exceeds(limit 90 days).</td> </tr> <tr> <td>&nbsp;</td> <td><strong>One Pass</strong></td> </tr> <tr> <td>8200</td> <td>One Pass inquiry error.</td> </tr> <tr> <td>8201</td> <td>OnePass Token Duplicate.</td> </tr> <tr> <td>8202</td> <td>OnePass Invalid Amount.</td> </tr> <tr> <td>&nbsp;</td> <td><strong>CVS</strong></td> </tr> <tr> <td>9501</td> <td>Server is busy. Please kindly try again in few minutes.</td> </tr> <tr> <td>9502</td> <td>Server is busy. Please kindly try again in few minutes.</td> </tr> <tr> <td>9503</td> <td>Failed to generate CVS Number. Pool is empty or reached maximum.</td> </tr> <tr> <td>9504</td> <td>Server is busy. Please kindly try again in few minutes.</td> </tr> <tr> <td>9505</td> <td>Failed to generate virtual account. Invalid CVS.</td> </tr> <tr> <td>9506</td> <td>Server is busy. Please kindly try again in few minutes.</td> </tr> <tr> <td>9507</td> <td>Reference Number Maximum Length Exceed. [referenceNo] should have maximum 40 characters length.</td> </tr> <tr> <td>9508</td> <td>Error in non-usage of criterion information.</td> </tr> <tr> <td>9509</td> <td>the payment amount is too small.</td> </tr> <tr> <td>9510</td> <td>Error in expiration date of deposit, expiration time for deposit, and inclusion of letters.</td> </tr> <tr> <td>9511</td> <td>Expiration date and time for deposit length is not valid.</td> </tr> <tr> <td>9512</td> <td>Error of check for merchant ID, payment method.</td> </tr> <tr> <td>9513</td> <td>TB_TRANS_HISTORY registration error.</td> </tr> <tr> <td>9514</td> <td>Failed in inquiring settlement interval.</td> </tr> <tr> <td>9515</td> <td>Order number redundancy check (TB_MOID_VERIFY) updates error.</td> </tr> <tr> <td>9516</td> <td>CVS NUmber failure ledger (TB_CVS_FAIL) registration error.</td> </tr> <tr> <td>9517</td> <td>Order number redundancy check (TB_MOID_VERIFY) delete error.</td> </tr> <tr> <td>9518</td> <td>CVS ledger inquiry failure.</td> </tr> <tr> <td>9519</td> <td>Server is busy. Please kindly try again in few minutes.</td> </tr> <tr> <td>9520</td> <td>Server is busy. Please kindly try again in few minutes.</td> </tr> <tr> <td>9521</td> <td>Error in non-usage of criterion information(CVS_SET).</td> </tr> <tr> <td>9522</td> <td>Error in non-usage of criterion information(MITRA_CONT).</td> </tr> <tr> <td>9523</td> <td>Invalid customer id.</td> </tr> <tr> <td>9524</td> <td>Error of check for customerId.</td> </tr> <tr> <td>9525</td> <td>Invalid Merchant Token. Contact NICEPay for further information.</td> </tr> <tr> <td>9526</td> <td>CVS Number is exceeded limit digit.</td> </tr> <tr> <td>9527</td> <td>DB insert error.</td> </tr> <tr> <td>9528</td> <td>Transaction not found.</td> </tr> <tr> <td>9529</td> <td>Fix account accountType error.</td> </tr> <tr> <td>9530</td> <td>Not exist customerId.</td> </tr> <tr> <td>9531</td> <td>Data is null error.</td> </tr> <tr> <td>9532</td> <td>iMid is exist.</td> </tr> <tr> <td>9533</td> <td>CVS Number is duplicate.</td> </tr> <tr> <td>9534</td> <td>customerId already exist.</td> </tr> <tr> <td>9535</td> <td>Invalid customer name.</td> </tr> <tr> <td>9536</td> <td>Try check date.</td> </tr> <tr> <td>&nbsp;</td> <td><strong>EWALLET</strong></td> </tr> <tr> <td>9750</td> <td>E-Wallet Generate ID Fail.</td> </tr> <tr> <td>9751</td> <td>Invalid Parameter.</td> </tr> <tr> <td>9752</td> <td>E-Wallet Payment Fail.</td> </tr> <tr> <td>&nbsp;</td> <td><strong>CLICKPAY</strong></td> </tr> <tr> <td>9801</td> <td>Internal system error</td> </tr> <tr> <td>9802</td> <td>Invalid parameter</td> </tr> <tr> <td>9803</td> <td>User registration error</td> </tr> <tr> <td>9804</td> <td>Invalid Token</td> </tr> <tr> <td>9805</td> <td>Invalid Card Number</td> </tr> <tr> <td>9806</td> <td>Transaction Payment Fail</td> </tr> <tr> <td>9807</td> <td>Transaction Reversal Fail</td> </tr> <tr> <td>9808</td> <td>TXID is duplicate</td> </tr> <tr> <td>9809</td> <td>Failed in inquiring settlement interval</td> </tr> <tr> <td>9810</td> <td>Other error</td> </tr> </tbody></table> <h2 id=cimb-error-code>CIMB Error Code</h2> <table><thead> <tr> <th>Value</th> <th>Description</th> </tr> </thead><tbody> <tr> <td>0</td> <td>APPROVED OR COMPLETED</td> </tr> <tr> <td>1001</td> <td>Error setting mandatory fields, TRANSACTION_TYPE is empty!</td> </tr> <tr> <td>1002</td> <td>Invalid value for TRANSACTION_TYPE! Acceptable Value : QUERY=1, SALES=2, AUTHORIZED=3, CAPTURE=4</td> </tr> <tr> <td>1003</td> <td>This transaction is not authorized, cannot proceed to be captured.</td> </tr> <tr> <td>1004</td> <td>Error setting mandatory fields, MERCHANT_ACC_NO is empty!</td> </tr> <tr> <td>1005</td> <td>Invalid MERCHANT_ACC_NO! Unable to find merchant with provided MERCHANT_ACC_NO.</td> </tr> <tr> <td>1006</td> <td>The status of this MERCHANT_ACC_NO is suspended! All transactions are not allowed temporary. Please check with administrator for the status.</td> </tr> <tr> <td>1007</td> <td>The status of this MERCHANT_ACC_NO is still pending and not yet activated. Please check with administrator for the status.</td> </tr> <tr> <td>1008</td> <td>The status of this MERCHANT_ACC_NO is invalid! Please check the merchant setting.</td> </tr> <tr> <td>1009</td> <td>The setting of this MERCHANT_ACC_NO does not allow the requested transaction type. Please check the merchant setting.</td> </tr> <tr> <td>1010</td> <td>The setting of this MERCHANT_ACC_NO do not allow transaction request from this IP address. Please checks the merchant allow IP setting.</td> </tr> <tr> <td>1011</td> <td>Error setting mandatory fields, AMOUNT is empty!</td> </tr> <tr> <td>1012</td> <td>Invalid value for AMOUNT</td> </tr> <tr> <td>1013</td> <td>Error setting mandatory fields, CARD_NO is empty!</td> </tr> <tr> <td>1014</td> <td>Error setting mandatory fields, CARD_EXP_MM is empty!</td> </tr> <tr> <td>1015</td> <td>Error setting mandatory fields, CARD_EXP_YY is empty!</td> </tr> <tr> <td>1016</td> <td>Error setting mandatory fields, CARD_CVC is empty!</td> </tr> <tr> <td>1017</td> <td>Invalid value for CARD_NO. CARD_NO must be numeric and with valid length!</td> </tr> <tr> <td>1018</td> <td>Invalid value for CARD_EXP_MM. CARD_EXP_MM must be numeric and with valid length!</td> </tr> <tr> <td>1019</td> <td>Invalid value for CARD_EXP_YY. CARD_EXP_YY must be numeric and with valid length!</td> </tr> <tr> <td>1020</td> <td>Invalid value for CARD_CVC. CARD_CVC must be numeric and with valid length!</td> </tr> <tr> <td>1021</td> <td>Invalid payment method. Please call bank to check Merchant Settings.</td> </tr> <tr> <td>1022</td> <td>Amount has been over transaction limit for today. Please call bank to check Merchant Settings.</td> </tr> <tr> <td>1023</td> <td>Transaction not permitted through this merchant type. Please call bank to check Merchant Settings.</td> </tr> <tr> <td>1024</td> <td>Undefined Error. Error Code:1024</td> </tr> <tr> <td>3001</td> <td>Error setting mandatory fields, TRANSACTION_ID is empty! TRANSACTION_ID is required for CAPTURE transaction type</td> </tr> <tr> <td>3002</td> <td>Error setting mandatory fields, RETURN_URL is empty!</td> </tr> <tr> <td>3003</td> <td>Error setting mandatory fields, RESPONSE_TYPE is empty!</td> </tr> <tr> <td>3004</td> <td>Error setting mandatory fields, TXN_URL is Null for RESPONSE_TYPE using HTTP!</td> </tr> <tr> <td>3005</td> <td>Invalid value for RESPONSE_TYPE for non-3D transaction! Acceptable Value : HTTP, XML, PLAIN</td> </tr> <tr> <td>3006</td> <td>Error setting mandatory fields, TXN_SIGNATURE is empty!</td> </tr> <tr> <td>3007</td> <td>Invalid value for TXN_SIGNATURE! Computed signature does not match one included in the request.</td> </tr> <tr> <td>3008</td> <td>Invalid format for TXN_SIGNATURE! TXN_SIGNATURE must be length of 32, and in hexadecimal format.</td> </tr> <tr> <td>3009</td> <td>Unable to find the transaction record!</td> </tr> <tr> <td>3010</td> <td>MERCHANT_ACC_NO not matched with previous submitted transaction request! To capture/query previous transaction, please ensure the MERCHANT_ACC_NO is the same MERCHANT_ACC_NO submitted during previous transaction.</td> </tr> <tr> <td>3011</td> <td>AMOUNT not matched with previous submitted transaction request! To capture/query previous transaction, please ensure the AMOUNT is the same AMOUNT submitted during previous transaction.</td> </tr> <tr> <td>3012</td> <td>CUSTOMER_ID not matched with previous submitted transaction request! To capture/query previous transaction, if this field is being used, please ensure the CUSTOMER_ID is the same CUSTOMER_ID submitted during previous transaction.</td> </tr> <tr> <td>3013</td> <td>MERCHANT_TRANID not matched with previous submitted transaction request! To capture/query previous transaction, please ensure the MERCHANT_TRANID is the same MERCHANT_TRANID submitted during previous transaction.</td> </tr> <tr> <td>3014</td> <td>Insecure mode for RETURN_URL. Please specify an URL which uses HTTPS protocol!</td> </tr> <tr> <td>3015</td> <td>Insecure mode for TXN_URL. Please specify an URL which uses HTTPS protocol!</td> </tr> <tr> <td>4001</td> <td>Error setting mandatory fields, CARD_HOLDER_NAME is empty!</td> </tr> <tr> <td>4002</td> <td>Error setting mandatory fields, MERCHANT_TRANID is empty!</td> </tr> <tr> <td>4003</td> <td>Duplicate MERCHANT_TRANID detected! Please ensure the MERCHANT_TRANID is always unique.</td> </tr> <tr> <td>4004</td> <td>Error setting mandatory fields, TXN_DESC is empty!</td> </tr> <tr> <td>4005</td> <td>Error setting mandatory fields for 3D transaction, MPI_CODE is empty!</td> </tr> <tr> <td>4006</td> <td>Error setting mandatory fields for 3D transaction, MPI_CAVV is empty!</td> </tr> <tr> <td>4007</td> <td>Error setting mandatory fields for 3D transaction, MPI_CAVV_ALG is empty!</td> </tr> <tr> <td>4008</td> <td>Error setting mandatory fields for 3D transaction, MPI_ECI is empty!</td> </tr> <tr> <td>4009</td> <td>Error setting mandatory fields for 3D transaction, MPI_MSG is empty!</td> </tr> <tr> <td>5001</td> <td>Error setting mandatory fields for fraud risk detection, FR_HIGHRISK_EMAIL is empty!</td> </tr> <tr> <td>5002</td> <td>Error setting mandatory fields for fraud risk detection, FR_HIGHRISK_COUNTRY is empty!</td> </tr> <tr> <td>5003</td> <td>Error setting mandatory fields for fraud risk detection, FR_BILLING_ADDRESS is empty!</td> </tr> <tr> <td>5004</td> <td>Error setting mandatory fields for fraud risk detection, FR_SHIPPING_ADDRESS is empty!</td> </tr> <tr> <td>5005</td> <td>Error setting mandatory fields for fraud risk detection, FR_SHIPPING_COST is empty!</td> </tr> <tr> <td>5006</td> <td>Error setting mandatory fields for fraud risk detection, CUSTOMER_IP is empty!</td> </tr> <tr> <td>5007</td> <td>Error setting mandatory fields for fraud risk detection, FR_PURCHASE_HOUR is empty!</td> </tr> <tr> <td>5008</td> <td>Transaction was blocked due to fraud level exceeded threshold limit.</td> </tr> <tr> <td>5009</td> <td>Transaction was blocked due to blacklisted card detected.</td> </tr> <tr> <td>6001</td> <td>Unable to get connection to MPI Server!</td> </tr> <tr> <td>6002</td> <td>Time out occurred during communication with MPI Server!</td> </tr> <tr> <td>6003</td> <td>Unable to update MPI Ref. No in system. Please try again.</td> </tr> <tr> <td>6004</td> <td>There was an error occurred during 3D authentication with MPI. Please check logs for details.</td> </tr> <tr> <td>6005</td> <td>Invalid message or response received from MPI. Please try again.</td> </tr> <tr> <td>6006</td> <td>MPI Settings are not configured correctly. Please check MPI_HOST and MPI_PORT in system configuration.</td> </tr> <tr> <td>6007</td> <td>Error occurred when trying to display ACS Form in web browser for 3D authentication. Please try again.</td> </tr> <tr> <td>6008</td> <td>Problem occurred on MPI side, cannot proceed to display ACS Form. Please check MPI message or try again.</td> </tr> <tr> <td>6009</td> <td>Unable to locate back transaction to update system after 3-D authentication process. Please try again.</td> </tr> <tr> <td>6010</td> <td>Empty response received from MPI, please try again.</td> </tr> <tr> <td>6011</td> <td>MPI Code received is not allowed to proceed to process the transaction.</td> </tr> <tr> <td>6012</td> <td>Transaction was aborted because 3-D authentication process is not completed.</td> </tr> <tr> <td>6013</td> <td>Attempted duplicate submission of 3-D authentication result. Please try with new transaction.</td> </tr> <tr> <td>6014</td> <td>MALL NAME is required for 3-D transaction. Please call bank to check Merchant Settings.</td> </tr> <tr> <td>6015</td> <td>MALL URL is required for 3-D transaction. Please call bank to check Merchant Settings.</td> </tr> <tr> <td>6016</td> <td>Invalid value for RESPONSE_TYPE for 3D transaction! Acceptable Value : HTTP only</td> </tr> <tr> <td>8001</td> <td>This MERCHANT_ACC_NO is not authorized to proceed with this transaction via website! Please check the merchant setting.</td> </tr> <tr> <td>8002</td> <td>This MERCHANT_ACC_NO is not authorized to proceed with this transaction via batch upload! Please check the merchant setting.</td> </tr> <tr> <td>8003</td> <td>Exception while query Payment Server!</td> </tr> <tr> <td>8004</td> <td>Exception while checking for fraud risk!</td> </tr> <tr> <td>9999</td> <td>Internal Exception. Please call bank to report.</td> </tr> <tr> <td>9988</td> <td>Server Time Out Exception.</td> </tr> <tr> <td>9977</td> <td>Bank Connection Error!</td> </tr> <tr> <td>9966</td> <td>Reply from bank is empty/incorrect!</td> </tr> <tr> <td>9967</td> <td>Bank rejected transaction!</td> </tr> <tr> <td>9955</td> <td>Error when trying to insert transaction table. Transaction ID is empty!</td> </tr> <tr> <td>9933</td> <td>Server interruption occurred during processing. Manual checking required. Please inform Administrator.</td> </tr> <tr> <td>9935</td> <td>Cancel payment by customer.</td> </tr> <tr> <td>9937</td> <td>Insufficient point to redeem in cardholder&#39;s account. Please enter another card number.</td> </tr> </tbody></table> <h1 id=inquiry>Inquiry</h1> <p>Have any inquiry ?<br>Feel free contact us : <a href="mailto:it@nicepay.co.id">it@nicepay.co.id</a>.</p> <h1 id=f-a-q>F.A.Q</h1> <table><thead> <tr> <th></th> <th></th> </tr> </thead><tbody> <tr> <td><strong>Q</strong></td> <td>Apakah yang dimaksud dengan callback URL?</td> </tr> <tr> <td><strong>&gt;</strong> <strong>Answer</strong></td> <td>Callback URL merupakan suatu URL yang memproses dan melakukan validasi terhadap hasil data transaksi yang di dapat.</td> </tr> <tr> <td><strong>Q</strong></td> <td>Apakah yang dimaksud dengan dbprocess URL?</td> </tr> <tr> <td><strong>&gt;</strong> <strong>Answer</strong></td> <td>DbProcess URL merupakan suatu URL yang disediakan untuk menerima dan memproses notifikasi pembayaran.</td> </tr> <tr> <td><strong>Q</strong></td> <td>Apakah merchant dapat melakukan cek status pembayaran?</td> </tr> <tr> <td><strong>&gt;</strong> <strong>Answer</strong></td> <td>Ya, NICEPAY menyediakan fitur untuk melakukan pengecekan status yang sudah tersedia di librari-librari yang telah disediakan.</td> </tr> <tr> <td><strong>Q</strong></td> <td>Apakah merchant bisa menggunakan Mid &amp; Merchant Key testing di Live Environment?</td> </tr> <tr> <td><strong>&gt;</strong> <strong>Answer</strong></td> <td>Ya, untuk Mid &amp; Merchant Key testing bisa digunakan di Live Environtment.</td> </tr> <tr> <td><strong>Q</strong></td> <td>Jika ada pembayaran customer yang ditolak, apa yang perlu merchant lakukan?</td> </tr> <tr> <td><strong>&gt;</strong> <strong>Answer</strong></td> <td>Merchant bisa melakukan pengecekan terlebih dahulu, apakah nomor virtual account, batas waktu pembayaran, dan nominal tagihan sesuai dengan invoice? Jika sudah benar semua namun tetap gagal, maka coba dahulu menggunakan fasilitas lain. sebagai contoh, pembayaran menggunakan ATM gagal, maka coba pembayaran menggunakan E-Banking. Jika pembayaran masih tetap mengalami masalah, silahkan hubungi Customer Service kami.</td> </tr> <tr> <td><strong>Q</strong></td> <td>Bagaimana jika customer sudah berhasil melakukan pembayaran, namun tidak mendapatkan email konfirmasi bayaran?</td> </tr> <tr> <td><strong>&gt;</strong> <strong>Answer</strong></td> <td>Dalam kondisi normal, customer akan mendapatkan email konfirmasi dalam waktu maksimal 5 menit setelah pembayaran. Jika tetap tidak mendapatkan email konfirmasi, silahkan mengirimkan email kepada customer service kami disertai bukti pembayaran.</td> </tr> </tbody></table> </div> <div class=dark-box> <div class=lang-selector> <a href="#" data-language-name=java>java</a> <a href="#" data-language-name=csharp>csharp</a> <a href="#" data-language-name=php>php</a> <a href="#" data-language-name=python>python</a> <div class=postman-run-button data-postman-action="collection/import" data-postman-var-1=3f18b456452959cfcedb></div> </div> </div> </div> <script>
  (function (p,o,s,t,m,a,n) {
    !p[s] && (p[s] = function () { (p[t] || (p[t] = [])).push(arguments); });
    !o.getElementById(s+t) && o.getElementsByTagName("head")[0].appendChild((
      (n = o.createElement("script")),
        (n.id = s+t), (n.async = 1), (n.src = m), n
    ));
  }(window, document, "_pm", "PostmanRunObject", "https://run.pstmn.io/button.js"));
</script> </body> </html>